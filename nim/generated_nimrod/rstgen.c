/* Generated by Nimrod Compiler v0.9.5 */
/*   (c) 2014 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct tcell43711 tcell43711;
typedef struct TNimType TNimType;
typedef struct tcellseq43727 tcellseq43727;
typedef struct tgcheap45616 tgcheap45616;
typedef struct tcellset43723 tcellset43723;
typedef struct tpagedesc43719 tpagedesc43719;
typedef struct tmemregion26010 tmemregion26010;
typedef struct tsmallchunk25240 tsmallchunk25240;
typedef struct tllchunk26004 tllchunk26004;
typedef struct tbigchunk25242 tbigchunk25242;
typedef struct tintset25217 tintset25217;
typedef struct ttrunk25213 ttrunk25213;
typedef struct tavlnode26008 tavlnode26008;
typedef struct tgcstat45614 tgcstat45614;
typedef struct TNimNode TNimNode;
typedef struct trstgenerator172016 trstgenerator172016;
typedef struct TNimObject TNimObject;
typedef struct tstringtable122812 tstringtable122812;
typedef struct TY172034 TY172034;
typedef struct ttocentry172012 ttocentry172012;
typedef struct trstnode147011 trstnode147011;
typedef struct ttable172052 ttable172052;
typedef struct tkeyvaluepairseq172055 tkeyvaluepairseq172055;
typedef struct tkeyvaluepair172058 tkeyvaluepair172058;
typedef struct TY110960 TY110960;
typedef struct trstnodeseq147009 trstnodeseq147009;
typedef struct codeblockparams172020 codeblockparams172020;
typedef struct TY95944 TY95944;
typedef struct tgeneraltokenizer156015 tgeneraltokenizer156015;
typedef struct tbasechunk25238 tbasechunk25238;
typedef struct tfreecell25230 tfreecell25230;
typedef struct tkeyvaluepairseq122810 tkeyvaluepairseq122810;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
struct  tcell43711  {
NI Refcount;
TNimType* Typ;
};
struct  tcellseq43727  {
NI Len;
NI Cap;
tcell43711** D;
};
struct  tcellset43723  {
NI Counter;
NI Max;
tpagedesc43719* Head;
tpagedesc43719** Data;
};
typedef tsmallchunk25240* TY26022[512];
typedef ttrunk25213* ttrunkbuckets25215[256];
struct  tintset25217  {
ttrunkbuckets25215 Data;
};
struct  tmemregion26010  {
NI Minlargeobj;
NI Maxlargeobj;
TY26022 Freesmallchunks;
tllchunk26004* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
NI Lastsize;
tbigchunk25242* Freechunkslist;
tintset25217 Chunkstarts;
tavlnode26008* Root;
tavlnode26008* Deleted;
tavlnode26008* Last;
tavlnode26008* Freeavlnodes;
};
struct  tgcstat45614  {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
NI64 Maxpause;
};
struct  tgcheap45616  {
void* Stackbottom;
NI Cyclethreshold;
tcellseq43727 Zct;
tcellseq43727 Decstack;
tcellset43723 Cycleroots;
tcellseq43727 Tempstack;
NI Recgclock;
tmemregion26010 Region;
tgcstat45614 Stat;
};
typedef N_NIMCALL_PTR(void, TY2689) (void* p, NI op);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY2689 marker;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  TNimObject  {
TNimType* m_type;
};
struct  ttocentry172012  {
trstnode147011* N;
NimStringDesc* Refname;
NimStringDesc* Header;
};
typedef N_NIMCALL_PTR(NimStringDesc*, tfindfilehandler148023) (NimStringDesc* filename);
typedef N_NIMCALL_PTR(void, tmsghandler148021) (NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
typedef NimStringDesc* TY172042[5];
struct tkeyvaluepair172058 {
NU8 Field0;
NimStringDesc* Field1;
NI Field2;
};
struct  ttable172052  {
tkeyvaluepairseq172055* Data;
NI Counter;
};
struct  trstgenerator172016  {
  TNimObject Sup;
NU8 Target;
tstringtable122812* Config;
NI Splitafter;
TY172034* Tocpart;
NIM_BOOL Hastoc;
NimStringDesc* Theindex;
NU8 Options;
tfindfilehandler148023 Findfile;
tmsghandler148021 Msghandler;
NimStringDesc* Filename;
TY172042 Meta;
NimStringDesc* Currentsection;
ttable172052 Seenindexterms;
};
struct TY110960 {
NimStringDesc* Field0;
NimStringDesc* Field1;
NimStringDesc* Field2;
};
struct  trstnode147011  {
NU8 Kind;
NimStringDesc* Text;
NI Level;
trstnodeseq147009* Sons;
};
typedef NimStringDesc* TY189161[4];
typedef NimStringDesc* TY93079[1];
typedef NimStringDesc* TY179593[2];
struct  codeblockparams172020  {
NIM_BOOL Numberlines;
NI Startline;
};
struct TY95944 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
typedef NimStringDesc* TY190197[1];
struct  tgeneraltokenizer156015  {
  TNimObject Sup;
NU8 Kind;
NI Start;
NI Length;
NCSTRING Buf;
NI Pos;
NU8 State;
};
typedef NimStringDesc* TY156073[33];
typedef NI TY25220[8];
struct  tpagedesc43719  {
tpagedesc43719* Next;
NI Key;
TY25220 Bits;
};
struct  tbasechunk25238  {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct  tsmallchunk25240  {
  tbasechunk25238 Sup;
tsmallchunk25240* Next;
tsmallchunk25240* Prev;
tfreecell25230* Freelist;
NI Free;
NI Acc;
NF Data;
};
struct  tllchunk26004  {
NI Size;
NI Acc;
tllchunk26004* Next;
};
struct  tbigchunk25242  {
  tbasechunk25238 Sup;
tbigchunk25242* Next;
tbigchunk25242* Prev;
NI Align;
NF Data;
};
struct  ttrunk25213  {
ttrunk25213* Next;
NI Key;
TY25220 Bits;
};
typedef tavlnode26008* TY26014[2];
struct  tavlnode26008  {
TY26014 Link;
NI Key;
NI Upperbound;
NI Level;
};
struct  tstringtable122812  {
  TNimObject Sup;
NI Counter;
tkeyvaluepairseq122810* Data;
NU8 Mode;
};
struct  tfreecell25230  {
tfreecell25230* Next;
NI Zerofield;
};
struct TY172034 {
  TGenericSeq Sup;
  ttocentry172012 data[SEQ_DECL_SIZE];
};
struct tkeyvaluepairseq172055 {
  TGenericSeq Sup;
  tkeyvaluepair172058 data[SEQ_DECL_SIZE];
};
struct trstnodeseq147009 {
  TGenericSeq Sup;
  trstnode147011* data[SEQ_DECL_SIZE];
};
struct tkeyvaluepairseq122810 {
  TGenericSeq Sup;
  TY95944 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
static N_INLINE(tcell43711*, usrtocell_47246)(void* usr);
static N_INLINE(void, rtladdzct_48804)(tcell43711* c);
N_NOINLINE(void, addzct_47217)(tcellseq43727* s, tcell43711* c);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP134)(void* p, NI op);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, nossplitFile)(NimStringDesc* path, TY110960* Result);
N_NOINLINE(void, chckNil)(void* p);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
N_NIMCALL(void, inittable_172108)(NI initialsize_172113, ttable172052* Result);
N_NIMCALL(NimStringDesc*, nstGet)(tstringtable122812* t, NimStringDesc* key);
N_NIMCALL(NI, nsuParseInt)(NimStringDesc* s);
N_NIMCALL(void, renderaux_172553)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(NI, len_147084)(trstnode147011* n);
N_NIMCALL(void, renderrsttoout_172543)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(void, renderheadline_178280)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, rstnodetorefname_148061)(trstnode147011* n);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(void, dispa_172508)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(void, nsuAddf)(NimStringDesc** s, NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, nimCharToStr)(NIM_CHAR x);
N_NIMCALL(void, setindexterm_172661)(trstgenerator172016* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, noschangeFileExt)(NimStringDesc* filename, NimStringDesc* ext);
N_NIMCALL(NimStringDesc*, nosextractFilename)(NimStringDesc* path);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, quoteindexcolumn_172641)(NimStringDesc* text);
N_NIMCALL(NimStringDesc*, nsuReplaceStr)(NimStringDesc* s, NimStringDesc* sub, NimStringDesc* by);
N_NIMCALL(void, insert_84001)(NimStringDesc** x, NimStringDesc* item, NI i);
N_NIMCALL(NimStringDesc*, striptochtml_178263)(NimStringDesc* s);
N_NIMCALL(NI, nsuFindChar)(NimStringDesc* s, NIM_CHAR sub, NI start);
N_NIMCALL(void, nsuDelete)(NimStringDesc** s, NI first, NI last);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI count, NIM_CHAR c);
N_NIMCALL(void, renderoverline_178417)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(void, renderaux_172585)(trstgenerator172016* d, trstnode147011* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result);
N_NIMCALL(void, renderfield_179501)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, addnodes_148067)(trstnode147011* n);
N_NIMCALL(NimStringDesc*, esc_172391)(NU8 target, NimStringDesc* s, NI splitafter);
N_NIMCALL(NI, nextsplitpoint_172337)(NimStringDesc* s, NI start);
static N_INLINE(void, escchar_172325)(NU8 target, NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addxmlchar_172287)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(void, addtexchar_172309)(NimStringDesc** dest, NIM_CHAR c);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s, NIM_BOOL leading, NIM_BOOL trailing);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* a, NimStringDesc* b);
N_NOINLINE(void, raiseassert_82952)(NimStringDesc* msg);
N_NIMCALL(NimStringDesc*, texcolumns_179471)(trstnode147011* n);
N_NIMCALL(trstnode147011*, lastson_147162)(trstnode147011* n);
N_NIMCALL(void, renderimage_178562)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(NimStringDesc*, getfieldvalue_148073)(trstnode147011* n, NimStringDesc* fieldname);
N_NIMCALL(NimStringDesc*, dispf_172485)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0);
N_NIMCALL(NimStringDesc*, nsuFormatOpenArray)(NimStringDesc* formatstr, NimStringDesc** a, NI aLen0);
N_NIMCALL(NimStringDesc*, getargument_148080)(trstnode147011* n);
N_NIMCALL(void, rendercodeblock_179236)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(codeblockparams172020, parsecodeblockparams_178642)(trstgenerator172016* d, trstnode147011* n);
N_NIMCALL(void, parsecodeblockfield_178626)(trstgenerator172016* d, trstnode147011* n, codeblockparams172020* params);
N_NIMCALL(NimStringDesc*, nsuToLowerStr)(NimStringDesc* s);
N_NIMCALL(NI, npuParseInt)(NimStringDesc* s, NI* number, NI start);
N_NIMCALL(NimStringDesc*, getfieldvalue_151579)(trstnode147011* n);
N_NIMCALL(NU8, getsourcelanguage_156084)(NimStringDesc* name);
N_NIMCALL(void, buildlineshtmltable_179023)(codeblockparams172020 params, NimStringDesc* code, TY95944* Result);
N_NIMCALL(NI, nsuCountLines)(NimStringDesc* s);
N_NIMCALL(void, initgeneraltokenizer_156204)(tgeneraltokenizer156015* g, NimStringDesc* buf);
N_NIMCALL(void, getnexttoken_159114)(tgeneraltokenizer156015* g, NU8 lang);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI start_73428, NI last);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* s, NI first, NI last);
N_NIMCALL(void, deinitgeneraltokenizer_156215)(tgeneraltokenizer156015* g);
N_NIMCALL(void, rendercontainer_179448)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
N_NIMCALL(void, renderindexterm_172863)(trstgenerator172016* d, trstnode147011* n_172866, NimStringDesc** result);
N_NIMCALL(NIM_BOOL, haskey_172872)(ttable172052 t_172879, NimStringDesc* key_172882);
N_NIMCALL(void, HEX5BHEX5DHEX3D_172962)(ttable172052* t_172971, NimStringDesc* key_172975, NI val_172977);
N_NIMCALL(NI, HEX5BHEX5D_172931)(ttable172052 t_172938, NimStringDesc* key_172941);
N_NIMCALL(void, rendersmiley_178610)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result);
STRING_LITERAL(TMP45, "<wbr />", 7);
STRING_LITERAL(TMP174, "", 0);
STRING_LITERAL(TMP175, ".nim", 4);
STRING_LITERAL(TMP176, "Module ", 7);
STRING_LITERAL(TMP178, "split.item.toc", 14);
STRING_LITERAL(TMP357, "\012<h$1><a class=\"toc-backref\" id=\"$2\" href=\"#$2_toc\">$3</a></h$1"
">", 64);
STRING_LITERAL(TMP358, "\\rsth$4{$3}\\label{$2}\012", 22);
STRING_LITERAL(TMP359, "\012<h$1 id=\"$2\">$3</h$1>", 22);
STRING_LITERAL(TMP360, "html", 4);
STRING_LITERAL(TMP361, "\\", 1);
STRING_LITERAL(TMP362, "\\\\", 2);
STRING_LITERAL(TMP363, "\012", 1);
STRING_LITERAL(TMP364, "\\n", 2);
STRING_LITERAL(TMP365, "\011", 1);
STRING_LITERAL(TMP366, "\\t", 2);
STRING_LITERAL(TMP367, "<h$1 id=\"$2\"><center>$3</center></h$1>", 38);
STRING_LITERAL(TMP368, "\\rstov$4{$3}\\label{$2}\012", 23);
STRING_LITERAL(TMP369, "<hr />\012", 7);
STRING_LITERAL(TMP370, "\\hrule\012", 7);
STRING_LITERAL(TMP371, "<p>$1</p>\012", 10);
STRING_LITERAL(TMP372, "$1\012\012", 4);
STRING_LITERAL(TMP373, "<ul class=\"simple\">$1</ul>\012", 27);
STRING_LITERAL(TMP374, "\\begin{itemize}$1\\end{itemize}\012", 31);
STRING_LITERAL(TMP375, "<li>$1</li>\012", 12);
STRING_LITERAL(TMP376, "\\item $1\012", 9);
STRING_LITERAL(TMP377, "<ol class=\"simple\">$1</ol>\012", 27);
STRING_LITERAL(TMP378, "\\begin{enumerate}$1\\end{enumerate}\012", 35);
STRING_LITERAL(TMP379, "<dl class=\"docutils\">$1</dl>\012", 29);
STRING_LITERAL(TMP380, "\\begin{description}$1\\end{description}\012", 39);
STRING_LITERAL(TMP381, "<dt>$1</dt>\012", 12);
STRING_LITERAL(TMP382, "\\item[$1] ", 10);
STRING_LITERAL(TMP383, "<dd>$1</dd>\012", 12);
STRING_LITERAL(TMP384, "$1\012", 3);
STRING_LITERAL(TMP385, "<table class=\"docinfo\" frame=\"void\" rules=\"none\"><col class=\"do"
"cinfo-name\" /><col class=\"docinfo-content\" /><tbody valign=\"top\""
">$1</tbody></table>", 146);
STRING_LITERAL(TMP386, " ", 1);
STRING_LITERAL(TMP387, "&amp;", 5);
STRING_LITERAL(TMP388, "&lt;", 4);
STRING_LITERAL(TMP389, "&gt;", 4);
STRING_LITERAL(TMP390, "&quot;", 6);
STRING_LITERAL(TMP391, "\\_", 2);
STRING_LITERAL(TMP392, "\\symbol{123}", 12);
STRING_LITERAL(TMP393, "\\symbol{125}", 12);
STRING_LITERAL(TMP394, "\\symbol{91}", 11);
STRING_LITERAL(TMP395, "\\symbol{93}", 11);
STRING_LITERAL(TMP396, "\\symbol{92}", 11);
STRING_LITERAL(TMP397, "\\$", 2);
STRING_LITERAL(TMP398, "\\&", 2);
STRING_LITERAL(TMP399, "\\#", 2);
STRING_LITERAL(TMP400, "\\%", 2);
STRING_LITERAL(TMP401, "\\symbol{126}", 12);
STRING_LITERAL(TMP402, "\\symbol{64}", 11);
STRING_LITERAL(TMP403, "\\symbol{94}", 11);
STRING_LITERAL(TMP404, "\\symbol{96}", 11);
STRING_LITERAL(TMP405, "author", 6);
STRING_LITERAL(TMP406, "authors", 7);
STRING_LITERAL(TMP407, "version", 7);
STRING_LITERAL(TMP408, "<tr>$1</tr>\012", 12);
STRING_LITERAL(TMP409, "$1", 2);
STRING_LITERAL(TMP410, "<th class=\"docinfo-name\">$1:</th>", 33);
STRING_LITERAL(TMP411, "\\item[$1:]", 10);
STRING_LITERAL(TMP412, "<td>$1</td>", 11);
STRING_LITERAL(TMP413, " $1\012", 4);
STRING_LITERAL(TMP414, "<table frame=\"void\">$1</table>", 30);
STRING_LITERAL(TMP415, "\\begin{description}\012$1\\end{description}\012", 40);
STRING_LITERAL(TMP416, "<th align=\"left\">$1</th>", 24);
STRING_LITERAL(TMP417, "\\item[$1]", 9);
STRING_LITERAL(TMP418, "<td align=\"left\">$1</td>\012", 25);
STRING_LITERAL(TMP420, "false renderRstToOut", 20);
STRING_LITERAL(TMP421, "<pre>$1</pre>\012", 14);
STRING_LITERAL(TMP422, "\\begin{rstpre}\012$1\012\\end{rstpre}\012", 31);
STRING_LITERAL(TMP423, "<p>$1</p>", 9);
STRING_LITERAL(TMP424, "$1<br />", 8);
STRING_LITERAL(TMP425, "$1\\\\\012", 5);
STRING_LITERAL(TMP426, "<blockquote><p>$1</p></blockquote>\012", 35);
STRING_LITERAL(TMP427, "\\begin{quote}$1\\end{quote}\012", 27);
STRING_LITERAL(TMP428, "<table border=\"1\" class=\"docutils\">$1</table>", 45);
STRING_LITERAL(TMP429, "\\begin{table}\\begin{rsttab}{", 28);
STRING_LITERAL(TMP430, "|X", 2);
STRING_LITERAL(TMP431, "|}\012\\hline\012$1\\end{rsttab}\\end{table}", 35);
STRING_LITERAL(TMP432, " & ", 3);
STRING_LITERAL(TMP433, "\\\\\012\\hline\012", 10);
STRING_LITERAL(TMP434, "<tr>", 4);
STRING_LITERAL(TMP435, "</tr>\012", 6);
STRING_LITERAL(TMP436, "<th>$1</th>", 11);
STRING_LITERAL(TMP437, "\\textbf{$1}", 11);
STRING_LITERAL(TMP438, "<a class=\"reference external\" href=\"#$2\">$1</a>", 47);
STRING_LITERAL(TMP439, "$1\\ref{$2}", 10);
STRING_LITERAL(TMP440, "<a class=\"reference external\" href=\"$1\">$1</a>", 46);
STRING_LITERAL(TMP441, "\\href{$1}{$1}", 13);
STRING_LITERAL(TMP442, "<a class=\"reference external\" href=\"$2\">$1</a>", 46);
STRING_LITERAL(TMP443, "\\href{$2}{$1}", 13);
STRING_LITERAL(TMP444, "scale", 5);
STRING_LITERAL(TMP445, " scale=\"$1\"", 11);
STRING_LITERAL(TMP446, " scale=$1", 9);
STRING_LITERAL(TMP447, "height", 6);
STRING_LITERAL(TMP448, " height=\"$1\"", 12);
STRING_LITERAL(TMP449, " height=$1", 10);
STRING_LITERAL(TMP450, "width", 5);
STRING_LITERAL(TMP451, " width=\"$1\"", 11);
STRING_LITERAL(TMP452, " width=$1", 9);
STRING_LITERAL(TMP453, "alt", 3);
STRING_LITERAL(TMP454, " alt=\"$1\"", 9);
STRING_LITERAL(TMP455, "align", 5);
STRING_LITERAL(TMP456, " align=\"$1\"", 11);
STRING_LITERAL(TMP457, "[$1]", 4);
STRING_LITERAL(TMP458, "<img src=\"$1\"$2 />", 18);
STRING_LITERAL(TMP459, "\\includegraphics$2{$1}", 22);
STRING_LITERAL(TMP460, "number-lines", 12);
STRING_LITERAL(TMP468, "<pre>", 5);
STRING_LITERAL(TMP469, "</pre>", 6);
NIM_CONST TY95944 TMP467 = {((NimStringDesc*) &TMP468),
((NimStringDesc*) &TMP469)}
;
STRING_LITERAL(TMP470, "<table><tbody><tr><td class=\"blob-line-nums\"><pre>", 50);
STRING_LITERAL(TMP471, "</pre></td><td><pre>", 20);
STRING_LITERAL(TMP472, "</pre></td></tr></tbody></table>", 32);
STRING_LITERAL(TMP473, "\\begin{rstpre}\012", 15);
STRING_LITERAL(TMP633, "<span class=\"$2\">$1</span>", 26);
STRING_LITERAL(TMP634, "\\span$2{$1}", 11);
extern NIM_CONST TY156073 tokenclasstostr_156072;
STRING_LITERAL(TMP668, "\012\\end{rstpre}\012", 14);
STRING_LITERAL(TMP669, "<div>$1</div>", 13);
STRING_LITERAL(TMP670, "<div class=\"$1\">$2</div>", 24);
STRING_LITERAL(TMP671, "$2", 2);
STRING_LITERAL(TMP672, "|$1|", 4);
STRING_LITERAL(TMP673, "<sub>$1</sub>", 13);
STRING_LITERAL(TMP674, "\\rstsub{$1}", 11);
STRING_LITERAL(TMP675, "<sup>$1</sup>", 13);
STRING_LITERAL(TMP676, "\\rstsup{$1}", 11);
STRING_LITERAL(TMP677, "<em>$1</em>", 11);
STRING_LITERAL(TMP678, "\\emph{$1}", 9);
STRING_LITERAL(TMP679, "<strong>$1</strong>", 19);
STRING_LITERAL(TMP680, "<strong><em>$1</em></strong>", 28);
STRING_LITERAL(TMP681, "\\textbf{emph{$1}}", 17);
STRING_LITERAL(TMP682, "<cite>$1</cite>", 15);
STRING_LITERAL(TMP683, "<span id=\"$1\">$2</span>", 23);
STRING_LITERAL(TMP684, "$2\\label{$1}", 12);
STRING_LITERAL(TMP685, "<tt class=\"docutils literal\"><span class=\"pre\">$1</span></tt>", 61);
STRING_LITERAL(TMP686, "\\texttt{$1}", 11);
STRING_LITERAL(TMP687, "<img src=\"/images/smilies/$1.gif\" width=\"15\" \012        height=\"1"
"7\" hspace=\"2\" vspace=\"2\" />", 90);
STRING_LITERAL(TMP688, "\\includegraphics{$1}", 20);
NimStringDesc* splitter_172320;
extern tgcheap45616 gch_45644;
extern TNimType NTI2811; /* TObject */
TNimType NTI172016; /* TRstGenerator */
TNimType NTI172010; /* TOutputTarget */
extern TNimType NTI122814; /* PStringTable */
extern TNimType NTI112; /* int */
TNimType NTI172012; /* TTocEntry */
extern TNimType NTI147007; /* PRstNode */
extern TNimType NTI157; /* string */
TNimType NTI172034; /* seq[TTocEntry] */
extern TNimType NTI146; /* bool */
extern TNimType NTI190349; /* set[TRstParseOption] */
extern TNimType NTI148023; /* TFindFileHandler */
extern TNimType NTI148021; /* TMsgHandler */
TNimType NTI172042; /* array[TMetaEnum, string] */
extern TNimType NTI172052; /* TTable */
extern TNimType NTI156015; /* TGeneralTokenizer */

static N_INLINE(tcell43711*, usrtocell_47246)(void* usr) {
	tcell43711* result;
	result = 0;
	result = ((tcell43711*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(tcell43711))))));
	return result;
}

static N_INLINE(void, rtladdzct_48804)(tcell43711* c) {
	addzct_47217(&gch_45644.Zct, c);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tcell43711* c;
	c = usrtocell_47246(p);
	{
		(*c).Refcount -= 8;
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		rtladdzct_48804(c);
	}
	LA3: ;
}
N_NIMCALL(void, TMP134)(void* p, NI op) {
	TY172034* a;
	NI LOC1;
	a = (TY172034*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].N, op);
	nimGCvisit((void*)a->data[LOC1].Refname, op);
	nimGCvisit((void*)a->data[LOC1].Header, op);
	}
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = 0;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = 0;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = 0;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (NI64)((*a).Sup.len * 1));
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	BeforeRet: ;
	return result;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));
	(*dest).Sup.len += (*src).Sup.len;
}

N_NIMCALL(void, initrstgenerator_172076)(trstgenerator172016* g, NU8 target, tstringtable122812* config, NimStringDesc* filename, NU8 options, tfindfilehandler148023 findfile, tmsghandler148021 msghandler) {
	TY110960 fileparts;
	NimStringDesc* s;
	NU8 i_172262;
	NU8 res_172264;
	unsureAsgnRef((void**) &(*g).Config, config);
	(*g).Target = target;
	unsureAsgnRef((void**) &(*g).Tocpart, (TY172034*) newSeq((&NTI172034), 0));
	unsureAsgnRef((void**) &(*g).Filename, copyString(filename));
	(*g).Splitafter = 20;
	unsureAsgnRef((void**) &(*g).Theindex, copyString(((NimStringDesc*) &TMP174)));
	(*g).Options = options;
	(*g).Findfile = findfile;
	unsureAsgnRef((void**) &(*g).Currentsection, copyString(((NimStringDesc*) &TMP174)));
	chckNil((void*)&fileparts);
	memset((void*)&fileparts, 0, sizeof(fileparts));
	nossplitFile(filename, &fileparts);
	{
		NimStringDesc* LOC5;
		if (!eqStrings(fileparts.Field2, ((NimStringDesc*) &TMP175))) goto LA3;
		LOC5 = 0;
		LOC5 = rawNewString(fileparts.Field1->Sup.len + 7);
appendString(LOC5, ((NimStringDesc*) &TMP176));
appendString(LOC5, fileparts.Field1);
		unsureAsgnRef((void**) &(*g).Currentsection, LOC5);
	}
	LA3: ;
	inittable_172108(64, &(*g).Seenindexterms);
	(*g).Msghandler = msghandler;
	s = nstGet(config, ((NimStringDesc*) &TMP178));
	{
		if (!!(((s) && (s)->Sup.len == 0))) goto LA8;
		(*g).Splitafter = nsuParseInt(s);
	}
	LA8: ;
	i_172262 = 0;
	res_172264 = ((NU8) 0);
	while (1) {
		if (!(res_172264 <= ((NU8) 4))) goto LA10;
		i_172262 = res_172264;
		unsureAsgnRef((void**) &(*g).Meta[(i_172262)- 0], copyString(((NimStringDesc*) &TMP174)));
		res_172264 += 1;
	} LA10: ;
}

N_NIMCALL(void, renderaux_172553)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	NI i_172571;
	NI HEX3Atmp_172572;
	NI LOC1;
	NI res_172574;
	i_172571 = 0;
	HEX3Atmp_172572 = 0;
	LOC1 = 0;
	LOC1 = len_147084(n);
	HEX3Atmp_172572 = (NI64)(LOC1 - 1);
	res_172574 = 0;
	while (1) {
		if (!(res_172574 <= HEX3Atmp_172572)) goto LA2;
		i_172571 = res_172574;
		renderrsttoout_172543(d, (*n).Sons->data[i_172571], result);
		res_172574 += 1;
	} LA2: ;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		tcell43711* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_47246(src);
		(*c).Refcount += 8;
	}
	LA3: ;
	{
		tcell43711* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_47246((*dest));
		{
			(*c).Refcount -= 8;
			if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA11;
			rtladdzct_48804(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(void, dispa_172508)(NU8 target, NimStringDesc** dest, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		nsuAddf(dest, xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		nsuAddf(dest, tex, args, argsLen0);
	}
	LA1: ;
}

static N_INLINE(void, appendChar)(NimStringDesc* dest, NIM_CHAR c) {
	(*dest).data[((*dest).Sup.len)- 0] = c;
	(*dest).data[((NI64)((*dest).Sup.len + 1))- 0] = 0;
	(*dest).Sup.len += 1;
}

N_NIMCALL(NimStringDesc*, quoteindexcolumn_172641)(NimStringDesc* text) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	result = 0;
	LOC1 = 0;
	LOC1 = nsuReplaceStr(text, ((NimStringDesc*) &TMP361), ((NimStringDesc*) &TMP362));
	LOC2 = 0;
	LOC2 = nsuReplaceStr(LOC1, ((NimStringDesc*) &TMP363), ((NimStringDesc*) &TMP364));
	result = nsuReplaceStr(LOC2, ((NimStringDesc*) &TMP365), ((NimStringDesc*) &TMP366));
	return result;
}

N_NIMCALL(void, setindexterm_172661)(trstgenerator172016* d, NimStringDesc* id, NimStringDesc* term, NimStringDesc* linktitle, NimStringDesc* linkdesc) {
	NimStringDesc* entry;
	NIM_BOOL istitle;
	NimStringDesc* htmlfile;
	NimStringDesc* LOC1;
	entry = copyString(term);
	istitle = NIM_FALSE;
	entry = addChar(entry, 9);
	LOC1 = 0;
	LOC1 = nosextractFilename((*d).Filename);
	htmlfile = noschangeFileExt(LOC1, ((NimStringDesc*) &TMP360));
	entry = resizeString(entry, htmlfile->Sup.len + 0);
appendString(entry, htmlfile);
	{
		if (!(0 < id->Sup.len)) goto LA4;
		entry = addChar(entry, 35);
		entry = resizeString(entry, id->Sup.len + 0);
appendString(entry, id);
	}
	goto LA2;
	LA4: ;
	{
		istitle = NIM_TRUE;
	}
	LA2: ;
	{
		NIM_BOOL LOC9;
		NimStringDesc* LOC13;
		NimStringDesc* LOC14;
		NimStringDesc* LOC15;
		NimStringDesc* LOC16;
		LOC9 = 0;
		LOC9 = (0 < linktitle->Sup.len);
		if (LOC9) goto LA10;
		LOC9 = (0 < linkdesc->Sup.len);
		LA10: ;
		if (!LOC9) goto LA11;
		LOC13 = 0;
		LOC14 = 0;
		LOC14 = quoteindexcolumn_172641(linktitle);
		LOC13 = rawNewString(LOC14->Sup.len + 1);
appendChar(LOC13, 9);
appendString(LOC13, LOC14);
		entry = resizeString(entry, LOC13->Sup.len + 0);
appendString(entry, LOC13);
		LOC15 = 0;
		LOC16 = 0;
		LOC16 = quoteindexcolumn_172641(linkdesc);
		LOC15 = rawNewString(LOC16->Sup.len + 1);
appendChar(LOC15, 9);
appendString(LOC15, LOC16);
		entry = resizeString(entry, LOC15->Sup.len + 0);
appendString(entry, LOC15);
	}
	LA11: ;
	entry = resizeString(entry, 1);
appendString(entry, ((NimStringDesc*) &TMP363));
	{
		if (!istitle) goto LA19;
		insert_84001(&(*d).Theindex, entry, 0);
	}
	goto LA17;
	LA19: ;
	{
		(*d).Theindex = resizeString((*d).Theindex, entry->Sup.len + 0);
appendString((*d).Theindex, entry);
	}
	LA17: ;
}

N_NIMCALL(NimStringDesc*, striptochtml_178263)(NimStringDesc* s) {
	NimStringDesc* result;
	NI first;
	result = 0;
	result = copyString(s);
	first = nsuFindChar(result, 60, 0);
	while (1) {
		NI last;
		if (!(0 <= first)) goto LA1;
		last = nsuFindChar(result, 62, first);
		{
			if (!(last < 0)) goto LA4;
			goto BeforeRet;
		}
		LA4: ;
		nsuDelete(&result, first, last);
		first = nsuFindChar(result, 60, first);
	} LA1: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(void, renderheadline_178280)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NI i_178299;
	NI HEX3Atmp_178404;
	NI LOC1;
	NI res_178406;
	NimStringDesc* refname;
	NimStringDesc* LOC12;
	NimStringDesc* LOC13;
	NimStringDesc* LOC14;
	tmp = copyString(((NimStringDesc*) &TMP174));
	i_178299 = 0;
	HEX3Atmp_178404 = 0;
	LOC1 = 0;
	LOC1 = len_147084(n);
	HEX3Atmp_178404 = (NI64)(LOC1 - 1);
	res_178406 = 0;
	while (1) {
		if (!(res_178406 <= HEX3Atmp_178404)) goto LA2;
		i_178299 = res_178406;
		renderrsttoout_172543(d, (*n).Sons->data[i_178299], &tmp);
		res_178406 += 1;
	} LA2: ;
	unsureAsgnRef((void**) &(*d).Currentsection, copyString(tmp));
	refname = rstnodetorefname_148061(n);
	{
		NI length;
		NimStringDesc* LOC7;
		NimStringDesc* LOC8;
		TY189161 LOC9;
		if (!(*d).Hastoc) goto LA5;
		length = (*d).Tocpart->Sup.len;
		(*d).Tocpart = (TY172034*) setLengthSeq(&((*d).Tocpart)->Sup, sizeof(ttocentry172012), (NI64)(length + 1));
		LOC7 = 0;
		LOC7 = (*d).Tocpart->data[length].Refname; (*d).Tocpart->data[length].Refname = copyStringRC1(refname);
		if (LOC7) nimGCunrefNoCycle(LOC7);
		asgnRefNoCycle((void**) &(*d).Tocpart->data[length].N, n);
		LOC8 = 0;
		LOC8 = (*d).Tocpart->data[length].Header; (*d).Tocpart->data[length].Header = copyStringRC1(tmp);
		if (LOC8) nimGCunrefNoCycle(LOC8);
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = nimIntToStr((*n).Level);
		LOC9[1] = copyString((*d).Tocpart->data[length].Refname);
		LOC9[2] = copyString(tmp);
		LOC9[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP357), ((NimStringDesc*) &TMP358), LOC9, 4);
	}
	goto LA3;
	LA5: ;
	{
		TY189161 LOC11;
		memset((void*)LOC11, 0, sizeof(LOC11));
		LOC11[0] = nimIntToStr((*n).Level);
		LOC11[1] = copyString(refname);
		LOC11[2] = copyString(tmp);
		LOC11[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP359), ((NimStringDesc*) &TMP358), LOC11, 4);
	}
	LA3: ;
	LOC12 = 0;
	LOC12 = striptochtml_178263(tmp);
	LOC13 = 0;
	LOC14 = 0;
	LOC14 = nsuRepeatChar(((0 >= (*n).Level) ? 0 : (*n).Level), 32);
	LOC13 = rawNewString(LOC14->Sup.len + tmp->Sup.len + 0);
appendString(LOC13, LOC14);
appendString(LOC13, tmp);
	setindexterm_172661(d, refname, LOC12, LOC13, ((NimStringDesc*) &TMP174));
}

N_NIMCALL(void, renderoverline_178417)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	{
		NI i_178435;
		NI HEX3Atmp_178479;
		NI LOC5;
		NI res_178481;
		if (!((*d).Meta[(((NU8) 1))- 0]->Sup.len == 0)) goto LA3;
		i_178435 = 0;
		HEX3Atmp_178479 = 0;
		LOC5 = 0;
		LOC5 = len_147084(n);
		HEX3Atmp_178479 = (NI64)(LOC5 - 1);
		res_178481 = 0;
		while (1) {
			if (!(res_178481 <= HEX3Atmp_178479)) goto LA6;
			i_178435 = res_178481;
			renderrsttoout_172543(d, (*n).Sons->data[i_178435], &(*d).Meta[(((NU8) 1))- 0]);
			res_178481 += 1;
		} LA6: ;
		unsureAsgnRef((void**) &(*d).Currentsection, copyString((*d).Meta[(((NU8) 1))- 0]));
	}
	goto LA1;
	LA3: ;
	{
		NI i_178449;
		NI HEX3Atmp_178483;
		NI LOC10;
		NI res_178485;
		if (!((*d).Meta[(((NU8) 2))- 0]->Sup.len == 0)) goto LA8;
		i_178449 = 0;
		HEX3Atmp_178483 = 0;
		LOC10 = 0;
		LOC10 = len_147084(n);
		HEX3Atmp_178483 = (NI64)(LOC10 - 1);
		res_178485 = 0;
		while (1) {
			if (!(res_178485 <= HEX3Atmp_178483)) goto LA11;
			i_178449 = res_178485;
			renderrsttoout_172543(d, (*n).Sons->data[i_178449], &(*d).Meta[(((NU8) 2))- 0]);
			res_178485 += 1;
		} LA11: ;
		unsureAsgnRef((void**) &(*d).Currentsection, copyString((*d).Meta[(((NU8) 2))- 0]));
	}
	goto LA1;
	LA8: ;
	{
		NimStringDesc* tmp;
		NI i_178464;
		NI HEX3Atmp_178487;
		NI LOC13;
		NI res_178489;
		TY189161 LOC15;
		tmp = copyString(((NimStringDesc*) &TMP174));
		i_178464 = 0;
		HEX3Atmp_178487 = 0;
		LOC13 = 0;
		LOC13 = len_147084(n);
		HEX3Atmp_178487 = (NI64)(LOC13 - 1);
		res_178489 = 0;
		while (1) {
			if (!(res_178489 <= HEX3Atmp_178487)) goto LA14;
			i_178464 = res_178489;
			renderrsttoout_172543(d, (*n).Sons->data[i_178464], &tmp);
			res_178489 += 1;
		} LA14: ;
		unsureAsgnRef((void**) &(*d).Currentsection, copyString(tmp));
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = nimIntToStr((*n).Level);
		LOC15[1] = rstnodetorefname_148061(n);
		LOC15[2] = copyString(tmp);
		LOC15[3] = nimCharToStr(((NIM_CHAR) (((NI) ((NI64)((NI64)((*n).Level - 1) + 65))))));
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP367), ((NimStringDesc*) &TMP368), LOC15, 4);
	}
	LA1: ;
}

N_NIMCALL(void, renderaux_172585)(trstgenerator172016* d, trstnode147011* n, NimStringDesc* frmta, NimStringDesc* frmtb, NimStringDesc** result) {
	NimStringDesc* tmp;
	NI i_172606;
	NI HEX3Atmp_172625;
	NI LOC1;
	NI res_172627;
	tmp = copyString(((NimStringDesc*) &TMP174));
	i_172606 = 0;
	HEX3Atmp_172625 = 0;
	LOC1 = 0;
	LOC1 = len_147084(n);
	HEX3Atmp_172625 = (NI64)(LOC1 - 1);
	res_172627 = 0;
	while (1) {
		if (!(res_172627 <= HEX3Atmp_172625)) goto LA2;
		i_172606 = res_172627;
		renderrsttoout_172543(d, (*n).Sons->data[i_172606], &tmp);
		res_172627 += 1;
	} LA2: ;
	{
		TY93079 LOC7;
		if (!!(((*d).Target == ((NU8) 1)))) goto LA5;
		memset((void*)LOC7, 0, sizeof(LOC7));
		LOC7[0] = copyString(tmp);
		nsuAddf(result, frmta, LOC7, 1);
	}
	goto LA3;
	LA5: ;
	{
		TY93079 LOC9;
		memset((void*)LOC9, 0, sizeof(LOC9));
		LOC9[0] = copyString(tmp);
		nsuAddf(result, frmtb, LOC9, 1);
	}
	LA3: ;
}

N_NIMCALL(NI, nextsplitpoint_172337)(NimStringDesc* s, NI start) {
	NI result;
	result = 0;
	result = start;
	while (1) {
		if (!(result < (NI64)(s->Sup.len + 0))) goto LA1;
		switch (((NU8)(s->data[result]))) {
		case 95:
		{
			goto BeforeRet;
		}
		break;
		case 97 ... 122:
		{
			{
				if (!((NI64)(result + 1) < (NI64)(s->Sup.len + 0))) goto LA6;
				{
					if (!(((NU8)(s->data[(NI64)(result + 1)])) >= ((NU8)(65)) && ((NU8)(s->data[(NI64)(result + 1)])) <= ((NU8)(90)))) goto LA10;
					goto BeforeRet;
				}
				LA10: ;
			}
			LA6: ;
		}
		break;
		default:
		{
		}
		break;
		}
		result += 1;
	} LA1: ;
	result -= 1;
	BeforeRet: ;
	return result;
}

N_NIMCALL(void, addxmlchar_172287)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 38:
	{
		(*dest) = resizeString((*dest), 5);
appendString((*dest), ((NimStringDesc*) &TMP387));
	}
	break;
	case 60:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP388));
	}
	break;
	case 62:
	{
		(*dest) = resizeString((*dest), 4);
appendString((*dest), ((NimStringDesc*) &TMP389));
	}
	break;
	case 34:
	{
		(*dest) = resizeString((*dest), 6);
appendString((*dest), ((NimStringDesc*) &TMP390));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

N_NIMCALL(void, addtexchar_172309)(NimStringDesc** dest, NIM_CHAR c) {
	switch (((NU8)(c))) {
	case 95:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP391));
	}
	break;
	case 123:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP392));
	}
	break;
	case 125:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP393));
	}
	break;
	case 91:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP394));
	}
	break;
	case 93:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP395));
	}
	break;
	case 92:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP396));
	}
	break;
	case 36:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP397));
	}
	break;
	case 38:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP398));
	}
	break;
	case 35:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP399));
	}
	break;
	case 37:
	{
		(*dest) = resizeString((*dest), 2);
appendString((*dest), ((NimStringDesc*) &TMP400));
	}
	break;
	case 126:
	{
		(*dest) = resizeString((*dest), 12);
appendString((*dest), ((NimStringDesc*) &TMP401));
	}
	break;
	case 64:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP402));
	}
	break;
	case 94:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP403));
	}
	break;
	case 96:
	{
		(*dest) = resizeString((*dest), 11);
appendString((*dest), ((NimStringDesc*) &TMP404));
	}
	break;
	default:
	{
		(*dest) = addChar((*dest), c);
	}
	break;
	}
}

static N_INLINE(void, escchar_172325)(NU8 target, NimStringDesc** dest, NIM_CHAR c) {
	switch (target) {
	case ((NU8) 0):
	{
		addxmlchar_172287(dest, c);
	}
	break;
	case ((NU8) 1):
	{
		addtexchar_172309(dest, c);
	}
	break;
	}
}

N_NIMCALL(NimStringDesc*, esc_172391)(NU8 target, NimStringDesc* s, NI splitafter) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP174));
	{
		NI partlen;
		NI j;
		if (!(0 <= splitafter)) goto LA3;
		partlen = 0;
		j = 0;
		while (1) {
			NI k;
			NI i_172414;
			NI res_172443;
			if (!(j < s->Sup.len)) goto LA5;
			k = nextsplitpoint_172337(s, j);
			{
				NIM_BOOL LOC8;
				LOC8 = 0;
				LOC8 = !(eqStrings(splitter_172320, ((NimStringDesc*) &TMP386)));
				if (LOC8) goto LA9;
				LOC8 = (splitafter < (NI64)((NI64)((NI64)(partlen + k) - j) + 1));
				LA9: ;
				if (!LOC8) goto LA10;
				partlen = 0;
				result = resizeString(result, splitter_172320->Sup.len + 0);
appendString(result, splitter_172320);
			}
			LA10: ;
			i_172414 = 0;
			res_172443 = j;
			while (1) {
				if (!(res_172443 <= k)) goto LA12;
				i_172414 = res_172443;
				escchar_172325(target, &result, s->data[i_172414]);
				res_172443 += 1;
			} LA12: ;
			partlen += (NI64)((NI64)(k - j) + 1);
			j = (NI64)(k + 1);
		} LA5: ;
	}
	goto LA1;
	LA3: ;
	{
		NI i_172440;
		NI HEX3Atmp_172445;
		NI res_172447;
		i_172440 = 0;
		HEX3Atmp_172445 = 0;
		HEX3Atmp_172445 = (NI64)(s->Sup.len - 1);
		res_172447 = 0;
		while (1) {
			if (!(res_172447 <= HEX3Atmp_172445)) goto LA14;
			i_172440 = res_172447;
			escchar_172325(target, &result, s->data[i_172440]);
			res_172447 += 1;
		} LA14: ;
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderfield_179501)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	NIM_BOOL b;
	b = NIM_FALSE;
	{
		NimStringDesc* fieldname;
		NimStringDesc* fieldval;
		NimStringDesc* LOC5;
		NimStringDesc* LOC6;
		if (!((*d).Target == ((NU8) 1))) goto LA3;
		fieldname = addnodes_148067((*n).Sons->data[0]);
		LOC5 = 0;
		LOC5 = addnodes_148067((*n).Sons->data[1]);
		LOC6 = 0;
		LOC6 = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE);
		fieldval = esc_172391((*d).Target, LOC6, -1);
		{
			NIM_BOOL LOC9;
			NI LOC10;
			NI LOC12;
			LOC9 = 0;
			LOC10 = 0;
			LOC10 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP405));
			LOC9 = (LOC10 == 0);
			if (LOC9) goto LA11;
			LOC12 = 0;
			LOC12 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP406));
			LOC9 = (LOC12 == 0);
			LA11: ;
			if (!LOC9) goto LA13;
			{
				if (!((*d).Meta[(((NU8) 3))- 0]->Sup.len == 0)) goto LA17;
				unsureAsgnRef((void**) &(*d).Meta[(((NU8) 3))- 0], copyString(fieldval));
				b = NIM_TRUE;
			}
			LA17: ;
		}
		goto LA7;
		LA13: ;
		{
			NI LOC20;
			LOC20 = 0;
			LOC20 = nsuCmpIgnoreStyle(fieldname, ((NimStringDesc*) &TMP407));
			if (!(LOC20 == 0)) goto LA21;
			{
				if (!((*d).Meta[(((NU8) 4))- 0]->Sup.len == 0)) goto LA25;
				unsureAsgnRef((void**) &(*d).Meta[(((NU8) 4))- 0], copyString(fieldval));
				b = NIM_TRUE;
			}
			LA25: ;
		}
		goto LA7;
		LA21: ;
		LA7: ;
	}
	LA3: ;
	{
		if (!!(b)) goto LA29;
		renderaux_172585(d, n, ((NimStringDesc*) &TMP408), ((NimStringDesc*) &TMP409), result);
	}
	LA29: ;
}

N_NIMCALL(NimStringDesc*, texcolumns_179471)(trstnode147011* n) {
	NimStringDesc* result;
	NI i_179487;
	NI HEX3Atmp_179488;
	NI res_179490;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP174));
	i_179487 = 0;
	HEX3Atmp_179488 = 0;
	HEX3Atmp_179488 = len_147084(n);
	res_179490 = 1;
	while (1) {
		if (!(res_179490 <= HEX3Atmp_179488)) goto LA1;
		i_179487 = res_179490;
		result = resizeString(result, 2);
appendString(result, ((NimStringDesc*) &TMP430));
		res_179490 += 1;
	} LA1: ;
	return result;
}

N_NIMCALL(NimStringDesc*, dispf_172485)(NU8 target, NimStringDesc* xml, NimStringDesc* tex, NimStringDesc** args, NI argsLen0) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((target == ((NU8) 1)))) goto LA3;
		result = nsuFormatOpenArray(xml, args, argsLen0);
	}
	goto LA1;
	LA3: ;
	{
		result = nsuFormatOpenArray(tex, args, argsLen0);
	}
	LA1: ;
	return result;
}

N_NIMCALL(void, renderimage_178562)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	NimStringDesc* options;
	NimStringDesc* s;
	TY179593 LOC31;
	options = copyString(((NimStringDesc*) &TMP174));
	s = getfieldvalue_148073(n, ((NimStringDesc*) &TMP444));
	{
		TY93079 LOC5;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA3;
		memset((void*)LOC5, 0, sizeof(LOC5));
		LOC5[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_172508((*d).Target, &options, ((NimStringDesc*) &TMP445), ((NimStringDesc*) &TMP446), LOC5, 1);
	}
	LA3: ;
	s = getfieldvalue_148073(n, ((NimStringDesc*) &TMP447));
	{
		TY93079 LOC10;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA8;
		memset((void*)LOC10, 0, sizeof(LOC10));
		LOC10[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_172508((*d).Target, &options, ((NimStringDesc*) &TMP448), ((NimStringDesc*) &TMP449), LOC10, 1);
	}
	LA8: ;
	s = getfieldvalue_148073(n, ((NimStringDesc*) &TMP450));
	{
		TY93079 LOC15;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA13;
		memset((void*)LOC15, 0, sizeof(LOC15));
		LOC15[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_172508((*d).Target, &options, ((NimStringDesc*) &TMP451), ((NimStringDesc*) &TMP452), LOC15, 1);
	}
	LA13: ;
	s = getfieldvalue_148073(n, ((NimStringDesc*) &TMP453));
	{
		TY93079 LOC20;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA18;
		memset((void*)LOC20, 0, sizeof(LOC20));
		LOC20[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_172508((*d).Target, &options, ((NimStringDesc*) &TMP454), ((NimStringDesc*) &TMP174), LOC20, 1);
	}
	LA18: ;
	s = getfieldvalue_148073(n, ((NimStringDesc*) &TMP455));
	{
		TY93079 LOC25;
		if (!!(((s) && (s)->Sup.len == 0))) goto LA23;
		memset((void*)LOC25, 0, sizeof(LOC25));
		LOC25[0] = nsuStrip(s, NIM_TRUE, NIM_TRUE);
		dispa_172508((*d).Target, &options, ((NimStringDesc*) &TMP456), ((NimStringDesc*) &TMP174), LOC25, 1);
	}
	LA23: ;
	{
		TY93079 LOC30;
		if (!(0 < options->Sup.len)) goto LA28;
		memset((void*)LOC30, 0, sizeof(LOC30));
		LOC30[0] = copyString(options);
		options = dispf_172485((*d).Target, ((NimStringDesc*) &TMP409), ((NimStringDesc*) &TMP457), LOC30, 1);
	}
	LA28: ;
	memset((void*)LOC31, 0, sizeof(LOC31));
	LOC31[0] = getargument_148080(n);
	LOC31[1] = copyString(options);
	dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP458), ((NimStringDesc*) &TMP459), LOC31, 2);
	{
		NI LOC34;
		LOC34 = 0;
		LOC34 = len_147084(n);
		if (!(3 <= LOC34)) goto LA35;
		renderrsttoout_172543(d, (*n).Sons->data[2], result);
	}
	LA35: ;
}

N_NIMCALL(void, parsecodeblockfield_178626)(trstgenerator172016* d, trstnode147011* n, codeblockparams172020* params) {
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	LOC1 = 0;
	LOC1 = getargument_148080(n);
	LOC2 = 0;
	LOC2 = nsuToLowerStr(LOC1);
	if (eqStrings(LOC2, ((NimStringDesc*) &TMP460))) goto LA3;
	goto LA4;
	LA3: ;
	{
		NI number;
		(*params).Numberlines = NIM_TRUE;
		number = 0;
		{
			NimStringDesc* LOC9;
			NI LOC10;
			LOC9 = 0;
			LOC9 = getfieldvalue_151579(n);
			LOC10 = 0;
			LOC10 = npuParseInt(LOC9, &number, 0);
			if (!(0 < LOC10)) goto LA11;
			(*params).Startline = number;
		}
		LA11: ;
	}
	goto LA5;
	LA4: ;
	{
		NimStringDesc* LOC14;
		LOC14 = 0;
		LOC14 = getfieldvalue_151579(n);
		(*d).Msghandler((*d).Filename, 1, 0, ((NU8) 9), LOC14);
	}
	LA5: ;
}

N_NIMCALL(codeblockparams172020, parsecodeblockparams_178642)(trstgenerator172016* d, trstnode147011* n) {
	codeblockparams172020 result;
	trstnode147011* son_179007;
	trstnodeseq147009* HEX3Atmp_179009;
	NI i_179011;
	NI l_179013;
	memset((void*)&result, 0, sizeof(result));
	result.Startline = 1;
	{
		if (!n == 0) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	son_179007 = 0;
	HEX3Atmp_179009 = 0;
	HEX3Atmp_179009 = (*n).Sons;
	i_179011 = 0;
	l_179013 = HEX3Atmp_179009->Sup.len;
	while (1) {
		if (!(i_179011 < l_179013)) goto LA5;
		son_179007 = HEX3Atmp_179009->data[i_179011];
		parsecodeblockfield_178626(d, son_179007, &result);
		i_179011 += 1;
	} LA5: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(void, buildlineshtmltable_179023)(codeblockparams172020 params, NimStringDesc* code, TY95944* Result) {
	NI codelines;
	NimStringDesc* LOC5;
	NI line;
	{
		if (!!(params.Numberlines)) goto LA3;
		unsureAsgnRef((void**) &(*Result).Field0, copyString(TMP467.Field0));
		unsureAsgnRef((void**) &(*Result).Field1, copyString(TMP467.Field1));
		goto BeforeRet;
	}
	LA3: ;
	LOC5 = 0;
	LOC5 = nsuStrip(code, NIM_FALSE, NIM_TRUE);
	codelines = nsuCountLines(LOC5);
	unsureAsgnRef((void**) &(*Result).Field0, copyString(((NimStringDesc*) &TMP470)));
	line = params.Startline;
	while (1) {
		NimStringDesc* LOC7;
		NimStringDesc* LOC8;
		if (!(0 < codelines)) goto LA6;
		LOC7 = 0;
		LOC8 = 0;
		LOC8 = nimIntToStr(line);
		LOC7 = rawNewString(LOC8->Sup.len + 1);
appendString(LOC7, LOC8);
appendString(LOC7, ((NimStringDesc*) &TMP363));
		(*Result).Field0 = resizeString((*Result).Field0, LOC7->Sup.len + 0);
appendString((*Result).Field0, LOC7);
		line += 1;
		codelines -= 1;
	} LA6: ;
	(*Result).Field0 = resizeString((*Result).Field0, 20);
appendString((*Result).Field0, ((NimStringDesc*) &TMP471));
	unsureAsgnRef((void**) &(*Result).Field1, copyString(((NimStringDesc*) &TMP472)));
	BeforeRet: ;
}

N_NIMCALL(void, rendercodeblock_179236)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	codeblockparams172020 params;
	trstnode147011* m;
	NimStringDesc* langstr;
	NimStringDesc* LOC5;
	NU8 lang;
	TY95944 LOC11;
	NimStringDesc* blockstart;
	NimStringDesc* blockend;
	TY190197 LOC12;
	TY190197 LOC29;
	{
		if (!((*n).Sons->data[2] == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	params = parsecodeblockparams_178642(d, (*n).Sons->data[1]);
	m = (*(*n).Sons->data[2]).Sons->data[0];
	LOC5 = 0;
	LOC5 = getargument_148080(n);
	langstr = nsuStrip(LOC5, NIM_TRUE, NIM_TRUE);
	lang = 0;
	{
		if (!((langstr) && (langstr)->Sup.len == 0)) goto LA8;
		lang = ((NU8) 0);
	}
	goto LA6;
	LA8: ;
	{
		lang = getsourcelanguage_156084(langstr);
	}
	LA6: ;
	memset((void*)&LOC11, 0, sizeof(LOC11));
	buildlineshtmltable_179023(params, (*m).Text, &LOC11);
	blockstart = LOC11.Field0;
	blockend = LOC11.Field1;
	memset((void*)LOC12, 0, sizeof(LOC12));
	dispa_172508((*d).Target, result, blockstart, ((NimStringDesc*) &TMP473), LOC12, 0);
	{
		if (!(lang == ((NU8) 0))) goto LA15;
		{
			if (!(0 < langstr->Sup.len)) goto LA19;
			(*d).Msghandler((*d).Filename, 1, 0, ((NU8) 8), langstr);
		}
		LA19: ;
		(*result) = resizeString((*result), (*m).Text->Sup.len + 0);
appendString((*result), (*m).Text);
	}
	goto LA13;
	LA15: ;
	{
		tgeneraltokenizer156015 g;
		memset((void*)&g, 0, sizeof(g));
		g.Sup.m_type = (&NTI156015);
		initgeneraltokenizer_156204(&g, (*m).Text);
		while (1) {
			getnexttoken_159114(&g, lang);
			switch (g.Kind) {
			case ((NU8) 0):
			{
				goto LA22;
			}
			break;
			case ((NU8) 1):
			case ((NU8) 2):
			{
				NimStringDesc* LOC25;
				LOC25 = 0;
				LOC25 = copyStrLast((*m).Text, g.Start, (NI64)((NI64)(g.Length + g.Start) - 1));
				(*result) = resizeString((*result), LOC25->Sup.len + 0);
appendString((*result), LOC25);
			}
			break;
			default:
			{
				TY179593 LOC27;
				NimStringDesc* LOC28;
				memset((void*)LOC27, 0, sizeof(LOC27));
				LOC28 = 0;
				LOC28 = copyStrLast((*m).Text, g.Start, (NI64)((NI64)(g.Length + g.Start) - 1));
				LOC27[0] = esc_172391((*d).Target, LOC28, -1);
				LOC27[1] = copyString(tokenclasstostr_156072[(g.Kind)- 0]);
				dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP633), ((NimStringDesc*) &TMP634), LOC27, 2);
			}
			break;
			}
		} LA22: ;
		deinitgeneraltokenizer_156215(&g);
	}
	LA13: ;
	memset((void*)LOC29, 0, sizeof(LOC29));
	dispa_172508((*d).Target, result, blockend, ((NimStringDesc*) &TMP668), LOC29, 0);
	BeforeRet: ;
}

N_NIMCALL(void, rendercontainer_179448)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	NimStringDesc* tmp;
	NimStringDesc* arg;
	NimStringDesc* LOC1;
	tmp = copyString(((NimStringDesc*) &TMP174));
	renderrsttoout_172543(d, (*n).Sons->data[2], &tmp);
	LOC1 = 0;
	LOC1 = getargument_148080(n);
	arg = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
	{
		TY93079 LOC6;
		if (!((arg) && (arg)->Sup.len == 0)) goto LA4;
		memset((void*)LOC6, 0, sizeof(LOC6));
		LOC6[0] = copyString(tmp);
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP669), ((NimStringDesc*) &TMP409), LOC6, 1);
	}
	goto LA2;
	LA4: ;
	{
		TY179593 LOC8;
		memset((void*)LOC8, 0, sizeof(LOC8));
		LOC8[0] = copyString(arg);
		LOC8[1] = copyString(tmp);
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP670), ((NimStringDesc*) &TMP671), LOC8, 2);
	}
	LA2: ;
}

N_NIMCALL(void, renderindexterm_172863)(trstgenerator172016* d, trstnode147011* n_172866, NimStringDesc** result) {
	NimStringDesc* refname;
	NimStringDesc* id;
	NimStringDesc* LOC8;
	NI LOC9;
	NimStringDesc* LOC10;
	NimStringDesc* term;
	TY179593 LOC11;
	refname = rstnodetorefname_148061(n_172866);
	{
		NIM_BOOL LOC3;
		NI LOC6;
		LOC3 = 0;
		LOC3 = haskey_172872((*d).Seenindexterms, refname);
		if (!LOC3) goto LA4;
		LOC6 = 0;
		LOC6 = HEX5BHEX5D_172931((*d).Seenindexterms, refname);
		HEX5BHEX5DHEX3D_172962(&(*d).Seenindexterms, refname, (NI64)(LOC6 + 1));
	}
	goto LA1;
	LA4: ;
	{
		HEX5BHEX5DHEX3D_172962(&(*d).Seenindexterms, refname, 1);
	}
	LA1: ;
	LOC8 = 0;
	LOC9 = 0;
	LOC9 = HEX5BHEX5D_172931((*d).Seenindexterms, refname);
	LOC10 = 0;
	LOC10 = nimIntToStr(LOC9);
	LOC8 = rawNewString(refname->Sup.len + LOC10->Sup.len + 1);
appendString(LOC8, refname);
appendChar(LOC8, 95);
appendString(LOC8, LOC10);
	id = LOC8;
	term = copyString(((NimStringDesc*) &TMP174));
	renderaux_172553(d, n_172866, &term);
	setindexterm_172661(d, id, term, (*d).Currentsection, ((NimStringDesc*) &TMP174));
	memset((void*)LOC11, 0, sizeof(LOC11));
	LOC11[0] = copyString(id);
	LOC11[1] = copyString(term);
	dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP683), ((NimStringDesc*) &TMP684), LOC11, 2);
}

N_NIMCALL(void, rendersmiley_178610)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	TY93079 LOC1;
	memset((void*)LOC1, 0, sizeof(LOC1));
	LOC1[0] = copyString((*n).Text);
	dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP687), ((NimStringDesc*) &TMP688), LOC1, 1);
}

N_NIMCALL(void, renderrsttoout_172543)(trstgenerator172016* d, trstnode147011* n, NimStringDesc** result) {
	{
		if (!(n == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	switch ((*n).Kind) {
	case ((NU8) 0):
	{
		renderaux_172553(d, n, result);
	}
	break;
	case ((NU8) 1):
	{
		renderheadline_178280(d, n, result);
	}
	break;
	case ((NU8) 2):
	{
		renderoverline_178417(d, n, result);
	}
	break;
	case ((NU8) 3):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP369), ((NimStringDesc*) &TMP370), result);
	}
	break;
	case ((NU8) 4):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP371), ((NimStringDesc*) &TMP372), result);
	}
	break;
	case ((NU8) 5):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP373), ((NimStringDesc*) &TMP374), result);
	}
	break;
	case ((NU8) 6):
	case ((NU8) 8):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP375), ((NimStringDesc*) &TMP376), result);
	}
	break;
	case ((NU8) 7):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP377), ((NimStringDesc*) &TMP378), result);
	}
	break;
	case ((NU8) 9):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP379), ((NimStringDesc*) &TMP380), result);
	}
	break;
	case ((NU8) 10):
	{
		renderaux_172553(d, n, result);
	}
	break;
	case ((NU8) 11):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP381), ((NimStringDesc*) &TMP382), result);
	}
	break;
	case ((NU8) 12):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP383), ((NimStringDesc*) &TMP384), result);
	}
	break;
	case ((NU8) 13):
	{
		NimStringDesc* tmp;
		NI i_179561;
		NI HEX3Atmp_179630;
		NI LOC18;
		NI res_179632;
		tmp = copyString(((NimStringDesc*) &TMP174));
		i_179561 = 0;
		HEX3Atmp_179630 = 0;
		LOC18 = 0;
		LOC18 = len_147084(n);
		HEX3Atmp_179630 = (NI64)(LOC18 - 1);
		res_179632 = 0;
		while (1) {
			if (!(res_179632 <= HEX3Atmp_179630)) goto LA19;
			i_179561 = res_179632;
			renderrsttoout_172543(d, (*n).Sons->data[i_179561], &tmp);
			res_179632 += 1;
		} LA19: ;
		{
			TY93079 LOC24;
			if (!!((tmp->Sup.len == 0))) goto LA22;
			memset((void*)LOC24, 0, sizeof(LOC24));
			LOC24[0] = copyString(tmp);
			dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP385), ((NimStringDesc*) &TMP380), LOC24, 1);
		}
		LA22: ;
	}
	break;
	case ((NU8) 14):
	{
		renderfield_179501(d, n, result);
	}
	break;
	case ((NU8) 15):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP410), ((NimStringDesc*) &TMP411), result);
	}
	break;
	case ((NU8) 16):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP412), ((NimStringDesc*) &TMP413), result);
	}
	break;
	case ((NU8) 51):
	{
		renderrsttoout_172543(d, (*n).Sons->data[2], result);
	}
	break;
	case ((NU8) 17):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP414), ((NimStringDesc*) &TMP415), result);
	}
	break;
	case ((NU8) 18):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP408), ((NimStringDesc*) &TMP409), result);
	}
	break;
	case ((NU8) 19):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP416), ((NimStringDesc*) &TMP417), result);
	}
	break;
	case ((NU8) 23):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP418), ((NimStringDesc*) &TMP413), result);
	}
	break;
	case ((NU8) 20):
	case ((NU8) 21):
	case ((NU8) 22):
	{
		{
			if (!NIM_TRUE) goto LA36;
			raiseassert_82952(((NimStringDesc*) &TMP420));
		}
		LA36: ;
	}
	break;
	case ((NU8) 24):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP421), ((NimStringDesc*) &TMP422), result);
	}
	break;
	case ((NU8) 25):
	{
		{
			if (!NIM_TRUE) goto LA42;
			raiseassert_82952(((NimStringDesc*) &TMP420));
		}
		LA42: ;
	}
	break;
	case ((NU8) 26):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP423), ((NimStringDesc*) &TMP372), result);
	}
	break;
	case ((NU8) 27):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP424), ((NimStringDesc*) &TMP425), result);
	}
	break;
	case ((NU8) 28):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP426), ((NimStringDesc*) &TMP427), result);
	}
	break;
	case ((NU8) 29):
	case ((NU8) 30):
	{
		NimStringDesc* LOC48;
		NimStringDesc* LOC49;
		LOC48 = 0;
		LOC49 = 0;
		LOC49 = texcolumns_179471(n);
		LOC48 = rawNewString(LOC49->Sup.len + 63);
appendString(LOC48, ((NimStringDesc*) &TMP429));
appendString(LOC48, LOC49);
appendString(LOC48, ((NimStringDesc*) &TMP431));
		renderaux_172585(d, n, ((NimStringDesc*) &TMP428), LOC48, result);
	}
	break;
	case ((NU8) 31):
	{
		{
			NI LOC53;
			LOC53 = 0;
			LOC53 = len_147084(n);
			if (!(1 <= LOC53)) goto LA54;
			{
				NI i_179588;
				NI HEX3Atmp_179634;
				NI LOC60;
				NI res_179636;
				if (!((*d).Target == ((NU8) 1))) goto LA58;
				renderrsttoout_172543(d, (*n).Sons->data[0], result);
				i_179588 = 0;
				HEX3Atmp_179634 = 0;
				LOC60 = 0;
				LOC60 = len_147084(n);
				HEX3Atmp_179634 = (NI64)(LOC60 - 1);
				res_179636 = 1;
				while (1) {
					if (!(res_179636 <= HEX3Atmp_179634)) goto LA61;
					i_179588 = res_179636;
					(*result) = resizeString((*result), 3);
appendString((*result), ((NimStringDesc*) &TMP432));
					renderrsttoout_172543(d, (*n).Sons->data[i_179588], result);
					res_179636 += 1;
				} LA61: ;
				(*result) = resizeString((*result), 10);
appendString((*result), ((NimStringDesc*) &TMP433));
			}
			goto LA56;
			LA58: ;
			{
				(*result) = resizeString((*result), 4);
appendString((*result), ((NimStringDesc*) &TMP434));
				renderaux_172553(d, n, result);
				(*result) = resizeString((*result), 6);
appendString((*result), ((NimStringDesc*) &TMP435));
			}
			LA56: ;
		}
		LA54: ;
	}
	break;
	case ((NU8) 33):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP412), ((NimStringDesc*) &TMP409), result);
	}
	break;
	case ((NU8) 32):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP436), ((NimStringDesc*) &TMP437), result);
	}
	break;
	case ((NU8) 34):
	{
		{
			if (!NIM_TRUE) goto LA68;
			raiseassert_82952(((NimStringDesc*) &TMP420));
		}
		LA68: ;
	}
	break;
	case ((NU8) 35):
	{
		{
			if (!NIM_TRUE) goto LA73;
			raiseassert_82952(((NimStringDesc*) &TMP420));
		}
		LA73: ;
	}
	break;
	case ((NU8) 36):
	{
		{
			if (!NIM_TRUE) goto LA78;
			raiseassert_82952(((NimStringDesc*) &TMP420));
		}
		LA78: ;
	}
	break;
	case ((NU8) 39):
	{
		NimStringDesc* tmp;
		TY179593 LOC81;
		tmp = copyString(((NimStringDesc*) &TMP174));
		renderaux_172553(d, n, &tmp);
		memset((void*)LOC81, 0, sizeof(LOC81));
		LOC81[0] = copyString(tmp);
		LOC81[1] = rstnodetorefname_148061(n);
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP438), ((NimStringDesc*) &TMP439), LOC81, 2);
	}
	break;
	case ((NU8) 37):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP440), ((NimStringDesc*) &TMP441), result);
	}
	break;
	case ((NU8) 38):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY179593 LOC84;
		tmp0 = copyString(((NimStringDesc*) &TMP174));
		tmp1 = copyString(((NimStringDesc*) &TMP174));
		renderrsttoout_172543(d, (*n).Sons->data[0], &tmp0);
		renderrsttoout_172543(d, (*n).Sons->data[1], &tmp1);
		memset((void*)LOC84, 0, sizeof(LOC84));
		LOC84[0] = copyString(tmp0);
		LOC84[1] = copyString(tmp1);
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP442), ((NimStringDesc*) &TMP443), LOC84, 2);
	}
	break;
	case ((NU8) 41):
	case ((NU8) 42):
	{
		renderaux_172553(d, n, result);
	}
	break;
	case ((NU8) 48):
	{
		{
			trstnode147011* LOC91;
			NimStringDesc* LOC92;
			if (!!(((*d).Target == ((NU8) 1)))) goto LA89;
			LOC91 = 0;
			LOC91 = lastson_147162(n);
			LOC92 = 0;
			LOC92 = addnodes_148067(LOC91);
			(*result) = resizeString((*result), LOC92->Sup.len + 0);
appendString((*result), LOC92);
		}
		LA89: ;
	}
	break;
	case ((NU8) 49):
	{
		{
			trstnode147011* LOC98;
			NimStringDesc* LOC99;
			if (!((*d).Target == ((NU8) 1))) goto LA96;
			LOC98 = 0;
			LOC98 = lastson_147162(n);
			LOC99 = 0;
			LOC99 = addnodes_148067(LOC98);
			(*result) = resizeString((*result), LOC99->Sup.len + 0);
appendString((*result), LOC99);
		}
		LA96: ;
	}
	break;
	case ((NU8) 45):
	case ((NU8) 46):
	{
		renderimage_178562(d, n, result);
	}
	break;
	case ((NU8) 47):
	{
		rendercodeblock_179236(d, n, result);
	}
	break;
	case ((NU8) 50):
	{
		rendercontainer_179448(d, n, result);
	}
	break;
	case ((NU8) 62):
	case ((NU8) 52):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP672), ((NimStringDesc*) &TMP672), result);
	}
	break;
	case ((NU8) 40):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP174), ((NimStringDesc*) &TMP174), result);
	}
	break;
	case ((NU8) 53):
	{
		NimStringDesc* tmp0;
		NimStringDesc* tmp1;
		TY179593 LOC106;
		tmp0 = copyString(((NimStringDesc*) &TMP174));
		tmp1 = copyString(((NimStringDesc*) &TMP174));
		renderrsttoout_172543(d, (*n).Sons->data[0], &tmp0);
		renderrsttoout_172543(d, (*n).Sons->data[1], &tmp1);
		memset((void*)LOC106, 0, sizeof(LOC106));
		LOC106[0] = copyString(tmp0);
		LOC106[1] = copyString(tmp1);
		dispa_172508((*d).Target, result, ((NimStringDesc*) &TMP633), ((NimStringDesc*) &TMP634), LOC106, 2);
	}
	break;
	case ((NU8) 54):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP673), ((NimStringDesc*) &TMP674), result);
	}
	break;
	case ((NU8) 55):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP675), ((NimStringDesc*) &TMP676), result);
	}
	break;
	case ((NU8) 57):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP677), ((NimStringDesc*) &TMP678), result);
	}
	break;
	case ((NU8) 58):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP679), ((NimStringDesc*) &TMP437), result);
	}
	break;
	case ((NU8) 59):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP680), ((NimStringDesc*) &TMP681), result);
	}
	break;
	case ((NU8) 60):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP682), ((NimStringDesc*) &TMP678), result);
	}
	break;
	case ((NU8) 56):
	{
		renderindexterm_172863(d, n, result);
	}
	break;
	case ((NU8) 61):
	{
		renderaux_172585(d, n, ((NimStringDesc*) &TMP685), ((NimStringDesc*) &TMP686), result);
	}
	break;
	case ((NU8) 63):
	{
		rendersmiley_178610(d, n, result);
	}
	break;
	case ((NU8) 64):
	{
		NimStringDesc* LOC117;
		LOC117 = 0;
		LOC117 = esc_172391((*d).Target, (*n).Text, -1);
		(*result) = resizeString((*result), LOC117->Sup.len + 0);
appendString((*result), LOC117);
	}
	break;
	case ((NU8) 44):
	{
		(*d).Hastoc = NIM_TRUE;
	}
	break;
	case ((NU8) 43):
	{
		unsureAsgnRef((void**) &(*d).Meta[(((NU8) 1))- 0], copyString(((NimStringDesc*) &TMP174)));
		renderrsttoout_172543(d, (*n).Sons->data[0], &(*d).Meta[(((NU8) 1))- 0]);
	}
	break;
	}
	BeforeRet: ;
}
N_NOINLINE(void, HEX00_rstgenInit)(void) {
	NimStringDesc* LOC1;
	LOC1 = 0;
	LOC1 = splitter_172320; splitter_172320 = copyStringRC1(((NimStringDesc*) &TMP45));
	if (LOC1) nimGCunrefNoCycle(LOC1);
}

N_NOINLINE(void, HEX00_rstgenDatInit)(void) {
static TNimNode* TMP116[13];
static TNimNode* TMP117[2];
NI TMP119;
static char* NIM_CONST TMP118[2] = {
"outHtml", 
"outLatex"};
static TNimNode* TMP127[3];
static TNimNode TMP7[21];
NTI172016.size = sizeof(trstgenerator172016);
NTI172016.kind = 17;
NTI172016.base = (&NTI2811);
TMP116[0] = &TMP7[1];
NTI172010.size = sizeof(NU8);
NTI172010.kind = 14;
NTI172010.base = 0;
NTI172010.flags = 3;
for (TMP119 = 0; TMP119 < 2; TMP119++) {
TMP7[TMP119+2].kind = 1;
TMP7[TMP119+2].offset = TMP119;
TMP7[TMP119+2].name = TMP118[TMP119];
TMP117[TMP119] = &TMP7[TMP119+2];
}
TMP7[4].len = 2; TMP7[4].kind = 2; TMP7[4].sons = &TMP117[0];
NTI172010.node = &TMP7[4];
TMP7[1].kind = 1;
TMP7[1].offset = offsetof(trstgenerator172016, Target);
TMP7[1].typ = (&NTI172010);
TMP7[1].name = "target";
TMP116[1] = &TMP7[5];
TMP7[5].kind = 1;
TMP7[5].offset = offsetof(trstgenerator172016, Config);
TMP7[5].typ = (&NTI122814);
TMP7[5].name = "config";
TMP116[2] = &TMP7[6];
TMP7[6].kind = 1;
TMP7[6].offset = offsetof(trstgenerator172016, Splitafter);
TMP7[6].typ = (&NTI112);
TMP7[6].name = "splitAfter";
TMP116[3] = &TMP7[7];
NTI172012.size = sizeof(ttocentry172012);
NTI172012.kind = 18;
NTI172012.base = 0;
NTI172012.flags = 2;
TMP127[0] = &TMP7[9];
TMP7[9].kind = 1;
TMP7[9].offset = offsetof(ttocentry172012, N);
TMP7[9].typ = (&NTI147007);
TMP7[9].name = "n";
TMP127[1] = &TMP7[10];
TMP7[10].kind = 1;
TMP7[10].offset = offsetof(ttocentry172012, Refname);
TMP7[10].typ = (&NTI157);
TMP7[10].name = "refname";
TMP127[2] = &TMP7[11];
TMP7[11].kind = 1;
TMP7[11].offset = offsetof(ttocentry172012, Header);
TMP7[11].typ = (&NTI157);
TMP7[11].name = "header";
TMP7[8].len = 3; TMP7[8].kind = 2; TMP7[8].sons = &TMP127[0];
NTI172012.node = &TMP7[8];
NTI172034.size = sizeof(TY172034*);
NTI172034.kind = 24;
NTI172034.base = (&NTI172012);
NTI172034.flags = 2;
NTI172034.marker = TMP134;
TMP7[7].kind = 1;
TMP7[7].offset = offsetof(trstgenerator172016, Tocpart);
TMP7[7].typ = (&NTI172034);
TMP7[7].name = "tocPart";
TMP116[4] = &TMP7[12];
TMP7[12].kind = 1;
TMP7[12].offset = offsetof(trstgenerator172016, Hastoc);
TMP7[12].typ = (&NTI146);
TMP7[12].name = "hasToc";
TMP116[5] = &TMP7[13];
TMP7[13].kind = 1;
TMP7[13].offset = offsetof(trstgenerator172016, Theindex);
TMP7[13].typ = (&NTI157);
TMP7[13].name = "theIndex";
TMP116[6] = &TMP7[14];
TMP7[14].kind = 1;
TMP7[14].offset = offsetof(trstgenerator172016, Options);
TMP7[14].typ = (&NTI190349);
TMP7[14].name = "options";
TMP116[7] = &TMP7[15];
TMP7[15].kind = 1;
TMP7[15].offset = offsetof(trstgenerator172016, Findfile);
TMP7[15].typ = (&NTI148023);
TMP7[15].name = "findFile";
TMP116[8] = &TMP7[16];
TMP7[16].kind = 1;
TMP7[16].offset = offsetof(trstgenerator172016, Msghandler);
TMP7[16].typ = (&NTI148021);
TMP7[16].name = "msgHandler";
TMP116[9] = &TMP7[17];
TMP7[17].kind = 1;
TMP7[17].offset = offsetof(trstgenerator172016, Filename);
TMP7[17].typ = (&NTI157);
TMP7[17].name = "filename";
TMP116[10] = &TMP7[18];
NTI172042.size = sizeof(TY172042);
NTI172042.kind = 16;
NTI172042.base = (&NTI157);
NTI172042.flags = 2;
TMP7[18].kind = 1;
TMP7[18].offset = offsetof(trstgenerator172016, Meta);
TMP7[18].typ = (&NTI172042);
TMP7[18].name = "meta";
TMP116[11] = &TMP7[19];
TMP7[19].kind = 1;
TMP7[19].offset = offsetof(trstgenerator172016, Currentsection);
TMP7[19].typ = (&NTI157);
TMP7[19].name = "currentSection";
TMP116[12] = &TMP7[20];
TMP7[20].kind = 1;
TMP7[20].offset = offsetof(trstgenerator172016, Seenindexterms);
TMP7[20].typ = (&NTI172052);
TMP7[20].name = "seenIndexTerms";
TMP7[0].len = 13; TMP7[0].kind = 2; TMP7[0].sons = &TMP116[0];
NTI172016.node = &TMP7[0];
}

