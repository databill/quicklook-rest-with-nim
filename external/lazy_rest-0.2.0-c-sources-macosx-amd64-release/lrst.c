/* Generated by Nimrod Compiler v0.9.6 */
/*   (c) 2014 Andreas Rumpf */
/* The generated code is subject to the original license. */
#define NIM_INTBITS 64
#include "nimbase.h"

#include <string.h>

#include <setjmp.h>
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct E_Base E_Base;
typedef struct TNimObject TNimObject;
typedef struct TSafePoint TSafePoint;
typedef struct tcell44135 tcell44135;
typedef struct tcellset44147 tcellset44147;
typedef struct tgcheap46216 tgcheap46216;
typedef struct tcellseq44151 tcellseq44151;
typedef struct tpagedesc44143 tpagedesc44143;
typedef struct tmemregion26410 tmemregion26410;
typedef struct tsmallchunk25640 tsmallchunk25640;
typedef struct tllchunk26404 tllchunk26404;
typedef struct tbigchunk25642 tbigchunk25642;
typedef struct tintset25617 tintset25617;
typedef struct ttrunk25613 ttrunk25613;
typedef struct tavlnode26408 tavlnode26408;
typedef struct tgcstat46214 tgcstat46214;
typedef struct trstnode152011 trstnode152011;
typedef struct tlayeredconf158038 tlayeredconf158038;
typedef struct tstringtable127812 tstringtable127812;
typedef struct trstparser159653 trstparser159653;
typedef struct ttokenseq159126 ttokenseq159126;
typedef struct ttoken159124 ttoken159124;
typedef struct tsharedstate159649 tsharedstate159649;
typedef struct TY159678 TY159678;
typedef struct TY159680 TY159680;
typedef struct fileinfo159643 fileinfo159643;
typedef struct TY159667 TY159667;
typedef struct tsubstitution159641 tsubstitution159641;
typedef struct TY168206 TY168206;
typedef struct tlexer159128 tlexer159128;
typedef struct trstnodeseq152009 trstnodeseq152009;
typedef struct eparseerror159009 eparseerror159009;
typedef struct einvalidvalue2855 einvalidvalue2855;
typedef struct esynch2833 esynch2833;
typedef struct tkeyvaluepair127808 tkeyvaluepair127808;
typedef struct TY117411 TY117411;
typedef struct tbasechunk25638 tbasechunk25638;
typedef struct tfreecell25630 tfreecell25630;
typedef struct tkeyvaluepairseq127810 tkeyvaluepairseq127810;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef N_NIMCALL_PTR(void, TY2689) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY2694) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY2689 marker;
TY2694 deepcopy;
};
struct  TNimObject  {
TNimType* m_type;
};
struct  E_Base  {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
NimStringDesc* trace;
};
typedef struct {
N_NIMCALL_PTR(NIM_BOOL, ClPrc) (E_Base* e, void* ClEnv);
void* ClEnv;
} TY14009;
struct  TSafePoint  {
TSafePoint* prev;
NI status;
jmp_buf context;
NIM_BOOL hasRaiseAction;
TY14009 raiseAction;
};
typedef NimStringDesc* TY159041[11];
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  tcell44135  {
NI Refcount;
TNimType* Typ;
};
struct  tcellseq44151  {
NI Len;
NI Cap;
tcell44135** D;
};
struct  tcellset44147  {
NI Counter;
NI Max;
tpagedesc44143* Head;
tpagedesc44143** Data;
};
typedef tsmallchunk25640* TY26422[512];
typedef ttrunk25613* ttrunkbuckets25615[256];
struct  tintset25617  {
ttrunkbuckets25615 Data;
};
struct  tmemregion26410  {
NI Minlargeobj;
NI Maxlargeobj;
TY26422 Freesmallchunks;
tllchunk26404* Llmem;
NI Currmem;
NI Maxmem;
NI Freemem;
NI Lastsize;
tbigchunk25642* Freechunkslist;
tintset25617 Chunkstarts;
tavlnode26408* Root;
tavlnode26408* Deleted;
tavlnode26408* Last;
tavlnode26408* Freeavlnodes;
};
struct  tgcstat46214  {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
NI64 Maxpause;
};
struct  tgcheap46216  {
void* Stackbottom;
NI Cyclethreshold;
tcellseq44151 Zct;
tcellseq44151 Decstack;
tcellset44147 Cycleroots;
tcellseq44151 Tempstack;
NI Recgclock;
tmemregion26410 Region;
tgcstat46214 Stat;
};
typedef N_NIMCALL_PTR(NimStringDesc*, lr_nim_find_file_handler) (NimStringDesc* currentfilename, NimStringDesc* targetfilename);
typedef N_NIMCALL_PTR(NimStringDesc*, lr_nim_msg_handler) (NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
struct  tlayeredconf158038  {
  TNimObject Sup;
tstringtable127812* User;
tstringtable127812* Default;
};
struct  ttoken159124  {
NU8 Kind;
NI Ival;
NimStringDesc* Symbol;
NI Line;
NI Col;
};
struct  fileinfo159643  {
NimStringDesc* Realpath;
NimStringDesc* Input;
};
struct  trstparser159653  {
  TNimObject Sup;
NI Idx;
ttokenseq159126* Tok;
tsharedstate159649* S;
TY159678* Indentstack;
TY159680* Filenamestack;
NI Line;
NI Col;
NIM_BOOL Hastoc;
};
struct  tsubstitution159641  {
NimStringDesc* Key;
trstnode152011* Value;
};
typedef NI tlevelmap159639[256];
struct  tsharedstate159649  {
NU8 Options;
NI Ulevel;
NI Olevel;
TY159667* Subs;
TY159667* Refs;
tlevelmap159639 Underlinetolevel;
tlevelmap159639 Overlinetolevel;
lr_nim_msg_handler Msghandler;
lr_nim_find_file_handler Findfile;
};
struct TY168206 {
NimStringDesc* Field0;
NU8 Field1;
};
typedef TY168206 TY168253[4];
struct  tlexer159128  {
  TNimObject Sup;
NCSTRING Buf;
NI Bufpos;
NI Line;
NI Col;
NI Baseindent;
NIM_BOOL Skippounds;
};
typedef NU8 tcharset90806[32];
struct  trstnode152011  {
NU8 Kind;
NimStringDesc* Text;
NI Level;
trstnodeseq152009* Sons;
};
struct  esynch2833  {
  E_Base Sup;
};
struct  einvalidvalue2855  {
  esynch2833 Sup;
};
struct  eparseerror159009  {
  einvalidvalue2855 Sup;
};
typedef NimStringDesc* TY162984[13];
typedef N_NIMCALL_PTR(trstnode152011*, tsectionparser166412) (trstparser159653* p);
struct tkeyvaluepair127808 {
NimStringDesc* Field0;
NimStringDesc* Field1;
};
typedef tkeyvaluepair127808 TY159082[34];
typedef NimStringDesc* TY162083[5];
typedef NimStringDesc* TY165930[3];
typedef NI TY165935[3];
typedef NI TY25620[8];
struct  tpagedesc44143  {
tpagedesc44143* Next;
NI Key;
TY25620 Bits;
};
struct  tbasechunk25638  {
NI Prevsize;
NI Size;
NIM_BOOL Used;
};
struct  tsmallchunk25640  {
  tbasechunk25638 Sup;
tsmallchunk25640* Next;
tsmallchunk25640* Prev;
tfreecell25630* Freelist;
NI Free;
NI Acc;
NF Data;
};
struct  tllchunk26404  {
NI Size;
NI Acc;
tllchunk26404* Next;
};
struct  tbigchunk25642  {
  tbasechunk25638 Sup;
tbigchunk25642* Next;
tbigchunk25642* Prev;
NI Align;
NF Data;
};
struct  ttrunk25613  {
ttrunk25613* Next;
NI Key;
TY25620 Bits;
};
typedef tavlnode26408* TY26414[2];
struct  tavlnode26408  {
TY26414 Link;
NI Key;
NI Upperbound;
NI Level;
};
struct  tstringtable127812  {
  TNimObject Sup;
NI Counter;
tkeyvaluepairseq127810* Data;
NU8 Mode;
};
struct  tfreecell25630  {
tfreecell25630* Next;
NI Zerofield;
};
struct ttokenseq159126 {
  TGenericSeq Sup;
  ttoken159124 data[SEQ_DECL_SIZE];
};
struct TY159678 {
  TGenericSeq Sup;
  NI data[SEQ_DECL_SIZE];
};
struct TY159680 {
  TGenericSeq Sup;
  fileinfo159643 data[SEQ_DECL_SIZE];
};
struct TY159667 {
  TGenericSeq Sup;
  tsubstitution159641 data[SEQ_DECL_SIZE];
};
struct trstnodeseq152009 {
  TGenericSeq Sup;
  trstnode152011* data[SEQ_DECL_SIZE];
};
struct TY117411 {
  TGenericSeq Sup;
  NimStringDesc* data[SEQ_DECL_SIZE];
};
struct tkeyvaluepairseq127810 {
  TGenericSeq Sup;
  tkeyvaluepair127808 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NimStringDesc*, lr_nil_msg_handler)(NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg);
N_NIMCALL(NU8, whichmsgclass_160007)(NU8 k);
N_NIMCALL(NimStringDesc*, reprEnum)(NI e_80307, TNimType* typ);
static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src);
N_NIMCALL(NimStringDesc*, nimIntToStr)(NI x);
N_NIMCALL(NimStringDesc*, rawNewString)(NI space);
static N_INLINE(void, pushSafePoint)(TSafePoint* s);
N_NIMCALL(NimStringDesc*, nsuFormatSingleElem)(NimStringDesc* formatstr, NimStringDesc* a);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* dest, NI addlen);
static N_INLINE(void, popSafePoint)(void);
N_NIMCALL(NIM_BOOL, isObj)(TNimType* obj, TNimType* subclass);
static N_INLINE(E_Base*, getCurrentException)(void);
static N_INLINE(void, popCurrentException)(void);
static N_INLINE(void, asgnRef)(void** dest, void* src);
static N_INLINE(void, incref_50225)(tcell44135* c);
static N_INLINE(NIM_BOOL, canbecycleroot_47867)(tcell44135* c);
static N_INLINE(void, rtladdcycleroot_48629)(tcell44135* c);
N_NOINLINE(void, incl_44871)(tcellset44147* s, tcell44135* cell);
static N_INLINE(tcell44135*, usrtocell_47846)(void* usr);
static N_INLINE(void, decref_49804)(tcell44135* c);
static N_INLINE(void, rtladdzct_49404)(tcell44135* c);
N_NOINLINE(void, addzct_47817)(tcellseq44151* s, tcell44135* c);
N_NIMCALL(void, reraiseException)(void);
N_NIMCALL(NimStringDesc*, lr_nil_find_file_handler)(NimStringDesc* currentfilename, NimStringDesc* targetfilename);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* src);
N_NIMCALL(void, nimGCvisit)(void* d, NI op);
N_NIMCALL(void, TMP182)(void* p, NI op);
N_NIMCALL(void, TMP188)(void* p, NI op);
N_NIMCALL(void, TMP189)(void* p, NI op);
N_NIMCALL(void, TMP190)(void* p, NI op);
N_NIMCALL(void, TMP192)(void* p, NI op);
N_NIMCALL(NIM_BOOL, istrue_158218)(tlayeredconf158038* t, NimStringDesc* key);
N_NIMCALL(void, initparser_160689)(trstparser159653* p, tsharedstate159649* sharedstate);
N_NIMCALL(void, genericSeqAssign)(void* dest, void* src_79004, TNimType* mt);
N_NIMCALL(void*, newSeq)(TNimType* typ, NI len);
N_NIMCALL(void, unsureAsgnRef)(void** dest, void* src);
N_NIMCALL(tsharedstate159649*, newsharedstate_160250)(NU8 options, lr_nim_find_file_handler findfile, lr_nim_msg_handler msghandler);
N_NIMCALL(void*, newObj)(TNimType* typ, NI size);
static N_INLINE(void, nimGCunrefNoCycle)(void* p);
N_NIMCALL(void*, newSeqRC1)(TNimType* typ, NI len);
N_NIMCALL(void, newfileinfo_159688)(NimStringDesc* inputpath, fileinfo159643* Result);
N_NIMCALL(TGenericSeq*, incrSeq)(TGenericSeq* seq, NI elemsize);
N_NIMCALL(NimStringDesc*, copyStringRC1)(NimStringDesc* src);
N_NIMCALL(NI, gettokens_159453)(NimStringDesc* buffer, NIM_BOOL skippounds, ttokenseq159126** tokens);
N_NIMCALL(TGenericSeq*, setLengthSeq)(TGenericSeq* seq, NI elemsize, NI newlen);
N_NIMCALL(void, rawgettok_159398)(tlexer159128* l, ttoken159124* tok);
N_NIMCALL(void, getthing_159150)(tlexer159128* l, ttoken159124* tok, tcharset90806 s);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* s, NIM_CHAR c);
N_NIMCALL(void, getindent_159371)(tlexer159128* l, ttoken159124* tok);
N_NIMCALL(NI, getindentaux_159253)(tlexer159128* l, NI start);
N_NIMCALL(NimStringDesc*, nsuRepeatChar)(NI count, NIM_CHAR c);
N_NIMCALL(void, getadornment_159208)(tlexer159128* l, ttoken159124* tok);
N_NIMCALL(trstnode152011*, resolvesubs_167889)(trstparser159653* p, trstnode152011* n);
N_NIMCALL(NI, findsub_160937)(trstparser159653* p, trstnode152011* n);
N_NIMCALL(NimStringDesc*, addnodes_159055)(trstnode152011* n);
N_NIMCALL(void, addnodesaux_160758)(trstnode152011* n, NimStringDesc** result);
N_NIMCALL(NI, len_152084)(trstnode152011* n);
static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* a, NimStringDesc* b);
N_NIMCALL(NimStringDesc*, getenv_118041)(NimStringDesc* key);
N_NIMCALL(trstnode152011*, newrstnode_152151)(NU8 kind, NimStringDesc* s);
N_NIMCALL(void, rstmessage_160332)(trstparser159653* p, NU8 msgkind, NimStringDesc* arg);
N_NIMCALL(void, TMP210)(void* p, NI op);
N_NIMCALL(void, raiseException)(E_Base* e, NCSTRING ename);
N_NIMCALL(trstnode152011*, findref_161142)(trstparser159653* p, NimStringDesc* key);
N_NIMCALL(NimStringDesc*, rstnodetorefname_159049)(trstnode152011* n);
N_NIMCALL(void, rstnodetorefnameaux_160817)(trstnode152011* n, NimStringDesc** r, NIM_BOOL* b);
N_NIMCALL(trstnode152011*, newrstnode_152105)(NU8 kind);
N_NIMCALL(void, add_152183)(trstnode152011* father, trstnode152011* son);
static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src);
N_NIMCALL(trstnode152011*, parsedoc_165078)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsesectionwrapper_166325)(trstparser159653* p);
N_NIMCALL(void, parsesection_163119)(trstparser159653* p, trstnode152011* result);
N_NIMCALL(NI, currind_160601)(trstparser159653* p);
N_NIMCALL(void, pushind_160611)(trstparser159653* p, NI ind);
N_NIMCALL(void, popind_160640)(trstparser159653* p);
N_NIMCALL(NU8, whichsection_164341)(trstparser159653* p);
N_NIMCALL(NIM_BOOL, match_161415)(trstparser159653* p, NI start, NimStringDesc* expr);
N_NIMCALL(NIM_BOOL, allcharsinset_93279)(NimStringDesc* s, tcharset90806 theset);
N_NIMCALL(NI, tokenafternewline_164232)(trstparser159653* p);
N_NIMCALL(NIM_BOOL, prednl_164285)(trstparser159653* p);
N_NIMCALL(NIM_BOOL, islineblock_164273)(trstparser159653* p);
N_NIMCALL(void, rstmessage_160400)(trstparser159653* p, NU8 msgkind);
N_NIMCALL(NIM_BOOL, isdeflist_164305)(trstparser159653* p);
N_NIMCALL(NIM_BOOL, isoptionlist_164331)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parseliteralblock_164107)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsebulletlist_165634)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parselineblock_164360)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsedotdot_164100)(trstparser159653* p);
N_NIMCALL(NimStringDesc*, getdirective_162729)(trstparser159653* p);
N_NIMCALL(NU8, getdirkind_162991)(NimStringDesc* s);
static N_INLINE(NI, find_162996)(TY162984 a_163001, NimStringDesc* item_163003);
N_NIMCALL(trstnode152011*, dirinclude_166621)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsedirective_166588)(trstparser159653* p, NU8 flags, tsectionparser166412 contentparser);
N_NIMCALL(trstnode152011*, parsedirective_166423)(trstparser159653* p, NU8 flags);
N_NIMCALL(trstnode152011*, newleaf_161182)(trstparser159653* p);
N_NIMCALL(void, parseline_163083)(trstparser159653* p, trstnode152011* father);
N_NIMCALL(void, parseinline_162582)(trstparser159653* p, trstnode152011* father);
N_NIMCALL(NIM_BOOL, isinlinemarkupstart_161358)(trstparser159653* p, NimStringDesc* markup);
N_NIMCALL(void, parseuntil_162401)(trstparser159653* p, trstnode152011* father, NimStringDesc* postfix, NIM_BOOL interpretbackslash);
N_NIMCALL(NIM_BOOL, isinlinemarkupend_161304)(trstparser159653* p, NimStringDesc* markup);
N_NIMCALL(void, parsebackslash_162149)(trstparser159653* p, trstnode152011* father);
N_NIMCALL(void, rstmessage_160365)(trstparser159653* p, NU8 msgkind, NimStringDesc* arg, NI line, NI col);
N_NIMCALL(trstnode152011*, parsemarkdowncodeblock_162504)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsepostfix_161695)(trstparser159653* p, trstnode152011* n);
N_NIMCALL(void, fixupembeddedref_161598)(trstnode152011* n, trstnode152011* a, trstnode152011* b);
N_NIMCALL(void, setref_161074)(trstparser159653* p, NimStringDesc* key, trstnode152011* value);
N_NIMCALL(trstnode152011*, parsesmiley_161800)(trstparser159653* p);
N_NIMCALL(NI, matchverbatim_161742)(trstparser159653* p, NI start, NimStringDesc* expr);
N_NIMCALL(NIM_BOOL, nsuContinuesWith)(NimStringDesc* s, NimStringDesc* substr, NI start);
N_NIMCALL(void, parseurl_162091)(trstparser159653* p, trstnode152011* father);
N_NIMCALL(NIM_BOOL, isurl_162001)(trstparser159653* p, NI i);
static N_INLINE(NIM_BOOL, contains_162019)(NimStringDesc** a_162025, NI a_162025Len0, NimStringDesc* item_162028);
static N_INLINE(NI, find_162031)(NimStringDesc** a_162036, NI a_162036Len0, NimStringDesc* item_162038);
N_NIMCALL(trstnode152011*, parsefields_163161)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsefield_163127)(trstparser159653* p);
N_NIMCALL(NIM_BOOL, indfollows_166568)(trstparser159653* p);
N_NIMCALL(NimStringDesc*, nsuStrip)(NimStringDesc* s, NIM_BOOL leading, NIM_BOOL trailing);
N_NIMCALL(NimStringDesc*, full_159807)(fileinfo159643* f);
N_NIMCALL(NimStringDesc*, nosexpandFilename)(NimStringDesc* filename);
static N_INLINE(NimStringDesc*, getcurrentexceptionmsg_82440)(void);
N_NOINLINE(void, chckNil)(void* p);
N_NIMCALL(NimStringDesc*, getfieldvalue_159061)(trstnode152011* n, NimStringDesc* fieldname);
N_NIMCALL(NimStringDesc*, readfile_12242)(NimStringDesc* filename);
N_NIMCALL(trstnode152011*, dirimage_167607)(trstparser159653* p);
N_NIMCALL(trstnode152011*, dirfigure_167619)(trstparser159653* p);
N_NIMCALL(trstnode152011*, dirtitle_167631)(trstparser159653* p);
N_NIMCALL(trstnode152011*, dircontainer_167209)(trstparser159653* p);
N_NIMCALL(trstnode152011*, dircontents_167643)(trstparser159653* p);
N_NIMCALL(trstnode152011*, dirraw_167689)(trstparser159653* p);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* a, NimStringDesc* b);
N_NIMCALL(void, dirrawaux_167668)(trstparser159653* p, trstnode152011** result, NU8 kind, tsectionparser166412 contentparser);
N_NIMCALL(trstnode152011*, parsedirbody_166609)(trstparser159653* p, tsectionparser166412 contentparser);
N_NIMCALL(trstnode152011*, dircodeblock_167061)(trstparser159653* p, NIM_BOOL nimrodextension);
N_NIMCALL(trstnode152011*, dirindex_167655)(trstparser159653* p);
N_NIMCALL(trstnode152011*, getreferencename_161193)(trstparser159653* p, NimStringDesc* endstr);
N_NIMCALL(trstnode152011*, untileol_161237)(trstparser159653* p);
N_NIMCALL(void, expect_161281)(trstparser159653* p, NimStringDesc* tok);
N_NIMCALL(void, setsub_161006)(trstparser159653* p, NimStringDesc* key, trstnode152011* value);
N_NIMCALL(trstnode152011*, parsecomment_162870)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parseenumlist_165924)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsedefinitionlist_165827)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsetransition_165472)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parseheadline_164504)(trstparser159653* p);
N_NIMCALL(void, parseuntilnewline_163101)(trstparser159653* p, trstnode152011* father);
N_NIMCALL(NI, getlevel_164206)(NI* map, NI* lvl, NIM_CHAR c);
N_NIMCALL(trstnode152011*, parseoverline_165537)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parsesimpletable_165085)(trstparser159653* p);
N_NIMCALL(void, getcolumns_164837)(trstparser159653* p, TY159678** cols);
N_NIMCALL(NI, tokend_164827)(trstparser159653* p);
N_NIMCALL(trstnode152011*, parseoptionlist_165706)(trstparser159653* p);
N_NIMCALL(void, parseparagraph_164431)(trstparser159653* p, trstnode152011* result);
N_NIMCALL(void, addifnotnil_152211)(trstnode152011* father, trstnode152011* son);
N_NIMCALL(NU8, sonkind_166020)(trstnode152011* father, NI i);
STRING_LITERAL(TMP49, "(", 1);
STRING_LITERAL(TMP50, ", ", 2);
STRING_LITERAL(TMP51, ") ", 2);
STRING_LITERAL(TMP61, "cannot open \'$1\'", 16);
STRING_LITERAL(TMP62, "\'$1\' expected", 13);
STRING_LITERAL(TMP63, "grid table is not implemented", 29);
STRING_LITERAL(TMP64, "new section expected", 20);
STRING_LITERAL(TMP65, "general parse error", 19);
STRING_LITERAL(TMP66, "invalid directive: \'$1\'", 23);
STRING_LITERAL(TMP67, "can\'t open \'$1\' due to recursion", 32);
STRING_LITERAL(TMP68, "redefinition of label \'$1\'", 26);
STRING_LITERAL(TMP69, "unknown substitution \'$1\'", 25);
STRING_LITERAL(TMP70, "language \'$1\' not supported", 27);
STRING_LITERAL(TMP71, "field \'$1\' not supported", 24);
NIM_CONST TY159041 rstmessages_159040 = {((NimStringDesc*) &TMP61),
((NimStringDesc*) &TMP62),
((NimStringDesc*) &TMP63),
((NimStringDesc*) &TMP64),
((NimStringDesc*) &TMP65),
((NimStringDesc*) &TMP66),
((NimStringDesc*) &TMP67),
((NimStringDesc*) &TMP68),
((NimStringDesc*) &TMP69),
((NimStringDesc*) &TMP70),
((NimStringDesc*) &TMP71)}
;
STRING_LITERAL(TMP72, ": ", 2);
STRING_LITERAL(TMP75, "", 0);
STRING_LITERAL(TMP194, "parser.skip.pounds", 18);
STRING_LITERAL(TMP195, "parser.enable.smilies", 21);
STRING_LITERAL(TMP196, "parser.enable.raw.directive", 27);
STRING_LITERAL(TMP197, "parser.enable.fenced.blocks", 27);
NIM_CONST TY168253 TMP193 = {{((NimStringDesc*) &TMP194),
((NU8) 0)}
,
{((NimStringDesc*) &TMP195),
((NU8) 1)}
,
{((NimStringDesc*) &TMP196),
((NU8) 2)}
,
{((NimStringDesc*) &TMP197),
((NU8) 3)}
}
;
NIM_CONST struct {
  TGenericSeq Sup;
  NI data[1];
} CNSTSEQ205 = {{1, 1}, {0}};
NIM_CONST TY159678* TMP203 = ((TY159678*)&CNSTSEQ205);
static NIM_CONST tcharset90806 TMP206 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x07, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
static NIM_CONST tcharset90806 TMP207 = {
0x00, 0x02, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP208, "\012", 1);
STRING_LITERAL(TMP211, "#", 1);
static NIM_CONST tcharset90806 TMP212 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP213, "ii", 2);
STRING_LITERAL(TMP214, " a", 2);
STRING_LITERAL(TMP215, "i", 1);
STRING_LITERAL(TMP216, "ai", 2);
STRING_LITERAL(TMP217, "::", 2);
STRING_LITERAL(TMP218, "+", 1);
STRING_LITERAL(TMP219, "*", 1);
STRING_LITERAL(TMP220, "-", 1);
STRING_LITERAL(TMP221, "|", 1);
STRING_LITERAL(TMP222, "..", 2);
STRING_LITERAL(TMP223, ":w:", 3);
STRING_LITERAL(TMP224, "(e) ", 4);
STRING_LITERAL(TMP225, "+a+", 3);
STRING_LITERAL(TMP226, "-w", 2);
STRING_LITERAL(TMP227, "--w", 3);
STRING_LITERAL(TMP228, "/w", 2);
STRING_LITERAL(TMP229, "//w", 3);
STRING_LITERAL(TMP230, "e) ", 3);
STRING_LITERAL(TMP231, "e. ", 3);
STRING_LITERAL(TMP232, "author", 6);
STRING_LITERAL(TMP233, "authors", 7);
STRING_LITERAL(TMP234, "code", 4);
STRING_LITERAL(TMP235, "code-block", 10);
STRING_LITERAL(TMP236, "container", 9);
STRING_LITERAL(TMP237, "contents", 8);
STRING_LITERAL(TMP238, "figure", 6);
STRING_LITERAL(TMP239, "image", 5);
STRING_LITERAL(TMP240, "include", 7);
STRING_LITERAL(TMP241, "index", 5);
STRING_LITERAL(TMP242, "raw", 3);
STRING_LITERAL(TMP243, "title", 5);
NIM_CONST TY162984 dirids_162983 = {((NimStringDesc*) &TMP75),
((NimStringDesc*) &TMP232),
((NimStringDesc*) &TMP233),
((NimStringDesc*) &TMP234),
((NimStringDesc*) &TMP235),
((NimStringDesc*) &TMP236),
((NimStringDesc*) &TMP237),
((NimStringDesc*) &TMP238),
((NimStringDesc*) &TMP239),
((NimStringDesc*) &TMP240),
((NimStringDesc*) &TMP241),
((NimStringDesc*) &TMP242),
((NimStringDesc*) &TMP243)}
;
static NIM_CONST tcharset90806 TMP244 = {
0x00, 0x00, 0x00, 0x00, 0x84, 0xA1, 0x00, 0x14,
0x00, 0x00, 0x00, 0x88, 0x00, 0x00, 0x00, 0x08,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP245, "\\", 1);
STRING_LITERAL(TMP246, "***", 3);
static NIM_CONST tcharset90806 TMP247 = {
0x00, 0x00, 0x00, 0x00, 0x86, 0xF2, 0x00, 0xCC,
0x00, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0x20,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
;
STRING_LITERAL(TMP248, "``", 2);
STRING_LITERAL(TMP249, "\\\\", 2);
STRING_LITERAL(TMP250, " ", 1);
STRING_LITERAL(TMP251, "**", 2);
STRING_LITERAL(TMP252, "```", 3);
STRING_LITERAL(TMP253, "`", 1);
STRING_LITERAL(TMP254, "_", 1);
STRING_LITERAL(TMP255, ">", 1);
STRING_LITERAL(TMP256, "<", 1);
STRING_LITERAL(TMP257, "idx", 3);
STRING_LITERAL(TMP258, "literal", 7);
STRING_LITERAL(TMP259, "strong", 6);
STRING_LITERAL(TMP260, "emphasis", 8);
STRING_LITERAL(TMP261, "sub", 3);
STRING_LITERAL(TMP262, "subscript", 9);
STRING_LITERAL(TMP263, "sup", 3);
STRING_LITERAL(TMP264, "supscript", 9);
STRING_LITERAL(TMP265, ":D", 2);
STRING_LITERAL(TMP266, "icon_e_biggrin", 14);
STRING_LITERAL(TMP267, ":-D", 3);
STRING_LITERAL(TMP268, ":)", 2);
STRING_LITERAL(TMP269, "icon_e_smile", 12);
STRING_LITERAL(TMP270, ":-)", 3);
STRING_LITERAL(TMP271, ";)", 2);
STRING_LITERAL(TMP272, "icon_e_wink", 11);
STRING_LITERAL(TMP273, ";-)", 3);
STRING_LITERAL(TMP274, ":(", 2);
STRING_LITERAL(TMP275, "icon_e_sad", 10);
STRING_LITERAL(TMP276, ":-(", 3);
STRING_LITERAL(TMP277, ":o", 2);
STRING_LITERAL(TMP278, "icon_e_surprised", 16);
STRING_LITERAL(TMP279, ":-o", 3);
STRING_LITERAL(TMP280, ":shock:", 7);
STRING_LITERAL(TMP281, "icon_eek", 8);
STRING_LITERAL(TMP282, ":?", 2);
STRING_LITERAL(TMP283, "icon_e_confused", 15);
STRING_LITERAL(TMP284, ":-?", 3);
STRING_LITERAL(TMP285, ":-/", 3);
STRING_LITERAL(TMP286, "8-)", 3);
STRING_LITERAL(TMP287, "icon_cool", 9);
STRING_LITERAL(TMP288, ":lol:", 5);
STRING_LITERAL(TMP289, "icon_lol", 8);
STRING_LITERAL(TMP290, ":x", 2);
STRING_LITERAL(TMP291, "icon_mad", 8);
STRING_LITERAL(TMP292, ":-x", 3);
STRING_LITERAL(TMP293, ":P", 2);
STRING_LITERAL(TMP294, "icon_razz", 9);
STRING_LITERAL(TMP295, ":-P", 3);
STRING_LITERAL(TMP296, ":oops:", 6);
STRING_LITERAL(TMP297, "icon_redface", 12);
STRING_LITERAL(TMP298, ":cry:", 5);
STRING_LITERAL(TMP299, "icon_cry", 8);
STRING_LITERAL(TMP300, ":evil:", 6);
STRING_LITERAL(TMP301, "icon_evil", 9);
STRING_LITERAL(TMP302, ":twisted:", 9);
STRING_LITERAL(TMP303, "icon_twisted", 12);
STRING_LITERAL(TMP304, ":roll:", 6);
STRING_LITERAL(TMP305, "icon_rolleyes", 13);
STRING_LITERAL(TMP306, ":!:", 3);
STRING_LITERAL(TMP307, "icon_exclaim", 12);
STRING_LITERAL(TMP308, ":?:", 3);
STRING_LITERAL(TMP309, "icon_question", 13);
STRING_LITERAL(TMP310, ":idea:", 6);
STRING_LITERAL(TMP311, "icon_idea", 9);
STRING_LITERAL(TMP312, ":arrow:", 7);
STRING_LITERAL(TMP313, "icon_arrow", 10);
STRING_LITERAL(TMP314, ":|", 2);
STRING_LITERAL(TMP315, "icon_neutral", 12);
STRING_LITERAL(TMP316, ":-|", 3);
STRING_LITERAL(TMP317, ":mrgreen:", 9);
STRING_LITERAL(TMP318, "icon_mrgreen", 12);
STRING_LITERAL(TMP319, ":geek:", 6);
STRING_LITERAL(TMP320, "icon_e_geek", 11);
STRING_LITERAL(TMP321, ":ugeek:", 7);
STRING_LITERAL(TMP322, "icon_e_ugeek", 12);
NIM_CONST TY159082 smilies_159081 = {{((NimStringDesc*) &TMP265),
((NimStringDesc*) &TMP266)}
,
{((NimStringDesc*) &TMP267),
((NimStringDesc*) &TMP266)}
,
{((NimStringDesc*) &TMP268),
((NimStringDesc*) &TMP269)}
,
{((NimStringDesc*) &TMP270),
((NimStringDesc*) &TMP269)}
,
{((NimStringDesc*) &TMP271),
((NimStringDesc*) &TMP272)}
,
{((NimStringDesc*) &TMP273),
((NimStringDesc*) &TMP272)}
,
{((NimStringDesc*) &TMP274),
((NimStringDesc*) &TMP275)}
,
{((NimStringDesc*) &TMP276),
((NimStringDesc*) &TMP275)}
,
{((NimStringDesc*) &TMP277),
((NimStringDesc*) &TMP278)}
,
{((NimStringDesc*) &TMP279),
((NimStringDesc*) &TMP278)}
,
{((NimStringDesc*) &TMP280),
((NimStringDesc*) &TMP281)}
,
{((NimStringDesc*) &TMP282),
((NimStringDesc*) &TMP283)}
,
{((NimStringDesc*) &TMP284),
((NimStringDesc*) &TMP283)}
,
{((NimStringDesc*) &TMP285),
((NimStringDesc*) &TMP283)}
,
{((NimStringDesc*) &TMP286),
((NimStringDesc*) &TMP287)}
,
{((NimStringDesc*) &TMP288),
((NimStringDesc*) &TMP289)}
,
{((NimStringDesc*) &TMP290),
((NimStringDesc*) &TMP291)}
,
{((NimStringDesc*) &TMP292),
((NimStringDesc*) &TMP291)}
,
{((NimStringDesc*) &TMP293),
((NimStringDesc*) &TMP294)}
,
{((NimStringDesc*) &TMP295),
((NimStringDesc*) &TMP294)}
,
{((NimStringDesc*) &TMP296),
((NimStringDesc*) &TMP297)}
,
{((NimStringDesc*) &TMP298),
((NimStringDesc*) &TMP299)}
,
{((NimStringDesc*) &TMP300),
((NimStringDesc*) &TMP301)}
,
{((NimStringDesc*) &TMP302),
((NimStringDesc*) &TMP303)}
,
{((NimStringDesc*) &TMP304),
((NimStringDesc*) &TMP305)}
,
{((NimStringDesc*) &TMP306),
((NimStringDesc*) &TMP307)}
,
{((NimStringDesc*) &TMP308),
((NimStringDesc*) &TMP309)}
,
{((NimStringDesc*) &TMP310),
((NimStringDesc*) &TMP311)}
,
{((NimStringDesc*) &TMP312),
((NimStringDesc*) &TMP313)}
,
{((NimStringDesc*) &TMP314),
((NimStringDesc*) &TMP315)}
,
{((NimStringDesc*) &TMP316),
((NimStringDesc*) &TMP315)}
,
{((NimStringDesc*) &TMP317),
((NimStringDesc*) &TMP318)}
,
{((NimStringDesc*) &TMP319),
((NimStringDesc*) &TMP320)}
,
{((NimStringDesc*) &TMP321),
((NimStringDesc*) &TMP322)}
}
;
STRING_LITERAL(TMP323, ":", 1);
STRING_LITERAL(TMP324, "//", 2);
STRING_LITERAL(TMP326, "http", 4);
STRING_LITERAL(TMP327, "https", 5);
STRING_LITERAL(TMP328, "ftp", 3);
STRING_LITERAL(TMP329, "telnet", 6);
STRING_LITERAL(TMP330, "file", 4);
NIM_CONST TY162083 TMP325 = {((NimStringDesc*) &TMP326),
((NimStringDesc*) &TMP327),
((NimStringDesc*) &TMP328),
((NimStringDesc*) &TMP329),
((NimStringDesc*) &TMP330)}
;
STRING_LITERAL(TMP334, "\001\001", 2);
STRING_LITERAL(TMP344, "html", 4);
STRING_LITERAL(TMP347, "latex", 5);
STRING_LITERAL(TMP350, "default-language", 16);
STRING_LITERAL(TMP351, "Nimrod", 6);
STRING_LITERAL(TMP352, " _", 2);
STRING_LITERAL(TMP353, " |", 2);
STRING_LITERAL(TMP354, "replace", 7);
STRING_LITERAL(TMP355, " [", 2);
STRING_LITERAL(TMP356, "]", 1);
NIM_CONST TY165930 wildcards_165929 = {((NimStringDesc*) &TMP224),
((NimStringDesc*) &TMP230),
((NimStringDesc*) &TMP231)}
;
NIM_CONST TY165935 wildpos_165934 = {1,
0,
0}
;
TNimType NTI159007; /* TMsgKind */
TNimType NTI159005; /* TMsgClass */
extern TSafePoint* exchandler_15443;
extern TNimType NTI2855; /* EInvalidValue */
extern E_Base* currexception_15445;
extern tgcheap46216 gch_46244;
TNimType NTI159013; /* Find_file_handler */
TNimType NTI159011; /* TMsgHandler */
extern TNimType NTI2811; /* TObject */
TNimType NTI159653; /* TRstParser */
extern TNimType NTI116; /* int */
TNimType NTI159124; /* TToken */
TNimType NTI159122; /* TTokType */
extern TNimType NTI161; /* string */
TNimType NTI159126; /* TTokenSeq */
TNimType NTI159649; /* TSharedState */
TNimType NTI159645; /* TRstParseOption */
TNimType NTI159647; /* TRstParseOptions */
TNimType NTI159641; /* TSubstitution */
extern TNimType NTI152007; /* PRstNode */
TNimType NTI159667; /* seq[TSubstitution] */
TNimType NTI159639; /* TLevelMap */
TNimType NTI159651; /* PSharedState */
TNimType NTI159678; /* seq[int] */
TNimType NTI159643; /* File_info */
TNimType NTI159680; /* seq[File_info] */
extern TNimType NTI150; /* bool */
TNimType NTI159128; /* TLexer */
extern TNimType NTI163; /* cstring */
TNimType NTI159009; /* EParseError */
TNimType NTI160341; /* ref EParseError */
extern TNimType NTI2839; /* EOS */
extern TNimType NTI2837; /* EIO */
extern TNimType NTI117411; /* seq[string] */

N_NIMCALL(NU8, whichmsgclass_160007)(NU8 k) {
	NU8 result;
	result = 0;
	switch (((NU8)(reprEnum(k, (&NTI159007))->data[1]))) {
	case 101:
	case 69:
	{
		result = ((NU8) 2);
	}
	break;
	case 119:
	case 87:
	{
		result = ((NU8) 1);
	}
	break;
	case 104:
	case 72:
	{
		result = ((NU8) 0);
	}
	break;
	default:
	{
	}
	break;
	}
	return result;
}

static N_INLINE(void, appendString)(NimStringDesc* dest, NimStringDesc* src) {
	memcpy(((NCSTRING) (&(*dest).data[((*dest).Sup.len)- 0])), ((NCSTRING) ((*src).data)), (NI64)((*src).Sup.len + 1));
	(*dest).Sup.len += (*src).Sup.len;
}

static N_INLINE(void, pushSafePoint)(TSafePoint* s) {
	(*s).hasRaiseAction = NIM_FALSE;
	(*s).prev = exchandler_15443;
	exchandler_15443 = s;
}

static N_INLINE(void, popSafePoint)(void) {
	exchandler_15443 = (*exchandler_15443).prev;
}

static N_INLINE(E_Base*, getCurrentException)(void) {
	E_Base* result;
	result = 0;
	result = currexception_15445;
	return result;
}

static N_INLINE(NIM_BOOL, canbecycleroot_47867)(tcell44135* c) {
	NIM_BOOL result;
	result = 0;
	result = !((((*(*c).Typ).flags &(1<<((((NU8) 1))&7)))!=0));
	return result;
}

static N_INLINE(void, rtladdcycleroot_48629)(tcell44135* c) {
	{
		if (!!((((NI) ((NI)((*c).Refcount & 3))) == 3))) goto LA3;
		(*c).Refcount = (NI)((NI)((*c).Refcount & -4) | 3);
		incl_44871(&gch_46244.Cycleroots, c);
	}
	LA3: ;
}

static N_INLINE(void, incref_50225)(tcell44135* c) {
	(*c).Refcount = (NI)((NU64)((*c).Refcount) + (NU64)(8));
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = canbecycleroot_47867(c);
		if (!LOC3) goto LA4;
		rtladdcycleroot_48629(c);
	}
	LA4: ;
}

static N_INLINE(tcell44135*, usrtocell_47846)(void* usr) {
	tcell44135* result;
	result = 0;
	result = ((tcell44135*) ((NI)((NU64)(((NI) (usr))) - (NU64)(((NI)sizeof(tcell44135))))));
	return result;
}

static N_INLINE(void, rtladdzct_49404)(tcell44135* c) {
	addzct_47817(&gch_46244.Zct, c);
}

static N_INLINE(void, decref_49804)(tcell44135* c) {
	{
		(*c).Refcount -= 8;
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		rtladdzct_49404(c);
	}
	goto LA1;
	LA3: ;
	{
		NIM_BOOL LOC6;
		LOC6 = 0;
		LOC6 = canbecycleroot_47867(c);
		if (!LOC6) goto LA7;
		rtladdcycleroot_48629(c);
	}
	goto LA1;
	LA7: ;
	LA1: ;
}

static N_INLINE(void, asgnRef)(void** dest, void* src) {
	{
		tcell44135* LOC5;
		if (!!((src == NIM_NIL))) goto LA3;
		LOC5 = 0;
		LOC5 = usrtocell_47846(src);
		incref_50225(LOC5);
	}
	LA3: ;
	{
		tcell44135* LOC10;
		if (!!(((*dest) == NIM_NIL))) goto LA8;
		LOC10 = 0;
		LOC10 = usrtocell_47846((*dest));
		decref_49804(LOC10);
	}
	LA8: ;
	(*dest) = src;
}

static N_INLINE(void, popCurrentException)(void) {
	asgnRef((void**) &currexception_15445, (*currexception_15445).parent);
}

N_NIMCALL(NimStringDesc*, lr_nil_msg_handler)(NimStringDesc* filename, NI line, NI col, NU8 msgkind, NimStringDesc* arg) {
	NimStringDesc* result;
	NU8 mc;
	NimStringDesc* LOC5;
	NimStringDesc* LOC6;
	NimStringDesc* LOC7;
	TSafePoint TMP55;
	result = 0;
	mc = whichmsgclass_160007(msgkind);
	{
		if (!!((mc == ((NU8) 2)))) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	LOC5 = 0;
	LOC6 = 0;
	LOC6 = nimIntToStr(line);
	LOC7 = 0;
	LOC7 = nimIntToStr(col);
	LOC5 = rawNewString(filename->Sup.len + LOC6->Sup.len + LOC7->Sup.len + reprEnum(mc, (&NTI159005))->Sup.len + 5);
appendString(LOC5, filename);
appendString(LOC5, ((NimStringDesc*) &TMP49));
appendString(LOC5, LOC6);
appendString(LOC5, ((NimStringDesc*) &TMP50));
appendString(LOC5, LOC7);
appendString(LOC5, ((NimStringDesc*) &TMP51));
appendString(LOC5, reprEnum(mc, (&NTI159005)));
	result = LOC5;
	pushSafePoint(&TMP55);
	TMP55.status = _setjmp(TMP55.context);
	if (TMP55.status == 0) {
		NimStringDesc* volatile reason;
		NimStringDesc* LOC9;
		reason = nsuFormatSingleElem(rstmessages_159040[(msgkind)- 0], arg);
		LOC9 = 0;
		LOC9 = rawNewString(reason->Sup.len + 2);
appendString(LOC9, ((NimStringDesc*) &TMP72));
appendString(LOC9, reason);
		result = resizeString(result, LOC9->Sup.len + 0);
appendString(result, LOC9);
		popSafePoint();
	}
	else {
		popSafePoint();
		if (isObj(getCurrentException()->Sup.m_type, (&NTI2855))) {
			TMP55.status = 0;
			popCurrentException();
		}
	}
	if (TMP55.status != 0) reraiseException();
	BeforeRet: ;
	return result;
}

N_NIMCALL(NimStringDesc*, lr_nil_find_file_handler)(NimStringDesc* currentfilename, NimStringDesc* targetfilename) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP75));
	return result;
}
N_NIMCALL(void, TMP182)(void* p, NI op) {
	ttokenseq159126* a;
	NI LOC1;
	a = (ttokenseq159126*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Symbol, op);
	}
}
N_NIMCALL(void, TMP188)(void* p, NI op) {
	TY159667* a;
	NI LOC1;
	a = (TY159667*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Key, op);
	nimGCvisit((void*)a->data[LOC1].Value, op);
	}
}
N_NIMCALL(void, TMP189)(void* p, NI op) {
	tsharedstate159649* a;
	NI LOC1;
	NI LOC2;
	a = (tsharedstate159649*)p;
	nimGCvisit((void*)(*a).Subs, op);
	nimGCvisit((void*)(*a).Refs, op);
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < 256; LOC1++) {
	}
	LOC2 = 0;
	for (LOC2 = 0; LOC2 < 256; LOC2++) {
	}
}
N_NIMCALL(void, TMP190)(void* p, NI op) {
	TY159678* a;
	NI LOC1;
	a = (TY159678*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	}
}
N_NIMCALL(void, TMP192)(void* p, NI op) {
	TY159680* a;
	NI LOC1;
	a = (TY159680*)p;
	LOC1 = 0;
	for (LOC1 = 0; LOC1 < a->Sup.len; LOC1++) {
	nimGCvisit((void*)a->data[LOC1].Realpath, op);
	nimGCvisit((void*)a->data[LOC1].Input, op);
	}
}

N_NIMCALL(void, initparser_160689)(trstparser159653* p, tsharedstate159649* sharedstate) {
	genericSeqAssign(&(*p).Indentstack, TMP203, (&NTI159678));
	unsureAsgnRef((void**) &(*p).Tok, (ttokenseq159126*) newSeq((&NTI159126), 0));
	(*p).Idx = 0;
	unsureAsgnRef((void**) &(*p).Filenamestack, (TY159680*) newSeq((&NTI159680), 0));
	(*p).Hastoc = NIM_FALSE;
	(*p).Col = 0;
	(*p).Line = 1;
	unsureAsgnRef((void**) &(*p).S, sharedstate);
}

static N_INLINE(void, nimGCunrefNoCycle)(void* p) {
	tcell44135* c;
	c = usrtocell_47846(p);
	{
		(*c).Refcount -= 8;
		if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA3;
		rtladdzct_49404(c);
	}
	LA3: ;
}

N_NIMCALL(tsharedstate159649*, newsharedstate_160250)(NU8 options, lr_nim_find_file_handler findfile, lr_nim_msg_handler msghandler) {
	tsharedstate159649* result;
	result = 0;
	result = (tsharedstate159649*) newObj((&NTI159651), sizeof(tsharedstate159649));
	if ((*result).Subs) nimGCunrefNoCycle((*result).Subs);
	(*result).Subs = (TY159667*) newSeqRC1((&NTI159667), 0);
	if ((*result).Refs) nimGCunrefNoCycle((*result).Refs);
	(*result).Refs = (TY159667*) newSeqRC1((&NTI159667), 0);
	(*result).Options = options;
	{
		if (!!(msghandler == 0)) goto LA3;
		(*result).Msghandler = msghandler;
	}
	goto LA1;
	LA3: ;
	{
		(*result).Msghandler = lr_nil_msg_handler;
	}
	LA1: ;
	{
		if (!!(findfile == 0)) goto LA8;
		(*result).Findfile = findfile;
	}
	goto LA6;
	LA8: ;
	{
		(*result).Findfile = lr_nil_find_file_handler;
	}
	LA6: ;
	return result;
}

N_NIMCALL(void, newfileinfo_159688)(NimStringDesc* inputpath, fileinfo159643* Result) {
	unsureAsgnRef((void**) &(*Result).Input, copyString(inputpath));
}

N_NIMCALL(void, getthing_159150)(tlexer159128* l, ttoken159124* tok, tcharset90806 s) {
	NI pos;
	(*tok).Kind = ((NU8) 3);
	(*tok).Line = (*l).Line;
	(*tok).Col = (*l).Col;
	pos = (*l).Bufpos;
	{
		while (1) {
			(*tok).Symbol = addChar((*tok).Symbol, (*l).Buf[pos]);
			pos += 1;
			{
				if (!!(((s[((NU8)((*l).Buf[pos]))/8] &(1<<(((NU8)((*l).Buf[pos]))%8)))!=0))) goto LA5;
				goto LA1;
			}
			LA5: ;
		}
	} LA1: ;
	(*l).Col += (NI64)(pos - (*l).Bufpos);
	(*l).Bufpos = pos;
}

N_NIMCALL(NI, getindentaux_159253)(tlexer159128* l, NI start) {
	NI result;
	NI pos;
	NCSTRING buf;
	result = 0;
	pos = start;
	buf = (*l).Buf;
	{
		if (!((NU8)(buf[pos]) == (NU8)(13))) goto LA3;
		{
			if (!((NU8)(buf[(NI64)(pos + 1)]) == (NU8)(10))) goto LA7;
			pos += 2;
		}
		goto LA5;
		LA7: ;
		{
			pos += 1;
		}
		LA5: ;
	}
	goto LA1;
	LA3: ;
	{
		if (!((NU8)(buf[pos]) == (NU8)(10))) goto LA11;
		pos += 1;
	}
	goto LA1;
	LA11: ;
	LA1: ;
	{
		if (!(*l).Skippounds) goto LA15;
		{
			if (!((NU8)(buf[pos]) == (NU8)(35))) goto LA19;
			pos += 1;
		}
		LA19: ;
		{
			if (!((NU8)(buf[pos]) == (NU8)(35))) goto LA23;
			pos += 1;
		}
		LA23: ;
	}
	LA15: ;
	{
		while (1) {
			switch (((NU8)(buf[pos]))) {
			case 32:
			case 11:
			case 12:
			{
				pos += 1;
				result += 1;
			}
			break;
			case 9:
			{
				pos += 1;
				result = (NI64)((NI64)(result - ((NI) ((NI64)(result % 8)))) + 8);
			}
			break;
			default:
			{
				goto LA25;
			}
			break;
			}
		}
	} LA25: ;
	{
		if (!((NU8)(buf[pos]) == (NU8)(0))) goto LA32;
		result = 0;
	}
	goto LA30;
	LA32: ;
	{
		NIM_BOOL LOC35;
		LOC35 = 0;
		LOC35 = ((NU8)(buf[pos]) == (NU8)(10));
		if (LOC35) goto LA36;
		LOC35 = ((NU8)(buf[pos]) == (NU8)(13));
		LA36: ;
		if (!LOC35) goto LA37;
		result = getindentaux_159253(l, pos);
	}
	goto LA30;
	LA37: ;
	LA30: ;
	(*l).Bufpos = pos;
	return result;
}

N_NIMCALL(void, getindent_159371)(tlexer159128* l, ttoken159124* tok) {
	NimStringDesc* LOC1;
	NimStringDesc* LOC2;
	(*tok).Col = 0;
	(*tok).Kind = ((NU8) 1);
	(*tok).Ival = getindentaux_159253(l, (*l).Bufpos);
	(*l).Line += 1;
	(*tok).Line = (*l).Line;
	(*l).Col = (*tok).Ival;
	(*tok).Ival = (((NI64)((*tok).Ival - (*l).Baseindent) >= 0) ? (NI64)((*tok).Ival - (*l).Baseindent) : 0);
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = nsuRepeatChar((*tok).Ival, 32);
	LOC1 = rawNewString(LOC2->Sup.len + 1);
appendString(LOC1, ((NimStringDesc*) &TMP208));
appendString(LOC1, LOC2);
	unsureAsgnRef((void**) &(*tok).Symbol, LOC1);
}

N_NIMCALL(void, getadornment_159208)(tlexer159128* l, ttoken159124* tok) {
	NI pos;
	NIM_CHAR c;
	(*tok).Kind = ((NU8) 4);
	(*tok).Line = (*l).Line;
	(*tok).Col = (*l).Col;
	pos = (*l).Bufpos;
	c = (*l).Buf[pos];
	{
		while (1) {
			(*tok).Symbol = addChar((*tok).Symbol, (*l).Buf[pos]);
			pos += 1;
			{
				if (!!(((NU8)((*l).Buf[pos]) == (NU8)(c)))) goto LA5;
				goto LA1;
			}
			LA5: ;
		}
	} LA1: ;
	(*l).Col += (NI64)(pos - (*l).Bufpos);
	(*l).Bufpos = pos;
}

N_NIMCALL(void, rawgettok_159398)(tlexer159128* l, ttoken159124* tok) {
	NIM_CHAR c;
	unsureAsgnRef((void**) &(*tok).Symbol, copyString(((NimStringDesc*) &TMP75)));
	(*tok).Ival = 0;
	c = (*l).Buf[(*l).Bufpos];
	switch (((NU8)(c))) {
	case 97 ... 122:
	case 65 ... 90:
	case 128 ... 255:
	case 48 ... 57:
	{
		getthing_159150(l, tok, TMP206);
	}
	break;
	case 32:
	case 9:
	case 11:
	case 12:
	{
		getthing_159150(l, tok, TMP207);
		(*tok).Kind = ((NU8) 2);
		{
			if (!(((NU8)((*l).Buf[(*l).Bufpos])) == ((NU8)(13)) || ((NU8)((*l).Buf[(*l).Bufpos])) == ((NU8)(10)))) goto LA5;
			rawgettok_159398(l, tok);
		}
		LA5: ;
	}
	break;
	case 13:
	case 10:
	{
		getindent_159371(l, tok);
	}
	break;
	case 33:
	case 34:
	case 35:
	case 36:
	case 37:
	case 38:
	case 39:
	case 40:
	case 41:
	case 42:
	case 43:
	case 44:
	case 45:
	case 46:
	case 47:
	case 58:
	case 59:
	case 60:
	case 61:
	case 62:
	case 63:
	case 64:
	case 91:
	case 92:
	case 93:
	case 94:
	case 95:
	case 96:
	case 123:
	case 124:
	case 125:
	case 126:
	{
		getadornment_159208(l, tok);
		{
			if (!((*tok).Symbol->Sup.len <= 3)) goto LA11;
			(*tok).Kind = ((NU8) 5);
		}
		LA11: ;
	}
	break;
	default:
	{
		(*tok).Line = (*l).Line;
		(*tok).Col = (*l).Col;
		{
			if (!((NU8)(c) == (NU8)(0))) goto LA16;
			(*tok).Kind = ((NU8) 0);
		}
		goto LA14;
		LA16: ;
		{
			(*tok).Kind = ((NU8) 6);
			(*tok).Symbol = addChar((*tok).Symbol, c);
			(*l).Bufpos += 1;
			(*l).Col += 1;
		}
		LA14: ;
	}
	break;
	}
	(*tok).Col = (((NI64)((*tok).Col - (*l).Baseindent) >= 0) ? (NI64)((*tok).Col - (*l).Baseindent) : 0);
}

N_NIMCALL(NI, gettokens_159453)(NimStringDesc* buffer, NIM_BOOL skippounds, ttokenseq159126** tokens) {
	NI result;
	tlexer159128 l;
	NI length;
	result = 0;
	memset((void*)&l, 0, sizeof(l));
	l.Sup.m_type = (&NTI159128);
	length = (*tokens)->Sup.len;
	l.Buf = buffer->data;
	l.Line = 0;
	{
		NIM_BOOL LOC3;
		NIM_BOOL LOC4;
		LOC3 = 0;
		LOC4 = 0;
		LOC4 = ((NU8)(l.Buf[0]) == (NU8)(239));
		if (!(LOC4)) goto LA5;
		LOC4 = ((NU8)(l.Buf[1]) == (NU8)(187));
		LA5: ;
		LOC3 = LOC4;
		if (!(LOC3)) goto LA6;
		LOC3 = ((NU8)(l.Buf[2]) == (NU8)(191));
		LA6: ;
		if (!LOC3) goto LA7;
		l.Bufpos += 3;
	}
	LA7: ;
	l.Skippounds = skippounds;
	{
		if (!skippounds) goto LA11;
		{
			if (!((NU8)(l.Buf[l.Bufpos]) == (NU8)(35))) goto LA15;
			l.Bufpos += 1;
			result += 1;
		}
		LA15: ;
		{
			if (!((NU8)(l.Buf[l.Bufpos]) == (NU8)(35))) goto LA19;
			l.Bufpos += 1;
			result += 1;
		}
		LA19: ;
		l.Baseindent = 0;
		{
			while (1) {
				if (!((NU8)(l.Buf[l.Bufpos]) == (NU8)(32))) goto LA22;
				l.Bufpos += 1;
				l.Baseindent += 1;
				result += 1;
			} LA22: ;
		}
	}
	LA11: ;
	{
		while (1) {
			length += 1;
			(*tokens) = (ttokenseq159126*) setLengthSeq(&((*tokens))->Sup, sizeof(ttoken159124), length);
			rawgettok_159398(&l, &(*tokens)->data[(NI64)(length - 1)]);
			{
				if (!((*tokens)->data[(NI64)(length - 1)].Kind == ((NU8) 0))) goto LA27;
				goto LA23;
			}
			LA27: ;
		}
	} LA23: ;
	{
		if (!((*tokens)->data[0].Kind == ((NU8) 2))) goto LA31;
		(*tokens)->data[0].Ival = (*tokens)->data[0].Symbol->Sup.len;
		(*tokens)->data[0].Kind = ((NU8) 1);
	}
	LA31: ;
	return result;
}

N_NIMCALL(void, addnodesaux_160758)(trstnode152011* n, NimStringDesc** result) {
	{
		if (!((*n).Kind == ((NU8) 64))) goto LA3;
		(*result) = resizeString((*result), (*n).Text->Sup.len + 0);
appendString((*result), (*n).Text);
	}
	goto LA1;
	LA3: ;
	{
		{
			NI i_160784;
			NI HEX3Atmp_160786;
			NI LOC7;
			NI res_160789;
			i_160784 = 0;
			HEX3Atmp_160786 = 0;
			LOC7 = 0;
			LOC7 = len_152084(n);
			HEX3Atmp_160786 = (NI64)(LOC7 - 1);
			res_160789 = 0;
			{
				while (1) {
					if (!(res_160789 <= HEX3Atmp_160786)) goto LA9;
					i_160784 = res_160789;
					addnodesaux_160758((*n).Sons->data[i_160784], result);
					res_160789 += 1;
				} LA9: ;
			}
		}
	}
	LA1: ;
}

N_NIMCALL(NimStringDesc*, addnodes_159055)(trstnode152011* n) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP75));
	addnodesaux_160758(n, &result);
	return result;
}

static N_INLINE(NIM_BOOL, eqStrings)(NimStringDesc* a, NimStringDesc* b) {
	NIM_BOOL result;
	NIM_BOOL LOC11;
	int LOC13;
	result = 0;
	{
		if (!(a == b)) goto LA3;
		result = NIM_TRUE;
		goto BeforeRet;
	}
	LA3: ;
	{
		NIM_BOOL LOC7;
		LOC7 = 0;
		LOC7 = (a == NIM_NIL);
		if (LOC7) goto LA8;
		LOC7 = (b == NIM_NIL);
		LA8: ;
		if (!LOC7) goto LA9;
		result = NIM_FALSE;
		goto BeforeRet;
	}
	LA9: ;
	LOC11 = 0;
	LOC11 = ((*a).Sup.len == (*b).Sup.len);
	if (!(LOC11)) goto LA12;
	LOC13 = 0;
	LOC13 = memcmp(((NCSTRING) ((*a).data)), ((NCSTRING) ((*b).data)), (NI64)((*a).Sup.len * 1));
	LOC11 = (LOC13 == ((NI32) 0));
	LA12: ;
	result = LOC11;
	goto BeforeRet;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NI, findsub_160937)(trstparser159653* p, trstnode152011* n) {
	NI result;
	NimStringDesc* key;
	result = 0;
	key = addnodes_159055(n);
	{
		NI i_160956;
		NI HEX3Atmp_160971;
		NI res_160974;
		i_160956 = 0;
		HEX3Atmp_160971 = 0;
		HEX3Atmp_160971 = ((*(*p).S).Subs->Sup.len-1);
		res_160974 = 0;
		{
			while (1) {
				if (!(res_160974 <= HEX3Atmp_160971)) goto LA3;
				i_160956 = res_160974;
				{
					if (!eqStrings(key, (*(*p).S).Subs->data[i_160956].Key)) goto LA6;
					result = i_160956;
					goto BeforeRet;
				}
				LA6: ;
				res_160974 += 1;
			} LA3: ;
		}
	}
	{
		NI i_160969;
		NI HEX3Atmp_160977;
		NI res_160980;
		i_160969 = 0;
		HEX3Atmp_160977 = 0;
		HEX3Atmp_160977 = ((*(*p).S).Subs->Sup.len-1);
		res_160980 = 0;
		{
			while (1) {
				if (!(res_160980 <= HEX3Atmp_160977)) goto LA10;
				i_160969 = res_160980;
				{
					NI LOC13;
					LOC13 = 0;
					LOC13 = nsuCmpIgnoreStyle(key, (*(*p).S).Subs->data[i_160969].Key);
					if (!(LOC13 == 0)) goto LA14;
					result = i_160969;
					goto BeforeRet;
				}
				LA14: ;
				res_160980 += 1;
			} LA10: ;
		}
	}
	result = -1;
	BeforeRet: ;
	return result;
}
N_NIMCALL(void, TMP210)(void* p, NI op) {
	eparseerror159009* a;
	a = (eparseerror159009*)p;
	nimGCvisit((void*)(*a).Sup.Sup.Sup.parent, op);
	nimGCvisit((void*)(*a).Sup.Sup.Sup.message, op);
	nimGCvisit((void*)(*a).Sup.Sup.Sup.trace, op);
}

N_NIMCALL(void, rstmessage_160332)(trstparser159653* p, NU8 msgkind, NimStringDesc* arg) {
	NimStringDesc* msg;
	msg = (*(*p).S).Msghandler((*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)].Input, (NI64)((*p).Line + (*p).Tok->data[(*p).Idx].Line), (NI64)((*p).Col + (*p).Tok->data[(*p).Idx].Col), msgkind, arg);
	{
		eparseerror159009* e_160340;
		NimStringDesc* LOC5;
		if (!!(msg == 0)) goto LA3;
		e_160340 = 0;
		e_160340 = (eparseerror159009*) newObj((&NTI160341), sizeof(eparseerror159009));
		(*e_160340).Sup.Sup.Sup.Sup.m_type = (&NTI159009);
		LOC5 = 0;
		LOC5 = (*e_160340).Sup.Sup.Sup.message; (*e_160340).Sup.Sup.Sup.message = copyStringRC1(msg);
		if (LOC5) nimGCunrefNoCycle(LOC5);
		raiseException((E_Base*)e_160340, "EParseError");
	}
	LA3: ;
}

N_NIMCALL(trstnode152011*, findref_161142)(trstparser159653* p, NimStringDesc* key) {
	trstnode152011* result;
	result = 0;
	{
		NI i_161160;
		NI HEX3Atmp_161162;
		NI res_161165;
		i_161160 = 0;
		HEX3Atmp_161162 = 0;
		HEX3Atmp_161162 = ((*(*p).S).Refs->Sup.len-1);
		res_161165 = 0;
		{
			while (1) {
				if (!(res_161165 <= HEX3Atmp_161162)) goto LA3;
				i_161160 = res_161165;
				{
					if (!eqStrings(key, (*(*p).S).Refs->data[i_161160].Key)) goto LA6;
					result = (*(*p).S).Refs->data[i_161160].Value;
					goto BeforeRet;
				}
				LA6: ;
				res_161165 += 1;
			} LA3: ;
		}
	}
	BeforeRet: ;
	return result;
}

N_NIMCALL(void, rstnodetorefnameaux_160817)(trstnode152011* n, NimStringDesc** r, NIM_BOOL* b) {
	{
		if (!((*n).Kind == ((NU8) 64))) goto LA3;
		{
			NI i_160845;
			NI HEX3Atmp_160889;
			NI res_160892;
			i_160845 = 0;
			HEX3Atmp_160889 = 0;
			HEX3Atmp_160889 = (NI64)((*n).Text->Sup.len - 1);
			res_160892 = 0;
			{
				while (1) {
					if (!(res_160892 <= HEX3Atmp_160889)) goto LA7;
					i_160845 = res_160892;
					switch (((NU8)((*n).Text->data[i_160845]))) {
					case 48 ... 57:
					{
						{
							if (!(*b)) goto LA11;
							(*r) = addChar((*r), 45);
							(*b) = NIM_FALSE;
						}
						LA11: ;
						{
							if (!((*r)->Sup.len == 0)) goto LA15;
							(*r) = addChar((*r), 90);
						}
						LA15: ;
						(*r) = addChar((*r), (*n).Text->data[i_160845]);
					}
					break;
					case 97 ... 122:
					{
						{
							if (!(*b)) goto LA20;
							(*r) = addChar((*r), 45);
							(*b) = NIM_FALSE;
						}
						LA20: ;
						(*r) = addChar((*r), (*n).Text->data[i_160845]);
					}
					break;
					case 65 ... 90:
					{
						{
							if (!(*b)) goto LA25;
							(*r) = addChar((*r), 45);
							(*b) = NIM_FALSE;
						}
						LA25: ;
						(*r) = addChar((*r), ((NIM_CHAR) (((NI) ((NI64)(((NI) ((NI64)(((NI) (((NU8)((*n).Text->data[i_160845])))) - 65))) + 97))))));
					}
					break;
					default:
					{
						{
							if (!(0 < (*r)->Sup.len)) goto LA30;
							(*b) = NIM_TRUE;
						}
						LA30: ;
					}
					break;
					}
					res_160892 += 1;
				} LA7: ;
			}
		}
	}
	goto LA1;
	LA3: ;
	{
		{
			NI i_160887;
			NI HEX3Atmp_160895;
			NI LOC34;
			NI res_160898;
			i_160887 = 0;
			HEX3Atmp_160895 = 0;
			LOC34 = 0;
			LOC34 = len_152084(n);
			HEX3Atmp_160895 = (NI64)(LOC34 - 1);
			res_160898 = 0;
			{
				while (1) {
					if (!(res_160898 <= HEX3Atmp_160895)) goto LA36;
					i_160887 = res_160898;
					rstnodetorefnameaux_160817((*n).Sons->data[i_160887], r, b);
					res_160898 += 1;
				} LA36: ;
			}
		}
	}
	LA1: ;
}

N_NIMCALL(NimStringDesc*, rstnodetorefname_159049)(trstnode152011* n) {
	NimStringDesc* result;
	NIM_BOOL b;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP75));
	b = NIM_FALSE;
	rstnodetorefnameaux_160817(n, &result, &b);
	return result;
}

static N_INLINE(void, asgnRefNoCycle)(void** dest, void* src) {
	{
		tcell44135* c;
		if (!!((src == NIM_NIL))) goto LA3;
		c = usrtocell_47846(src);
		(*c).Refcount += 8;
	}
	LA3: ;
	{
		tcell44135* c;
		if (!!(((*dest) == NIM_NIL))) goto LA7;
		c = usrtocell_47846((*dest));
		{
			(*c).Refcount -= 8;
			if (!((NU64)((*c).Refcount) < (NU64)(8))) goto LA11;
			rtladdzct_49404(c);
		}
		LA11: ;
	}
	LA7: ;
	(*dest) = src;
}

N_NIMCALL(trstnode152011*, resolvesubs_167889)(trstparser159653* p, trstnode152011* n) {
	trstnode152011* result;
	result = 0;
	result = n;
	{
		if (!(n == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	switch ((*n).Kind) {
	case ((NU8) 62):
	{
		NI x;
		x = findsub_160937(p, n);
		{
			if (!(0 <= x)) goto LA8;
			result = (*(*p).S).Subs->data[x].Value;
		}
		goto LA6;
		LA8: ;
		{
			NimStringDesc* key;
			NimStringDesc* e;
			key = addnodes_159055(n);
			e = getenv_118041(key);
			{
				if (!!(((e) && (e)->Sup.len == 0))) goto LA13;
				result = newrstnode_152151(((NU8) 64), e);
			}
			goto LA11;
			LA13: ;
			{
				rstmessage_160332(&(*p), ((NU8) 8), key);
			}
			LA11: ;
		}
		LA6: ;
	}
	break;
	case ((NU8) 39):
	{
		trstnode152011* y;
		NimStringDesc* LOC17;
		LOC17 = 0;
		LOC17 = rstnodetorefname_159049(n);
		y = findref_161142(p, LOC17);
		{
			if (!!((y == NIM_NIL))) goto LA20;
			result = newrstnode_152105(((NU8) 38));
			(*n).Kind = ((NU8) 0);
			add_152183(result, n);
			add_152183(result, y);
		}
		LA20: ;
	}
	break;
	case ((NU8) 64):
	{
	}
	break;
	case ((NU8) 44):
	{
		(*p).Hastoc = NIM_TRUE;
	}
	break;
	default:
	{
		{
			NI i_167945;
			NI HEX3Atmp_167947;
			NI LOC26;
			NI res_167950;
			i_167945 = 0;
			HEX3Atmp_167947 = 0;
			LOC26 = 0;
			LOC26 = len_152084(n);
			HEX3Atmp_167947 = (NI64)(LOC26 - 1);
			res_167950 = 0;
			{
				while (1) {
					if (!(res_167950 <= HEX3Atmp_167947)) goto LA28;
					i_167945 = res_167950;
					asgnRefNoCycle((void**) &(*n).Sons->data[i_167945], resolvesubs_167889(p, (*n).Sons->data[i_167945]));
					res_167950 += 1;
				} LA28: ;
			}
		}
	}
	break;
	}
	BeforeRet: ;
	return result;
}

N_NIMCALL(NI, currind_160601)(trstparser159653* p) {
	NI result;
	result = 0;
	result = (*p).Indentstack->data[((*p).Indentstack->Sup.len-1)];
	return result;
}

N_NIMCALL(void, pushind_160611)(trstparser159653* p, NI ind) {
	(*p).Indentstack = (TY159678*) incrSeq(&((*p).Indentstack)->Sup, sizeof(NI));
	(*p).Indentstack->data[(*p).Indentstack->Sup.len-1] = ind;
}

N_NIMCALL(void, popind_160640)(trstparser159653* p) {
	{
		if (!(1 < (*p).Indentstack->Sup.len)) goto LA3;
		(*p).Indentstack = (TY159678*) setLengthSeq(&((*p).Indentstack)->Sup, sizeof(NI), (NI64)((*p).Indentstack->Sup.len - 1));
	}
	LA3: ;
}

N_NIMCALL(NIM_BOOL, match_161415)(trstparser159653* p, NI start, NimStringDesc* expr) {
	NIM_BOOL result;
	NI i;
	NI j;
	NI last;
	result = 0;
	i = 0;
	j = start;
	last = (NI64)(expr->Sup.len - 1);
	{
		while (1) {
			if (!(i <= last)) goto LA2;
			switch (((NU8)(expr->data[i]))) {
			case 119:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 3));
			}
			break;
			case 32:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 2));
			}
			break;
			case 105:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 1));
			}
			break;
			case 112:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 5));
			}
			break;
			case 97:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 4));
			}
			break;
			case 111:
			{
				result = ((*p).Tok->data[j].Kind == ((NU8) 6));
			}
			break;
			case 84:
			{
				result = NIM_TRUE;
			}
			break;
			case 69:
			{
				result = ((7 &(1<<(((*p).Tok->data[j].Kind)&7)))!=0);
			}
			break;
			case 101:
			{
				NIM_BOOL LOC12;
				LOC12 = 0;
				LOC12 = ((*p).Tok->data[j].Kind == ((NU8) 3));
				if (LOC12) goto LA13;
				LOC12 = eqStrings((*p).Tok->data[j].Symbol, ((NimStringDesc*) &TMP211));
				LA13: ;
				result = LOC12;
				{
					if (!result) goto LA16;
					switch (((NU8)((*p).Tok->data[j].Symbol->data[0]))) {
					case 97 ... 122:
					case 65 ... 90:
					{
						result = ((*p).Tok->data[j].Symbol->Sup.len == 1);
					}
					break;
					case 48 ... 57:
					{
						result = allcharsinset_93279((*p).Tok->data[j].Symbol, TMP212);
					}
					break;
					default:
					{
					}
					break;
					}
				}
				LA16: ;
			}
			break;
			default:
			{
				NIM_CHAR c;
				NI length;
				NIM_BOOL LOC26;
				NIM_BOOL LOC27;
				c = expr->data[i];
				length = 0;
				{
					while (1) {
						NIM_BOOL LOC24;
						LOC24 = 0;
						LOC24 = (i <= last);
						if (!(LOC24)) goto LA25;
						LOC24 = ((NU8)(expr->data[i]) == (NU8)(c));
						LA25: ;
						if (!LOC24) goto LA23;
						i += 1;
						length += 1;
					} LA23: ;
				}
				i -= 1;
				LOC26 = 0;
				LOC27 = 0;
				LOC27 = ((48 &(1<<(((*p).Tok->data[j].Kind)&7)))!=0);
				if (!(LOC27)) goto LA28;
				LOC27 = ((*p).Tok->data[j].Symbol->Sup.len == length);
				LA28: ;
				LOC26 = LOC27;
				if (!(LOC26)) goto LA29;
				LOC26 = ((NU8)((*p).Tok->data[j].Symbol->data[0]) == (NU8)(c));
				LA29: ;
				result = LOC26;
			}
			break;
			}
			{
				if (!!(result)) goto LA32;
				goto BeforeRet;
			}
			LA32: ;
			j += 1;
			i += 1;
		} LA2: ;
	}
	result = NIM_TRUE;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NI, tokenafternewline_164232)(trstparser159653* p) {
	NI result;
	result = 0;
	result = (*p).Idx;
	{
		while (1) {
			switch ((*p).Tok->data[result].Kind) {
			case ((NU8) 0):
			{
				goto LA1;
			}
			break;
			case ((NU8) 1):
			{
				result += 1;
				goto LA1;
			}
			break;
			default:
			{
				result += 1;
			}
			break;
			}
		}
	} LA1: ;
	return result;
}

N_NIMCALL(NIM_BOOL, prednl_164285)(trstparser159653* p) {
	NIM_BOOL result;
	result = 0;
	result = NIM_TRUE;
	{
		NIM_BOOL LOC5;
		NI LOC7;
		if (!(0 < (*p).Idx)) goto LA3;
		LOC5 = 0;
		LOC5 = ((*p).Tok->data[(NI64)((*p).Idx - 1)].Kind == ((NU8) 1));
		if (!(LOC5)) goto LA6;
		LOC7 = 0;
		LOC7 = currind_160601(p);
		LOC5 = ((*p).Tok->data[(NI64)((*p).Idx - 1)].Ival == LOC7);
		LA6: ;
		result = LOC5;
	}
	LA3: ;
	return result;
}

N_NIMCALL(NIM_BOOL, islineblock_164273)(trstparser159653* p) {
	NIM_BOOL result;
	NI j;
	NIM_BOOL LOC1;
	NIM_BOOL LOC2;
	result = 0;
	j = tokenafternewline_164232(p);
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = ((*p).Tok->data[(*p).Idx].Col == (*p).Tok->data[j].Col);
	if (!(LOC2)) goto LA3;
	LOC2 = eqStrings((*p).Tok->data[j].Symbol, ((NimStringDesc*) &TMP221));
	LA3: ;
	LOC1 = LOC2;
	if (LOC1) goto LA4;
	LOC1 = ((*p).Tok->data[(*p).Idx].Col < (*p).Tok->data[j].Col);
	LA4: ;
	result = LOC1;
	return result;
}

N_NIMCALL(void, rstmessage_160400)(trstparser159653* p, NU8 msgkind) {
	NimStringDesc* msg;
	msg = (*(*p).S).Msghandler((*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)].Input, (NI64)((*p).Line + (*p).Tok->data[(*p).Idx].Line), (NI64)((*p).Col + (*p).Tok->data[(*p).Idx].Col), msgkind, (*p).Tok->data[(*p).Idx].Symbol);
	{
		eparseerror159009* e_160407;
		NimStringDesc* LOC5;
		if (!!(msg == 0)) goto LA3;
		e_160407 = 0;
		e_160407 = (eparseerror159009*) newObj((&NTI160341), sizeof(eparseerror159009));
		(*e_160407).Sup.Sup.Sup.Sup.m_type = (&NTI159009);
		LOC5 = 0;
		LOC5 = (*e_160407).Sup.Sup.Sup.message; (*e_160407).Sup.Sup.Sup.message = copyStringRC1(msg);
		if (LOC5) nimGCunrefNoCycle(LOC5);
		raiseException((E_Base*)e_160407, "EParseError");
	}
	LA3: ;
}

N_NIMCALL(NIM_BOOL, isdeflist_164305)(trstparser159653* p) {
	NIM_BOOL result;
	NI j;
	NIM_BOOL LOC1;
	NIM_BOOL LOC2;
	result = 0;
	j = tokenafternewline_164232(p);
	LOC1 = 0;
	LOC2 = 0;
	LOC2 = ((*p).Tok->data[(*p).Idx].Col < (*p).Tok->data[j].Col);
	if (!(LOC2)) goto LA3;
	LOC2 = ((104 &(1<<(((*p).Tok->data[j].Kind)&7)))!=0);
	LA3: ;
	LOC1 = LOC2;
	if (!(LOC1)) goto LA4;
	LOC1 = !(eqStrings((*p).Tok->data[(NI64)(j - 2)].Symbol, ((NimStringDesc*) &TMP217)));
	LA4: ;
	result = LOC1;
	return result;
}

N_NIMCALL(NIM_BOOL, isoptionlist_164331)(trstparser159653* p) {
	NIM_BOOL result;
	NIM_BOOL LOC1;
	NIM_BOOL LOC2;
	NIM_BOOL LOC3;
	result = 0;
	LOC1 = 0;
	LOC2 = 0;
	LOC3 = 0;
	LOC3 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP226));
	if (LOC3) goto LA4;
	LOC3 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP227));
	LA4: ;
	LOC2 = LOC3;
	if (LOC2) goto LA5;
	LOC2 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP228));
	LA5: ;
	LOC1 = LOC2;
	if (LOC1) goto LA6;
	LOC1 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP229));
	LA6: ;
	result = LOC1;
	return result;
}

N_NIMCALL(NU8, whichsection_164341)(trstparser159653* p) {
	NU8 result;
	result = 0;
	switch ((*p).Tok->data[(*p).Idx].Kind) {
	case ((NU8) 4):
	{
		{
			NIM_BOOL LOC4;
			LOC4 = 0;
			LOC4 = match_161415(p, (NI64)((*p).Idx + 1), ((NimStringDesc*) &TMP213));
			if (!LOC4) goto LA5;
			result = ((NU8) 3);
		}
		goto LA2;
		LA5: ;
		{
			NIM_BOOL LOC8;
			LOC8 = 0;
			LOC8 = match_161415(p, (NI64)((*p).Idx + 1), ((NimStringDesc*) &TMP214));
			if (!LOC8) goto LA9;
			result = ((NU8) 29);
		}
		goto LA2;
		LA9: ;
		{
			NIM_BOOL LOC12;
			LOC12 = 0;
			LOC12 = match_161415(p, (NI64)((*p).Idx + 1), ((NimStringDesc*) &TMP215));
			if (!LOC12) goto LA13;
			result = ((NU8) 2);
		}
		goto LA2;
		LA13: ;
		{
			result = ((NU8) 64);
		}
		LA2: ;
	}
	break;
	case ((NU8) 5):
	{
		{
			NI LOC19;
			NIM_BOOL LOC20;
			LOC19 = 0;
			LOC19 = tokenafternewline_164232(p);
			LOC20 = 0;
			LOC20 = match_161415(p, LOC19, ((NimStringDesc*) &TMP216));
			if (!LOC20) goto LA21;
			result = ((NU8) 1);
		}
		goto LA17;
		LA21: ;
		{
			if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP217))) goto LA24;
			result = ((NU8) 24);
		}
		goto LA17;
		LA24: ;
		{
			NIM_BOOL LOC27;
			NIM_BOOL LOC28;
			NIM_BOOL LOC30;
			NIM_BOOL LOC31;
			LOC27 = 0;
			LOC28 = 0;
			LOC28 = prednl_164285(p);
			if (!(LOC28)) goto LA29;
			LOC30 = 0;
			LOC31 = 0;
			LOC31 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP218));
			if (LOC31) goto LA32;
			LOC31 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP219));
			LA32: ;
			LOC30 = LOC31;
			if (LOC30) goto LA33;
			LOC30 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP220));
			LA33: ;
			LOC28 = LOC30;
			LA29: ;
			LOC27 = LOC28;
			if (!(LOC27)) goto LA34;
			LOC27 = ((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 2));
			LA34: ;
			if (!LOC27) goto LA35;
			result = ((NU8) 5);
		}
		goto LA17;
		LA35: ;
		{
			NIM_BOOL LOC38;
			LOC38 = 0;
			LOC38 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP221));
			if (!(LOC38)) goto LA39;
			LOC38 = islineblock_164273(p);
			LA39: ;
			if (!LOC38) goto LA40;
			result = ((NU8) 26);
		}
		goto LA17;
		LA40: ;
		{
			NIM_BOOL LOC43;
			LOC43 = 0;
			LOC43 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP222));
			if (!(LOC43)) goto LA44;
			LOC43 = prednl_164285(p);
			LA44: ;
			if (!LOC43) goto LA45;
			result = ((NU8) 40);
		}
		goto LA17;
		LA45: ;
		{
			NIM_BOOL LOC48;
			LOC48 = 0;
			LOC48 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP223));
			if (!(LOC48)) goto LA49;
			LOC48 = prednl_164285(p);
			LA49: ;
			if (!LOC48) goto LA50;
			result = ((NU8) 13);
		}
		goto LA17;
		LA50: ;
		{
			NIM_BOOL LOC53;
			LOC53 = 0;
			LOC53 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP224));
			if (!LOC53) goto LA54;
			result = ((NU8) 7);
		}
		goto LA17;
		LA54: ;
		{
			NIM_BOOL LOC57;
			LOC57 = 0;
			LOC57 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP225));
			if (!LOC57) goto LA58;
			result = ((NU8) 30);
			rstmessage_160400(p, ((NU8) 2));
		}
		goto LA17;
		LA58: ;
		{
			NIM_BOOL LOC61;
			LOC61 = 0;
			LOC61 = isdeflist_164305(p);
			if (!LOC61) goto LA62;
			result = ((NU8) 9);
		}
		goto LA17;
		LA62: ;
		{
			NIM_BOOL LOC65;
			LOC65 = 0;
			LOC65 = isoptionlist_164331(p);
			if (!LOC65) goto LA66;
			result = ((NU8) 17);
		}
		goto LA17;
		LA66: ;
		{
			result = ((NU8) 4);
		}
		LA17: ;
	}
	break;
	case ((NU8) 3):
	case ((NU8) 6):
	case ((NU8) 2):
	{
		{
			NI LOC72;
			NIM_BOOL LOC73;
			LOC72 = 0;
			LOC72 = tokenafternewline_164232(p);
			LOC73 = 0;
			LOC73 = match_161415(p, LOC72, ((NimStringDesc*) &TMP216));
			if (!LOC73) goto LA74;
			result = ((NU8) 1);
		}
		goto LA70;
		LA74: ;
		{
			NIM_BOOL LOC77;
			LOC77 = 0;
			LOC77 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP230));
			if (LOC77) goto LA78;
			LOC77 = match_161415(p, (*p).Idx, ((NimStringDesc*) &TMP231));
			LA78: ;
			if (!LOC77) goto LA79;
			result = ((NU8) 7);
		}
		goto LA70;
		LA79: ;
		{
			NIM_BOOL LOC82;
			LOC82 = 0;
			LOC82 = isdeflist_164305(p);
			if (!LOC82) goto LA83;
			result = ((NU8) 9);
		}
		goto LA70;
		LA83: ;
		{
			result = ((NU8) 4);
		}
		LA70: ;
	}
	break;
	default:
	{
		result = ((NU8) 64);
	}
	break;
	}
	return result;
}

N_NIMCALL(trstnode152011*, parseliteralblock_164107)(trstparser159653* p) {
	trstnode152011* result;
	trstnode152011* n;
	result = 0;
	result = newrstnode_152105(((NU8) 24));
	n = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP75));
	{
		NI indent;
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA3;
		indent = (*p).Tok->data[(*p).Idx].Ival;
		(*p).Idx += 1;
		{
			while (1) {
				switch ((*p).Tok->data[(*p).Idx].Kind) {
				case ((NU8) 0):
				{
					goto LA5;
				}
				break;
				case ((NU8) 1):
				{
					{
						if (!((*p).Tok->data[(*p).Idx].Ival < indent)) goto LA11;
						goto LA5;
					}
					goto LA9;
					LA11: ;
					{
						NimStringDesc* LOC14;
						(*n).Text = resizeString((*n).Text, 1);
appendString((*n).Text, ((NimStringDesc*) &TMP208));
						LOC14 = 0;
						LOC14 = nsuRepeatChar((NI64)((*p).Tok->data[(*p).Idx].Ival - indent), 32);
						(*n).Text = resizeString((*n).Text, LOC14->Sup.len + 0);
appendString((*n).Text, LOC14);
						(*p).Idx += 1;
					}
					LA9: ;
				}
				break;
				default:
				{
					(*n).Text = resizeString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol);
					(*p).Idx += 1;
				}
				break;
				}
			}
		} LA5: ;
	}
	goto LA1;
	LA3: ;
	{
		{
			while (1) {
				if (!!(((3 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0))) goto LA18;
				(*n).Text = resizeString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol);
				(*p).Idx += 1;
			} LA18: ;
		}
	}
	LA1: ;
	add_152183(result, n);
	return result;
}

N_NIMCALL(trstnode152011*, parsebulletlist_165634)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = NIM_NIL;
	{
		NimStringDesc* bullet;
		NI col;
		if (!((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 2))) goto LA3;
		bullet = copyString((*p).Tok->data[(*p).Idx].Symbol);
		col = (*p).Tok->data[(*p).Idx].Col;
		result = newrstnode_152105(((NU8) 5));
		pushind_160611(p, (*p).Tok->data[(NI64)((*p).Idx + 2)].Col);
		(*p).Idx += 2;
		{
			while (1) {
				trstnode152011* item;
				item = newrstnode_152105(((NU8) 6));
				parsesection_163119(p, item);
				add_152183(result, item);
				{
					NIM_BOOL LOC9;
					NIM_BOOL LOC10;
					NIM_BOOL LOC11;
					LOC9 = 0;
					LOC10 = 0;
					LOC11 = 0;
					LOC11 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
					if (!(LOC11)) goto LA12;
					LOC11 = ((*p).Tok->data[(*p).Idx].Ival == col);
					LA12: ;
					LOC10 = LOC11;
					if (!(LOC10)) goto LA13;
					LOC10 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, bullet);
					LA13: ;
					LOC9 = LOC10;
					if (!(LOC9)) goto LA14;
					LOC9 = ((*p).Tok->data[(NI64)((*p).Idx + 2)].Kind == ((NU8) 2));
					LA14: ;
					if (!LOC9) goto LA15;
					(*p).Idx += 3;
				}
				goto LA7;
				LA15: ;
				{
					goto LA5;
				}
				LA7: ;
			}
		} LA5: ;
		popind_160640(p);
	}
	LA3: ;
	return result;
}

N_NIMCALL(trstnode152011*, parselineblock_164360)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = NIM_NIL;
	{
		NI col;
		if (!((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 2))) goto LA3;
		col = (*p).Tok->data[(*p).Idx].Col;
		result = newrstnode_152105(((NU8) 26));
		pushind_160611(p, (*p).Tok->data[(NI64)((*p).Idx + 2)].Col);
		(*p).Idx += 2;
		{
			while (1) {
				trstnode152011* item;
				item = newrstnode_152105(((NU8) 27));
				parsesection_163119(p, item);
				add_152183(result, item);
				{
					NIM_BOOL LOC9;
					NIM_BOOL LOC10;
					NIM_BOOL LOC11;
					LOC9 = 0;
					LOC10 = 0;
					LOC11 = 0;
					LOC11 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
					if (!(LOC11)) goto LA12;
					LOC11 = ((*p).Tok->data[(*p).Idx].Ival == col);
					LA12: ;
					LOC10 = LOC11;
					if (!(LOC10)) goto LA13;
					LOC10 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP221));
					LA13: ;
					LOC9 = LOC10;
					if (!(LOC9)) goto LA14;
					LOC9 = ((*p).Tok->data[(NI64)((*p).Idx + 2)].Kind == ((NU8) 2));
					LA14: ;
					if (!LOC9) goto LA15;
					(*p).Idx += 3;
				}
				goto LA7;
				LA15: ;
				{
					goto LA5;
				}
				LA7: ;
			}
		} LA5: ;
		popind_160640(p);
	}
	LA3: ;
	return result;
}

N_NIMCALL(NimStringDesc*, getdirective_162729)(trstparser159653* p) {
	NimStringDesc* result;
	result = 0;
	{
		NIM_BOOL LOC3;
		NI j;
		LOC3 = 0;
		LOC3 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2));
		if (!(LOC3)) goto LA4;
		LOC3 = ((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 3));
		LA4: ;
		if (!LOC3) goto LA5;
		j = (*p).Idx;
		(*p).Idx += 1;
		result = copyString((*p).Tok->data[(*p).Idx].Symbol);
		(*p).Idx += 1;
		{
			while (1) {
				if (!((120 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0)) goto LA8;
				{
					if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP217))) goto LA11;
					goto LA7;
				}
				LA11: ;
				result = resizeString(result, (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString(result, (*p).Tok->data[(*p).Idx].Symbol);
				(*p).Idx += 1;
			} LA8: ;
		} LA7: ;
		{
			if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA15;
			(*p).Idx += 1;
		}
		LA15: ;
		{
			if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP217))) goto LA19;
			(*p).Idx += 1;
			{
				if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA23;
				(*p).Idx += 1;
			}
			LA23: ;
		}
		goto LA17;
		LA19: ;
		{
			(*p).Idx = j;
			result = copyString(((NimStringDesc*) &TMP75));
		}
		LA17: ;
	}
	goto LA1;
	LA5: ;
	{
		result = copyString(((NimStringDesc*) &TMP75));
	}
	LA1: ;
	return result;
}

static N_INLINE(NI, find_162996)(TY162984 a_163001, NimStringDesc* item_163003) {
	NI result;
	result = 0;
	{
		NimStringDesc* i_163047;
		NI i_163063;
		i_163047 = 0;
		i_163063 = 0;
		{
			if (!(((NI) (i_163063)) <= 12)) goto LA4;
			{
				while (1) {
					i_163047 = a_163001[(i_163063)- 0];
					{
						if (!eqStrings(i_163047, item_163003)) goto LA10;
						goto BeforeRet;
					}
					LA10: ;
					result += 1;
					{
						if (!(12 <= ((NI) (i_163063)))) goto LA14;
						goto LA6;
					}
					LA14: ;
					i_163063 += 1;
				}
			} LA6: ;
		}
		LA4: ;
	}
	result = -1;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NU8, getdirkind_162991)(NimStringDesc* s) {
	NU8 result;
	NI i;
	result = 0;
	i = find_162996(dirids_162983, s);
	{
		if (!(0 <= i)) goto LA3;
		result = ((NU8) (i));
	}
	goto LA1;
	LA3: ;
	{
		result = ((NU8) 0);
	}
	LA1: ;
	return result;
}

N_NIMCALL(trstnode152011*, newleaf_161182)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = newrstnode_152151(((NU8) 64), (*p).Tok->data[(*p).Idx].Symbol);
	return result;
}

N_NIMCALL(NIM_BOOL, isinlinemarkupstart_161358)(trstparser159653* p, NimStringDesc* markup) {
	NIM_BOOL result;
	NIM_CHAR d;
	NIM_BOOL LOC5;
	NIM_BOOL LOC6;
	result = 0;
	d = 0;
	result = eqStrings((*p).Tok->data[(*p).Idx].Symbol, markup);
	{
		if (!!(result)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	LOC5 = 0;
	LOC6 = 0;
	LOC6 = ((*p).Idx == 0);
	if (LOC6) goto LA7;
	LOC6 = ((6 &(1<<(((*p).Tok->data[(NI64)((*p).Idx - 1)].Kind)&7)))!=0);
	LA7: ;
	LOC5 = LOC6;
	if (LOC5) goto LA8;
	LOC5 = ((TMP244[((NU8)((*p).Tok->data[(NI64)((*p).Idx - 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*p).Tok->data[(NI64)((*p).Idx - 1)].Symbol->data[0]))%8)))!=0);
	LA8: ;
	result = LOC5;
	{
		if (!!(result)) goto LA11;
		goto BeforeRet;
	}
	LA11: ;
	result = !(((7 &(1<<(((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind)&7)))!=0));
	{
		if (!!(result)) goto LA15;
		goto BeforeRet;
	}
	LA15: ;
	{
		if (!(0 < (*p).Idx)) goto LA19;
		{
			if (!eqStrings((*p).Tok->data[(NI64)((*p).Idx - 1)].Symbol, ((NimStringDesc*) &TMP245))) goto LA23;
			result = NIM_FALSE;
		}
		goto LA21;
		LA23: ;
		{
			NIM_CHAR c;
			c = (*p).Tok->data[(NI64)((*p).Idx - 1)].Symbol->data[0];
			switch (((NU8)(c))) {
			case 39:
			case 34:
			{
				d = c;
			}
			break;
			case 40:
			{
				d = 41;
			}
			break;
			case 91:
			{
				d = 93;
			}
			break;
			case 123:
			{
				d = 125;
			}
			break;
			case 60:
			{
				d = 62;
			}
			break;
			default:
			{
				d = 0;
			}
			break;
			}
			{
				if (!!(((NU8)(d) == (NU8)(0)))) goto LA34;
				result = !(((NU8)((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol->data[0]) == (NU8)(d)));
			}
			LA34: ;
		}
		LA21: ;
	}
	LA19: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NIM_BOOL, isinlinemarkupend_161304)(trstparser159653* p, NimStringDesc* markup) {
	NIM_BOOL result;
	NIM_BOOL LOC9;
	result = 0;
	result = eqStrings((*p).Tok->data[(*p).Idx].Symbol, markup);
	{
		if (!!(result)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	result = !(((6 &(1<<(((*p).Tok->data[(NI64)((*p).Idx - 1)].Kind)&7)))!=0));
	{
		if (!!(result)) goto LA7;
		goto BeforeRet;
	}
	LA7: ;
	LOC9 = 0;
	LOC9 = ((7 &(1<<(((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind)&7)))!=0);
	if (LOC9) goto LA10;
	LOC9 = ((TMP247[((NU8)((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol->data[0]))/8] &(1<<(((NU8)((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol->data[0]))%8)))!=0);
	LA10: ;
	result = LOC9;
	{
		if (!!(result)) goto LA13;
		goto BeforeRet;
	}
	LA13: ;
	{
		if (!(0 < (*p).Idx)) goto LA17;
		{
			NIM_BOOL LOC21;
			LOC21 = 0;
			LOC21 = !(eqStrings(markup, ((NimStringDesc*) &TMP248)));
			if (!(LOC21)) goto LA22;
			LOC21 = eqStrings((*p).Tok->data[(NI64)((*p).Idx - 1)].Symbol, ((NimStringDesc*) &TMP245));
			LA22: ;
			if (!LOC21) goto LA23;
			result = NIM_FALSE;
		}
		LA23: ;
	}
	LA17: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(void, parsebackslash_162149)(trstparser159653* p, trstnode152011* father) {
	{
		trstnode152011* LOC5;
		if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP249))) goto LA3;
		LOC5 = 0;
		LOC5 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP245));
		add_152183(father, LOC5);
		(*p).Idx += 1;
	}
	goto LA1;
	LA3: ;
	{
		if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP245))) goto LA7;
		(*p).Idx += 1;
		{
			trstnode152011* LOC13;
			if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2)))) goto LA11;
			LOC13 = 0;
			LOC13 = newleaf_161182(p);
			add_152183(father, LOC13);
		}
		LA11: ;
		{
			if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 0)))) goto LA16;
			(*p).Idx += 1;
		}
		LA16: ;
	}
	goto LA1;
	LA7: ;
	{
		trstnode152011* LOC19;
		LOC19 = 0;
		LOC19 = newleaf_161182(p);
		add_152183(father, LOC19);
		(*p).Idx += 1;
	}
	LA1: ;
}

N_NIMCALL(void, rstmessage_160365)(trstparser159653* p, NU8 msgkind, NimStringDesc* arg, NI line, NI col) {
	NimStringDesc* msg;
	msg = (*(*p).S).Msghandler((*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)].Input, (NI64)((*p).Line + line), (NI64)((*p).Col + col), msgkind, arg);
	{
		eparseerror159009* e_160375;
		NimStringDesc* LOC5;
		if (!!(msg == 0)) goto LA3;
		e_160375 = 0;
		e_160375 = (eparseerror159009*) newObj((&NTI160341), sizeof(eparseerror159009));
		(*e_160375).Sup.Sup.Sup.Sup.m_type = (&NTI159009);
		LOC5 = 0;
		LOC5 = (*e_160375).Sup.Sup.Sup.message; (*e_160375).Sup.Sup.Sup.message = copyStringRC1(msg);
		if (LOC5) nimGCunrefNoCycle(LOC5);
		raiseException((E_Base*)e_160375, "EParseError");
	}
	LA3: ;
}

N_NIMCALL(void, parseuntil_162401)(trstparser159653* p, trstnode152011* father, NimStringDesc* postfix, NIM_BOOL interpretbackslash) {
	NI line;
	NI col;
	line = (*p).Tok->data[(*p).Idx].Line;
	col = (*p).Tok->data[(*p).Idx].Col;
	(*p).Idx += 1;
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 5):
			{
				{
					NIM_BOOL LOC6;
					LOC6 = 0;
					LOC6 = isinlinemarkupend_161304(&(*p), postfix);
					if (!LOC6) goto LA7;
					(*p).Idx += 1;
					goto LA1;
				}
				goto LA4;
				LA7: ;
				{
					if (!interpretbackslash) goto LA10;
					parsebackslash_162149(p, father);
				}
				goto LA4;
				LA10: ;
				{
					trstnode152011* LOC13;
					LOC13 = 0;
					LOC13 = newleaf_161182(p);
					add_152183(father, LOC13);
					(*p).Idx += 1;
				}
				LA4: ;
			}
			break;
			case ((NU8) 4):
			case ((NU8) 3):
			case ((NU8) 6):
			{
				trstnode152011* LOC15;
				LOC15 = 0;
				LOC15 = newleaf_161182(p);
				add_152183(father, LOC15);
				(*p).Idx += 1;
			}
			break;
			case ((NU8) 1):
			{
				trstnode152011* LOC17;
				LOC17 = 0;
				LOC17 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP250));
				add_152183(father, LOC17);
				(*p).Idx += 1;
				{
					if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA20;
					rstmessage_160365(&(*p), ((NU8) 1), postfix, line, col);
					goto LA1;
				}
				LA20: ;
			}
			break;
			case ((NU8) 2):
			{
				trstnode152011* LOC23;
				LOC23 = 0;
				LOC23 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP250));
				add_152183(father, LOC23);
				(*p).Idx += 1;
			}
			break;
			default:
			{
				rstmessage_160365(&(*p), ((NU8) 1), postfix, line, col);
				goto LA1;
			}
			break;
			}
		}
	} LA1: ;
}

N_NIMCALL(trstnode152011*, parsemarkdowncodeblock_162504)(trstparser159653* p) {
	trstnode152011* result;
	trstnode152011* args;
	trstnode152011* n;
	trstnode152011* lb;
	result = 0;
	args = newrstnode_152105(((NU8) 41));
	{
		trstnode152011* LOC5;
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 3))) goto LA3;
		LOC5 = 0;
		LOC5 = newleaf_161182(p);
		add_152183(args, LOC5);
		(*p).Idx += 1;
	}
	goto LA1;
	LA3: ;
	{
		args = NIM_NIL;
	}
	LA1: ;
	n = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP75));
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 0):
			{
				rstmessage_160332(&(*p), ((NU8) 1), ((NimStringDesc*) &TMP252));
				goto LA7;
			}
			break;
			case ((NU8) 5):
			{
				{
					if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP252))) goto LA13;
					(*p).Idx += 1;
					goto LA7;
				}
				goto LA11;
				LA13: ;
				{
					(*n).Text = resizeString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol);
					(*p).Idx += 1;
				}
				LA11: ;
			}
			break;
			default:
			{
				(*n).Text = resizeString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString((*n).Text, (*p).Tok->data[(*p).Idx].Symbol);
				(*p).Idx += 1;
			}
			break;
			}
		}
	} LA7: ;
	lb = newrstnode_152105(((NU8) 24));
	add_152183(lb, n);
	result = newrstnode_152105(((NU8) 47));
	add_152183(result, args);
	add_152183(result, NIM_NIL);
	add_152183(result, lb);
	return result;
}

N_NIMCALL(void, fixupembeddedref_161598)(trstnode152011* n, trstnode152011* a, trstnode152011* b) {
	NI sep;
	NI incr;
	sep = -1;
	{
		NI i_161615;
		NI HEX3Atmp_161645;
		NI LOC2;
		NI res_161648;
		i_161615 = 0;
		HEX3Atmp_161645 = 0;
		LOC2 = 0;
		LOC2 = len_152084(n);
		HEX3Atmp_161645 = (NI64)(LOC2 - 2);
		res_161648 = HEX3Atmp_161645;
		{
			while (1) {
				if (!(0 <= res_161648)) goto LA4;
				i_161615 = res_161648;
				{
					if (!eqStrings((*(*n).Sons->data[i_161615]).Text, ((NimStringDesc*) &TMP256))) goto LA7;
					sep = i_161615;
					goto LA1;
				}
				LA7: ;
				res_161648 -= 1;
			} LA4: ;
		}
	} LA1: ;
	{
		NIM_BOOL LOC11;
		LOC11 = 0;
		LOC11 = (0 < sep);
		if (!(LOC11)) goto LA12;
		LOC11 = ((NU8)((*(*n).Sons->data[(NI64)(sep - 1)]).Text->data[0]) == (NU8)(32));
		LA12: ;
		if (!LOC11) goto LA13;
		incr = 2;
	}
	goto LA9;
	LA13: ;
	{
		incr = 1;
	}
	LA9: ;
	{
		NI i_161630;
		NI HEX3Atmp_161650;
		NI res_161653;
		i_161630 = 0;
		HEX3Atmp_161650 = 0;
		HEX3Atmp_161650 = (NI64)(sep - incr);
		res_161653 = 0;
		{
			while (1) {
				if (!(res_161653 <= HEX3Atmp_161650)) goto LA18;
				i_161630 = res_161653;
				add_152183(a, (*n).Sons->data[i_161630]);
				res_161653 += 1;
			} LA18: ;
		}
	}
	{
		NI i_161643;
		NI HEX3Atmp_161656;
		NI HEX3Atmp_161657;
		NI LOC20;
		NI res_161660;
		i_161643 = 0;
		HEX3Atmp_161656 = 0;
		HEX3Atmp_161657 = 0;
		HEX3Atmp_161656 = (NI64)(sep + 1);
		LOC20 = 0;
		LOC20 = len_152084(n);
		HEX3Atmp_161657 = (NI64)(LOC20 - 2);
		res_161660 = HEX3Atmp_161656;
		{
			while (1) {
				if (!(res_161660 <= HEX3Atmp_161657)) goto LA22;
				i_161643 = res_161660;
				add_152183(b, (*n).Sons->data[i_161643]);
				res_161660 += 1;
			} LA22: ;
		}
	}
}

N_NIMCALL(void, setref_161074)(trstparser159653* p, NimStringDesc* key, trstnode152011* value) {
	NI length;
	NimStringDesc* LOC14;
	length = (*(*p).S).Refs->Sup.len;
	{
		NI i_161104;
		NI HEX3Atmp_161122;
		NI res_161125;
		i_161104 = 0;
		HEX3Atmp_161122 = 0;
		HEX3Atmp_161122 = (NI64)(length - 1);
		res_161125 = 0;
		{
			while (1) {
				if (!(res_161125 <= HEX3Atmp_161122)) goto LA3;
				i_161104 = res_161125;
				{
					if (!eqStrings(key, (*(*p).S).Refs->data[i_161104].Key)) goto LA6;
					{
						NimStringDesc* LOC10;
						NimStringDesc* LOC11;
						LOC10 = 0;
						LOC10 = addnodes_159055((*(*p).S).Refs->data[i_161104].Value);
						LOC11 = 0;
						LOC11 = addnodes_159055(value);
						if (!!(eqStrings(LOC10, LOC11))) goto LA12;
						rstmessage_160332(&(*p), ((NU8) 7), key);
					}
					LA12: ;
					asgnRefNoCycle((void**) &(*(*p).S).Refs->data[i_161104].Value, value);
					goto BeforeRet;
				}
				LA6: ;
				res_161125 += 1;
			} LA3: ;
		}
	}
	(*(*p).S).Refs = (TY159667*) setLengthSeq(&((*(*p).S).Refs)->Sup, sizeof(tsubstitution159641), (NI64)(length + 1));
	LOC14 = 0;
	LOC14 = (*(*p).S).Refs->data[length].Key; (*(*p).S).Refs->data[length].Key = copyStringRC1(key);
	if (LOC14) nimGCunrefNoCycle(LOC14);
	asgnRefNoCycle((void**) &(*(*p).S).Refs->data[length].Value, value);
	BeforeRet: ;
}

N_NIMCALL(trstnode152011*, parsepostfix_161695)(trstparser159653* p, trstnode152011* n) {
	trstnode152011* result;
	result = 0;
	result = n;
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = isinlinemarkupend_161304(&(*p), ((NimStringDesc*) &TMP254));
		if (!LOC3) goto LA4;
		(*p).Idx += 1;
		{
			NIM_BOOL LOC8;
			trstnode152011* a;
			trstnode152011* b;
			LOC8 = 0;
			LOC8 = eqStrings((*p).Tok->data[(NI64)((*p).Idx - 2)].Symbol, ((NimStringDesc*) &TMP253));
			if (!(LOC8)) goto LA9;
			LOC8 = eqStrings((*p).Tok->data[(NI64)((*p).Idx - 3)].Symbol, ((NimStringDesc*) &TMP255));
			LA9: ;
			if (!LOC8) goto LA10;
			a = newrstnode_152105(((NU8) 0));
			b = newrstnode_152105(((NU8) 0));
			fixupembeddedref_161598(n, a, b);
			{
				NI LOC14;
				LOC14 = 0;
				LOC14 = len_152084(a);
				if (!(LOC14 == 0)) goto LA15;
				result = newrstnode_152105(((NU8) 37));
				add_152183(result, b);
			}
			goto LA12;
			LA15: ;
			{
				NimStringDesc* LOC18;
				result = newrstnode_152105(((NU8) 38));
				add_152183(result, a);
				add_152183(result, b);
				LOC18 = 0;
				LOC18 = rstnodetorefname_159049(a);
				setref_161074(p, LOC18, b);
			}
			LA12: ;
		}
		goto LA6;
		LA10: ;
		{
			if (!((*n).Kind == ((NU8) 60))) goto LA20;
			(*n).Kind = ((NU8) 39);
		}
		goto LA6;
		LA20: ;
		{
			result = newrstnode_152105(((NU8) 39));
			add_152183(result, n);
		}
		LA6: ;
	}
	goto LA1;
	LA4: ;
	{
		NIM_BOOL LOC24;
		LOC24 = 0;
		LOC24 = match_161415(&(*p), (*p).Idx, ((NimStringDesc*) &TMP223));
		if (!LOC24) goto LA25;
		{
			if (!eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP257))) goto LA29;
			(*n).Kind = ((NU8) 56);
		}
		goto LA27;
		LA29: ;
		{
			if (!eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP258))) goto LA32;
			(*n).Kind = ((NU8) 61);
		}
		goto LA27;
		LA32: ;
		{
			if (!eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP259))) goto LA35;
			(*n).Kind = ((NU8) 58);
		}
		goto LA27;
		LA35: ;
		{
			if (!eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP260))) goto LA38;
			(*n).Kind = ((NU8) 57);
		}
		goto LA27;
		LA38: ;
		{
			NIM_BOOL LOC41;
			LOC41 = 0;
			LOC41 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP261));
			if (LOC41) goto LA42;
			LOC41 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP262));
			LA42: ;
			if (!LOC41) goto LA43;
			(*n).Kind = ((NU8) 54);
		}
		goto LA27;
		LA43: ;
		{
			NIM_BOOL LOC46;
			LOC46 = 0;
			LOC46 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP263));
			if (LOC46) goto LA47;
			LOC46 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP264));
			LA47: ;
			if (!LOC46) goto LA48;
			(*n).Kind = ((NU8) 55);
		}
		goto LA27;
		LA48: ;
		{
			trstnode152011* LOC51;
			result = newrstnode_152105(((NU8) 53));
			(*n).Kind = ((NU8) 0);
			add_152183(result, n);
			LOC51 = 0;
			LOC51 = newrstnode_152151(((NU8) 64), (*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol);
			add_152183(result, LOC51);
		}
		LA27: ;
		(*p).Idx += 3;
	}
	goto LA1;
	LA25: ;
	LA1: ;
	return result;
}

N_NIMCALL(NI, matchverbatim_161742)(trstparser159653* p, NI start, NimStringDesc* expr) {
	NI result;
	NI j;
	result = 0;
	result = start;
	j = 0;
	{
		while (1) {
			NIM_BOOL LOC3;
			NIM_BOOL LOC4;
			LOC3 = 0;
			LOC4 = 0;
			LOC4 = (j < expr->Sup.len);
			if (!(LOC4)) goto LA5;
			LOC4 = (result < (*p).Tok->Sup.len);
			LA5: ;
			LOC3 = LOC4;
			if (!(LOC3)) goto LA6;
			LOC3 = nsuContinuesWith(expr, (*p).Tok->data[result].Symbol, j);
			LA6: ;
			if (!LOC3) goto LA2;
			j += (*p).Tok->data[result].Symbol->Sup.len;
			result += 1;
		} LA2: ;
	}
	{
		if (!(j < expr->Sup.len)) goto LA9;
		result = 0;
	}
	LA9: ;
	return result;
}

N_NIMCALL(trstnode152011*, parsesmiley_161800)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	{
		if (!!((((NU8)((*p).Tok->data[(*p).Idx].Symbol->data[0])) == ((NU8)(58)) || ((NU8)((*p).Tok->data[(*p).Idx].Symbol->data[0])) == ((NU8)(59)) || ((NU8)((*p).Tok->data[(*p).Idx].Symbol->data[0])) == ((NU8)(56))))) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		NimStringDesc* key_161861;
		NimStringDesc* val_161862;
		NI i_161868;
		key_161861 = 0;
		val_161862 = 0;
		i_161868 = 0;
		{
			if (!(((NI) (i_161868)) <= 33)) goto LA8;
			{
				while (1) {
					NI m;
					key_161861 = smilies_159081[(i_161868)- 0].Field0;
					val_161862 = smilies_159081[(i_161868)- 0].Field1;
					m = matchverbatim_161742(&(*p), (*p).Idx, key_161861);
					{
						NimStringDesc* LOC16;
						if (!(0 < m)) goto LA14;
						(*p).Idx = m;
						result = newrstnode_152105(((NU8) 63));
						LOC16 = 0;
						LOC16 = (*result).Text; (*result).Text = copyStringRC1(val_161862);
						if (LOC16) nimGCunrefNoCycle(LOC16);
						goto BeforeRet;
					}
					LA14: ;
					{
						if (!(33 <= ((NI) (i_161868)))) goto LA19;
						goto LA10;
					}
					LA19: ;
					i_161868 += 1;
				}
			} LA10: ;
		}
		LA8: ;
	}
	BeforeRet: ;
	return result;
}

static N_INLINE(NI, find_162031)(NimStringDesc** a_162036, NI a_162036Len0, NimStringDesc* item_162038) {
	NI result;
	result = 0;
	{
		NimStringDesc* i_162051;
		NI i_162067;
		i_162051 = 0;
		i_162067 = 0;
		{
			while (1) {
				if (!(i_162067 < a_162036Len0)) goto LA3;
				i_162051 = a_162036[i_162067];
				{
					if (!eqStrings(i_162051, item_162038)) goto LA6;
					goto BeforeRet;
				}
				LA6: ;
				result += 1;
				i_162067 += 1;
			} LA3: ;
		}
	}
	result = -1;
	BeforeRet: ;
	return result;
}

static N_INLINE(NIM_BOOL, contains_162019)(NimStringDesc** a_162025, NI a_162025Len0, NimStringDesc* item_162028) {
	NIM_BOOL result;
	NI LOC1;
	result = 0;
	LOC1 = 0;
	LOC1 = find_162031(a_162025, a_162025Len0, item_162028);
	result = (0 <= LOC1);
	goto BeforeRet;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NIM_BOOL, isurl_162001)(trstparser159653* p, NI i) {
	NIM_BOOL result;
	NIM_BOOL LOC1;
	NIM_BOOL LOC2;
	NIM_BOOL LOC3;
	result = 0;
	LOC1 = 0;
	LOC2 = 0;
	LOC3 = 0;
	LOC3 = eqStrings((*p).Tok->data[(NI64)(i + 1)].Symbol, ((NimStringDesc*) &TMP323));
	if (!(LOC3)) goto LA4;
	LOC3 = eqStrings((*p).Tok->data[(NI64)(i + 2)].Symbol, ((NimStringDesc*) &TMP324));
	LA4: ;
	LOC2 = LOC3;
	if (!(LOC2)) goto LA5;
	LOC2 = ((*p).Tok->data[(NI64)(i + 3)].Kind == ((NU8) 3));
	LA5: ;
	LOC1 = LOC2;
	if (!(LOC1)) goto LA6;
	LOC1 = contains_162019(TMP325, 5, (*p).Tok->data[i].Symbol);
	LA6: ;
	result = LOC1;
	return result;
}

N_NIMCALL(void, parseurl_162091)(trstparser159653* p, trstnode152011* father) {
	{
		NIM_BOOL LOC3;
		trstnode152011* n;
		LOC3 = 0;
		LOC3 = isurl_162001(&(*p), (*p).Idx);
		if (!LOC3) goto LA4;
		n = newrstnode_152105(((NU8) 37));
		{
			while (1) {
				trstnode152011* LOC15;
				switch ((*p).Tok->data[(*p).Idx].Kind) {
				case ((NU8) 3):
				case ((NU8) 4):
				case ((NU8) 6):
				{
				}
				break;
				case ((NU8) 5):
				{
					{
						if (!!(((120 &(1<<(((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind)&7)))!=0))) goto LA12;
						goto LA6;
					}
					LA12: ;
				}
				break;
				default:
				{
					goto LA6;
				}
				break;
				}
				LOC15 = 0;
				LOC15 = newleaf_161182(p);
				add_152183(n, LOC15);
				(*p).Idx += 1;
			}
		} LA6: ;
		add_152183(father, n);
	}
	goto LA1;
	LA4: ;
	{
		trstnode152011* n;
		n = newleaf_161182(p);
		(*p).Idx += 1;
		{
			if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP254))) goto LA19;
			n = parsepostfix_161695(p, n);
		}
		LA19: ;
		add_152183(father, n);
	}
	LA1: ;
}

N_NIMCALL(void, parseinline_162582)(trstparser159653* p, trstnode152011* father) {
	switch ((*p).Tok->data[(*p).Idx].Kind) {
	case ((NU8) 5):
	{
		{
			NIM_BOOL LOC4;
			trstnode152011* n;
			LOC4 = 0;
			LOC4 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP246));
			if (!LOC4) goto LA5;
			n = newrstnode_152105(((NU8) 59));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP246), NIM_TRUE);
			add_152183(father, n);
		}
		goto LA2;
		LA5: ;
		{
			NIM_BOOL LOC8;
			trstnode152011* n;
			LOC8 = 0;
			LOC8 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP251));
			if (!LOC8) goto LA9;
			n = newrstnode_152105(((NU8) 58));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP251), NIM_TRUE);
			add_152183(father, n);
		}
		goto LA2;
		LA9: ;
		{
			NIM_BOOL LOC12;
			trstnode152011* n;
			LOC12 = 0;
			LOC12 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP219));
			if (!LOC12) goto LA13;
			n = newrstnode_152105(((NU8) 57));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP219), NIM_TRUE);
			add_152183(father, n);
		}
		goto LA2;
		LA13: ;
		{
			NIM_BOOL LOC16;
			trstnode152011* LOC20;
			LOC16 = 0;
			LOC16 = (((*(*p).S).Options &(1<<((((NU8) 3))&7)))!=0);
			if (!(LOC16)) goto LA17;
			LOC16 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP252));
			LA17: ;
			if (!LOC16) goto LA18;
			(*p).Idx += 1;
			LOC20 = 0;
			LOC20 = parsemarkdowncodeblock_162504(p);
			add_152183(father, LOC20);
		}
		goto LA2;
		LA18: ;
		{
			NIM_BOOL LOC22;
			trstnode152011* n;
			LOC22 = 0;
			LOC22 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP248));
			if (!LOC22) goto LA23;
			n = newrstnode_152105(((NU8) 61));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP248), NIM_FALSE);
			add_152183(father, n);
		}
		goto LA2;
		LA23: ;
		{
			NIM_BOOL LOC26;
			trstnode152011* n;
			LOC26 = 0;
			LOC26 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP253));
			if (!LOC26) goto LA27;
			n = newrstnode_152105(((NU8) 60));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP253), NIM_TRUE);
			n = parsepostfix_161695(p, n);
			add_152183(father, n);
		}
		goto LA2;
		LA27: ;
		{
			NIM_BOOL LOC30;
			trstnode152011* n;
			LOC30 = 0;
			LOC30 = isinlinemarkupstart_161358(&(*p), ((NimStringDesc*) &TMP221));
			if (!LOC30) goto LA31;
			n = newrstnode_152105(((NU8) 62));
			parseuntil_162401(p, n, ((NimStringDesc*) &TMP221), NIM_FALSE);
			add_152183(father, n);
		}
		goto LA2;
		LA31: ;
		{
			{
				trstnode152011* n;
				if (!(((*(*p).S).Options &(1<<((((NU8) 1))&7)))!=0)) goto LA36;
				n = parsesmiley_161800(p);
				{
					if (!!((n == NIM_NIL))) goto LA40;
					add_152183(father, n);
					goto BeforeRet;
				}
				LA40: ;
			}
			LA36: ;
			parsebackslash_162149(p, father);
		}
		LA2: ;
	}
	break;
	case ((NU8) 3):
	{
		{
			trstnode152011* n;
			if (!(((*(*p).S).Options &(1<<((((NU8) 1))&7)))!=0)) goto LA45;
			n = parsesmiley_161800(p);
			{
				if (!!((n == NIM_NIL))) goto LA49;
				add_152183(father, n);
				goto BeforeRet;
			}
			LA49: ;
		}
		LA45: ;
		parseurl_162091(p, father);
	}
	break;
	case ((NU8) 4):
	case ((NU8) 6):
	case ((NU8) 2):
	{
		trstnode152011* LOC60;
		{
			trstnode152011* n;
			if (!(((*(*p).S).Options &(1<<((((NU8) 1))&7)))!=0)) goto LA54;
			n = parsesmiley_161800(p);
			{
				if (!!((n == NIM_NIL))) goto LA58;
				add_152183(father, n);
				goto BeforeRet;
			}
			LA58: ;
		}
		LA54: ;
		LOC60 = 0;
		LOC60 = newleaf_161182(p);
		add_152183(father, LOC60);
		(*p).Idx += 1;
	}
	break;
	default:
	{
	}
	break;
	}
	BeforeRet: ;
}

N_NIMCALL(void, parseline_163083)(trstparser159653* p, trstnode152011* father) {
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 2):
			case ((NU8) 3):
			case ((NU8) 6):
			case ((NU8) 5):
			{
				parseinline_162582(p, father);
			}
			break;
			default:
			{
				goto LA1;
			}
			break;
			}
		}
	} LA1: ;
}

N_NIMCALL(trstnode152011*, parsefield_163127)(trstparser159653* p) {
	trstnode152011* result;
	NI col;
	trstnode152011* fieldname;
	trstnode152011* fieldbody;
	result = 0;
	result = newrstnode_152105(((NU8) 14));
	col = (*p).Tok->data[(*p).Idx].Col;
	fieldname = newrstnode_152105(((NU8) 15));
	parseuntil_162401(p, fieldname, ((NimStringDesc*) &TMP323), NIM_FALSE);
	fieldbody = newrstnode_152105(((NU8) 16));
	{
		if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1)))) goto LA3;
		parseline_163083(p, fieldbody);
	}
	LA3: ;
	{
		NI indent;
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA7;
		indent = (*p).Tok->data[(*p).Idx].Ival;
		{
			if (!(col < indent)) goto LA11;
			pushind_160611(p, indent);
			parsesection_163119(p, fieldbody);
			popind_160640(p);
		}
		LA11: ;
	}
	LA7: ;
	add_152183(result, fieldname);
	add_152183(result, fieldbody);
	return result;
}

N_NIMCALL(trstnode152011*, parsefields_163161)(trstparser159653* p) {
	trstnode152011* result;
	NIM_BOOL atstart;
	NIM_BOOL LOC1;
	result = 0;
	result = NIM_NIL;
	LOC1 = 0;
	LOC1 = ((*p).Idx == 0);
	if (!(LOC1)) goto LA2;
	LOC1 = eqStrings((*p).Tok->data[0].Symbol, ((NimStringDesc*) &TMP323));
	LA2: ;
	atstart = LOC1;
	{
		NIM_BOOL LOC5;
		NIM_BOOL LOC6;
		NI col;
		LOC5 = 0;
		LOC6 = 0;
		LOC6 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
		if (!(LOC6)) goto LA7;
		LOC6 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP323));
		LA7: ;
		LOC5 = LOC6;
		if (LOC5) goto LA8;
		LOC5 = atstart;
		LA8: ;
		if (!LOC5) goto LA9;
		{
			if (!atstart) goto LA13;
			col = (*p).Tok->data[(*p).Idx].Col;
		}
		goto LA11;
		LA13: ;
		{
			col = (*p).Tok->data[(*p).Idx].Ival;
		}
		LA11: ;
		result = newrstnode_152105(((NU8) 13));
		{
			if (!!(atstart)) goto LA18;
			(*p).Idx += 1;
		}
		LA18: ;
		{
			while (1) {
				trstnode152011* LOC22;
				LOC22 = 0;
				LOC22 = parsefield_163127(p);
				add_152183(result, LOC22);
				{
					NIM_BOOL LOC25;
					NIM_BOOL LOC26;
					LOC25 = 0;
					LOC26 = 0;
					LOC26 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
					if (!(LOC26)) goto LA27;
					LOC26 = ((*p).Tok->data[(*p).Idx].Ival == col);
					LA27: ;
					LOC25 = LOC26;
					if (!(LOC25)) goto LA28;
					LOC25 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP323));
					LA28: ;
					if (!LOC25) goto LA29;
					(*p).Idx += 1;
				}
				goto LA23;
				LA29: ;
				{
					goto LA20;
				}
				LA23: ;
			}
		} LA20: ;
	}
	LA9: ;
	return result;
}

N_NIMCALL(trstnode152011*, parsedirective_166423)(trstparser159653* p, NU8 flags) {
	trstnode152011* result;
	trstnode152011* args;
	trstnode152011* options;
	result = 0;
	result = newrstnode_152105(((NU8) 40));
	args = NIM_NIL;
	options = NIM_NIL;
	{
		if (!((flags &(1<<((((NU8) 0))&7)))!=0)) goto LA3;
		args = newrstnode_152105(((NU8) 41));
		{
			if (!((flags &(1<<((((NU8) 2))&7)))!=0)) goto LA7;
			{
				while (1) {
					switch ((*p).Tok->data[(*p).Idx].Kind) {
					case ((NU8) 3):
					case ((NU8) 6):
					case ((NU8) 5):
					case ((NU8) 4):
					{
						trstnode152011* LOC12;
						LOC12 = 0;
						LOC12 = newleaf_161182(p);
						add_152183(args, LOC12);
						(*p).Idx += 1;
					}
					break;
					default:
					{
						goto LA9;
					}
					break;
					}
				}
			} LA9: ;
		}
		goto LA5;
		LA7: ;
		{
			if (!((flags &(1<<((((NU8) 3))&7)))!=0)) goto LA15;
			{
				while (1) {
					if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA18;
					(*p).Idx += 1;
				} LA18: ;
			}
			{
				trstnode152011* LOC23;
				if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 3))) goto LA21;
				LOC23 = 0;
				LOC23 = newleaf_161182(p);
				add_152183(args, LOC23);
				(*p).Idx += 1;
			}
			goto LA19;
			LA21: ;
			{
				args = NIM_NIL;
			}
			LA19: ;
		}
		goto LA5;
		LA15: ;
		{
			parseline_163083(p, args);
		}
		LA5: ;
	}
	LA3: ;
	add_152183(result, args);
	{
		if (!((flags &(1<<((((NU8) 1))&7)))!=0)) goto LA28;
		{
			NIM_BOOL LOC32;
			NIM_BOOL LOC33;
			LOC32 = 0;
			LOC33 = 0;
			LOC33 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
			if (!(LOC33)) goto LA34;
			LOC33 = (3 <= (*p).Tok->data[(*p).Idx].Ival);
			LA34: ;
			LOC32 = LOC33;
			if (!(LOC32)) goto LA35;
			LOC32 = eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP323));
			LA35: ;
			if (!LOC32) goto LA36;
			options = parsefields_163161(p);
		}
		LA36: ;
	}
	LA28: ;
	add_152183(result, options);
	return result;
}

N_NIMCALL(NIM_BOOL, indfollows_166568)(trstparser159653* p) {
	NIM_BOOL result;
	NIM_BOOL LOC1;
	NI LOC3;
	result = 0;
	LOC1 = 0;
	LOC1 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
	if (!(LOC1)) goto LA2;
	LOC3 = 0;
	LOC3 = currind_160601(p);
	LOC1 = (LOC3 < (*p).Tok->data[(*p).Idx].Ival);
	LA2: ;
	result = LOC1;
	return result;
}

N_NIMCALL(trstnode152011*, parsedirective_166588)(trstparser159653* p, NU8 flags, tsectionparser166412 contentparser) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166423(p, flags);
	{
		NIM_BOOL LOC3;
		trstnode152011* content;
		LOC3 = 0;
		LOC3 = !(contentparser == 0);
		if (!(LOC3)) goto LA4;
		LOC3 = indfollows_166568(&(*p));
		LA4: ;
		if (!LOC3) goto LA5;
		pushind_160611(p, (*p).Tok->data[(*p).Idx].Ival);
		content = contentparser(p);
		popind_160640(p);
		add_152183(result, content);
	}
	goto LA1;
	LA5: ;
	{
		add_152183(result, NIM_NIL);
	}
	LA1: ;
	return result;
}

N_NIMCALL(NimStringDesc*, full_159807)(fileinfo159643* f) {
	NimStringDesc* result;
	result = 0;
	{
		if (!!((*f).Realpath == 0)) goto LA3;
		result = copyString((*f).Realpath);
		goto BeforeRet;
	}
	LA3: ;
	unsureAsgnRef((void**) &(*f).Realpath, nosexpandFilename((*f).Input));
	result = copyString((*f).Realpath);
	BeforeRet: ;
	return result;
}

static N_INLINE(NimStringDesc*, getcurrentexceptionmsg_82440)(void) {
	NimStringDesc* result;
	E_Base* e;
	result = 0;
	e = getCurrentException();
	{
		if (!(e == NIM_NIL)) goto LA3;
		result = copyString(((NimStringDesc*) &TMP75));
	}
	goto LA1;
	LA3: ;
	{
		result = copyString((*e).message);
	}
	LA1: ;
	goto BeforeRet;
	BeforeRet: ;
	return result;
}

N_NIMCALL(NimStringDesc*, getfieldvalue_159061)(trstnode152011* n, NimStringDesc* fieldname) {
	NimStringDesc* result;
	result = 0;
	result = copyString(((NimStringDesc*) &TMP75));
	{
		if (!((*n).Sons->data[1] == NIM_NIL)) goto LA3;
		goto BeforeRet;
	}
	LA3: ;
	{
		if (!!(((*(*n).Sons->data[1]).Kind == ((NU8) 13)))) goto LA7;
		goto BeforeRet;
	}
	LA7: ;
	{
		NI i_164050;
		NI HEX3Atmp_164053;
		NI LOC10;
		NI res_164056;
		i_164050 = 0;
		HEX3Atmp_164053 = 0;
		LOC10 = 0;
		LOC10 = len_152084((*n).Sons->data[1]);
		HEX3Atmp_164053 = (NI64)(LOC10 - 1);
		res_164056 = 0;
		{
			while (1) {
				trstnode152011* f;
				if (!(res_164056 <= HEX3Atmp_164053)) goto LA12;
				i_164050 = res_164056;
				f = (*(*n).Sons->data[1]).Sons->data[i_164050];
				{
					NimStringDesc* LOC15;
					NI LOC16;
					LOC15 = 0;
					LOC15 = addnodes_159055((*f).Sons->data[0]);
					LOC16 = 0;
					LOC16 = nsuCmpIgnoreStyle(LOC15, fieldname);
					if (!(LOC16 == 0)) goto LA17;
					result = addnodes_159055((*f).Sons->data[1]);
					{
						if (!((result) && (result)->Sup.len == 0)) goto LA21;
						result = copyString(((NimStringDesc*) &TMP334));
					}
					LA21: ;
					goto BeforeRet;
				}
				LA17: ;
				res_164056 += 1;
			} LA12: ;
		}
	}
	BeforeRet: ;
	return result;
}

N_NIMCALL(trstnode152011*, dirinclude_166621)(trstparser159653* p) {
	trstnode152011* result;
	trstnode152011* n;
	NimStringDesc* inputfilename;
	NimStringDesc* LOC1;
	NimStringDesc* path;
	TSafePoint TMP331;
	fileinfo159643 fileinfo;
	NimStringDesc* expanded;
	result = 0;
	result = NIM_NIL;
	n = parsedirective_166588(p, 7, NIM_NIL);
	LOC1 = 0;
	LOC1 = addnodes_159055((*n).Sons->data[0]);
	inputfilename = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
	path = 0;
	pushSafePoint(&TMP331);
	TMP331.status = _setjmp(TMP331.context);
	if (TMP331.status == 0) {
		NimStringDesc* LOC3;
		LOC3 = 0;
		LOC3 = full_159807(&(*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)]);
		path = (*(*p).S).Findfile(LOC3, inputfilename);
		popSafePoint();
	}
	else {
		popSafePoint();
		{
			NimStringDesc* LOC6;
			TMP331.status = 0;
			LOC6 = 0;
			LOC6 = getcurrentexceptionmsg_82440();
			rstmessage_160332(&(*p), ((NU8) 4), LOC6);
			popCurrentException();
		}
	}
	if (TMP331.status != 0) reraiseException();
	{
		NIM_BOOL LOC9;
		LOC9 = 0;
		LOC9 = path == 0;
		if (LOC9) goto LA10;
		LOC9 = (path->Sup.len < 1);
		LA10: ;
		if (!LOC9) goto LA11;
		rstmessage_160332(&(*p), ((NU8) 0), inputfilename);
		goto BeforeRet;
	}
	LA11: ;
	memset((void*)&fileinfo, 0, sizeof(fileinfo));
	chckNil((void*)&fileinfo);
	memset((void*)&fileinfo, 0, sizeof(fileinfo));
	newfileinfo_159688(path, &fileinfo);
	expanded = full_159807(&fileinfo);
	{
		fileinfo159643 prev_166811;
		TY159680* HEX3Atmp_167039;
		NI i_167042;
		NI l_167044;
		memset((void*)&prev_166811, 0, sizeof(prev_166811));
		HEX3Atmp_167039 = 0;
		HEX3Atmp_167039 = (*p).Filenamestack;
		i_167042 = 0;
		l_167044 = HEX3Atmp_167039->Sup.len;
		{
			while (1) {
				if (!(i_167042 < l_167044)) goto LA15;
				prev_166811.Realpath = HEX3Atmp_167039->data[i_167042].Realpath;
				prev_166811.Input = HEX3Atmp_167039->data[i_167042].Input;
				{
					if (!eqStrings(expanded, prev_166811.Realpath)) goto LA18;
					rstmessage_160332(&(*p), ((NU8) 6), inputfilename);
					goto BeforeRet;
				}
				LA18: ;
				i_167042 += 1;
			} LA15: ;
		}
	}
	{
		NimStringDesc* LOC22;
		NimStringDesc* LOC25;
		NimStringDesc* LOC26;
		trstnode152011* LOC27;
		LOC22 = 0;
		LOC22 = getfieldvalue_159061(n, ((NimStringDesc*) &TMP258));
		if (!!(((LOC22) && (LOC22)->Sup.len == 0))) goto LA23;
		result = newrstnode_152105(((NU8) 24));
		LOC25 = 0;
		LOC25 = full_159807(&fileinfo);
		LOC26 = 0;
		LOC26 = readfile_12242(LOC25);
		LOC27 = 0;
		LOC27 = newrstnode_152151(((NU8) 64), LOC26);
		add_152183(result, LOC27);
	}
	goto LA20;
	LA23: ;
	{
		trstparser159653 q;
		NimStringDesc* LOC29;
		NimStringDesc* LOC30;
		NimStringDesc* LOC31;
		NimStringDesc* LOC32;
		NI LOC33;
		memset((void*)&q, 0, sizeof(q));
		q.Sup.m_type = (&NTI159653);
		initparser_160689(&q, (*p).S);
		genericSeqAssign(&q.Filenamestack, (*p).Filenamestack, (&NTI159680));
		q.Filenamestack = (TY159680*) incrSeq(&(q.Filenamestack)->Sup, sizeof(fileinfo159643));
		LOC29 = 0;
		LOC29 = q.Filenamestack->data[q.Filenamestack->Sup.len-1].Realpath; q.Filenamestack->data[q.Filenamestack->Sup.len-1].Realpath = copyStringRC1(fileinfo.Realpath);
		if (LOC29) nimGCunrefNoCycle(LOC29);
		LOC30 = 0;
		LOC30 = q.Filenamestack->data[q.Filenamestack->Sup.len-1].Input; q.Filenamestack->data[q.Filenamestack->Sup.len-1].Input = copyStringRC1(fileinfo.Input);
		if (LOC30) nimGCunrefNoCycle(LOC30);
		LOC31 = 0;
		LOC31 = full_159807(&q.Filenamestack->data[(q.Filenamestack->Sup.len-1)]);
		LOC32 = 0;
		LOC32 = readfile_12242(LOC31);
		LOC33 = 0;
		LOC33 = gettokens_159453(LOC32, NIM_FALSE, &q.Tok);
		q.Col += LOC33;
		result = parsedoc_165078(&q);
	}
	LA20: ;
	BeforeRet: ;
	return result;
}

N_NIMCALL(trstnode152011*, dirimage_167607)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 7, NIM_NIL);
	(*result).Kind = ((NU8) 45);
	return result;
}

N_NIMCALL(trstnode152011*, dirfigure_167619)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 7, parsesectionwrapper_166325);
	(*result).Kind = ((NU8) 46);
	return result;
}

N_NIMCALL(trstnode152011*, dirtitle_167631)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 1, NIM_NIL);
	(*result).Kind = ((NU8) 43);
	return result;
}

N_NIMCALL(trstnode152011*, dircontainer_167209)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 1, parsesectionwrapper_166325);
	(*result).Kind = ((NU8) 50);
	return result;
}

N_NIMCALL(trstnode152011*, dircontents_167643)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 1, NIM_NIL);
	(*result).Kind = ((NU8) 44);
	return result;
}

N_NIMCALL(trstnode152011*, parsedirbody_166609)(trstparser159653* p, tsectionparser166412 contentparser) {
	trstnode152011* result;
	result = 0;
	{
		NIM_BOOL LOC3;
		LOC3 = 0;
		LOC3 = indfollows_166568(&(*p));
		if (!LOC3) goto LA4;
		pushind_160611(p, (*p).Tok->data[(*p).Idx].Ival);
		result = contentparser(p);
		popind_160640(p);
	}
	LA4: ;
	return result;
}

N_NIMCALL(void, dirrawaux_167668)(trstparser159653* p, trstnode152011** result, NU8 kind, tsectionparser166412 contentparser) {
	NimStringDesc* inputfilename;
	inputfilename = getfieldvalue_159061((*result), ((NimStringDesc*) &TMP330));
	{
		NimStringDesc* path;
		TSafePoint TMP345;
		TSafePoint TMP346;
		if (!(0 < inputfilename->Sup.len)) goto LA3;
		path = 0;
		pushSafePoint(&TMP345);
		TMP345.status = _setjmp(TMP345.context);
		if (TMP345.status == 0) {
			NimStringDesc* LOC6;
			LOC6 = 0;
			LOC6 = full_159807(&(*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)]);
			path = (*(*p).S).Findfile(LOC6, inputfilename);
			popSafePoint();
		}
		else {
			popSafePoint();
			{
				NimStringDesc* LOC9;
				TMP345.status = 0;
				LOC9 = 0;
				LOC9 = getcurrentexceptionmsg_82440();
				rstmessage_160332(&(*p), ((NU8) 4), LOC9);
				popCurrentException();
			}
		}
		if (TMP345.status != 0) reraiseException();
		{
			NIM_BOOL LOC12;
			LOC12 = 0;
			LOC12 = path == 0;
			if (LOC12) goto LA13;
			LOC12 = (path->Sup.len < 1);
			LA13: ;
			if (!LOC12) goto LA14;
			rstmessage_160332(&(*p), ((NU8) 0), inputfilename);
			goto BeforeRet;
		}
		LA14: ;
		pushSafePoint(&TMP346);
		TMP346.status = _setjmp(TMP346.context);
		if (TMP346.status == 0) {
			NimStringDesc* volatile f;
			trstnode152011* LOC17;
			path = nosexpandFilename(path);
			f = readfile_12242(path);
			unsureAsgnRef((void**) &(*result), newrstnode_152105(kind));
			LOC17 = 0;
			LOC17 = newrstnode_152151(((NU8) 64), f);
			add_152183((*result), LOC17);
			popSafePoint();
		}
		else {
			popSafePoint();
			if (isObj(getCurrentException()->Sup.m_type, (&NTI2839))||isObj(getCurrentException()->Sup.m_type, (&NTI2837))) {
				TMP346.status = 0;
				rstmessage_160332(&(*p), ((NU8) 0), inputfilename);
				popCurrentException();
				goto BeforeRet;
				popCurrentException();
			}
		}
		if (TMP346.status != 0) reraiseException();
	}
	goto LA1;
	LA3: ;
	{
		trstnode152011* LOC21;
		(*(*result)).Kind = kind;
		LOC21 = 0;
		LOC21 = parsedirbody_166609(p, contentparser);
		add_152183((*result), LOC21);
	}
	LA1: ;
	BeforeRet: ;
}

N_NIMCALL(trstnode152011*, dirraw_167689)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166423(p, 11);
	{
		if (!!(((*result).Sons->data[0] == NIM_NIL))) goto LA3;
		{
			NI LOC7;
			LOC7 = 0;
			LOC7 = nsuCmpIgnoreCase((*(*(*result).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP344));
			if (!(LOC7 == 0)) goto LA8;
			dirrawaux_167668(p, &result, ((NU8) 48), parseliteralblock_164107);
		}
		goto LA5;
		LA8: ;
		{
			NI LOC11;
			LOC11 = 0;
			LOC11 = nsuCmpIgnoreCase((*(*(*result).Sons->data[0]).Sons->data[0]).Text, ((NimStringDesc*) &TMP347));
			if (!(LOC11 == 0)) goto LA12;
			dirrawaux_167668(p, &result, ((NU8) 49), parseliteralblock_164107);
		}
		goto LA5;
		LA12: ;
		{
			rstmessage_160332(&(*p), ((NU8) 5), (*(*(*result).Sons->data[0]).Sons->data[0]).Text);
		}
		LA5: ;
	}
	goto LA1;
	LA3: ;
	{
		dirrawaux_167668(p, &result, ((NU8) 42), parsesectionwrapper_166325);
	}
	LA1: ;
	return result;
}

N_NIMCALL(trstnode152011*, dircodeblock_167061)(trstparser159653* p, NIM_BOOL nimrodextension) {
	trstnode152011* result;
	NimStringDesc* inputfilename;
	NimStringDesc* LOC1;
	result = 0;
	result = parsedirective_166588(p, 3, parseliteralblock_164107);
	LOC1 = 0;
	LOC1 = getfieldvalue_159061(result, ((NimStringDesc*) &TMP330));
	inputfilename = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
	{
		NimStringDesc* path;
		TSafePoint TMP348;
		TSafePoint TMP349;
		if (!!(((inputfilename) && (inputfilename)->Sup.len == 0))) goto LA4;
		path = 0;
		pushSafePoint(&TMP348);
		TMP348.status = _setjmp(TMP348.context);
		if (TMP348.status == 0) {
			NimStringDesc* LOC7;
			LOC7 = 0;
			LOC7 = full_159807(&(*p).Filenamestack->data[((*p).Filenamestack->Sup.len-1)]);
			path = (*(*p).S).Findfile(LOC7, inputfilename);
			popSafePoint();
		}
		else {
			popSafePoint();
			{
				NimStringDesc* LOC10;
				TMP348.status = 0;
				LOC10 = 0;
				LOC10 = getcurrentexceptionmsg_82440();
				rstmessage_160332(&(*p), ((NU8) 4), LOC10);
				popCurrentException();
			}
		}
		if (TMP348.status != 0) reraiseException();
		{
			NIM_BOOL LOC13;
			LOC13 = 0;
			LOC13 = path == 0;
			if (LOC13) goto LA14;
			LOC13 = (path->Sup.len < 1);
			LA14: ;
			if (!LOC13) goto LA15;
			rstmessage_160332(&(*p), ((NU8) 0), inputfilename);
			goto BeforeRet;
		}
		LA15: ;
		pushSafePoint(&TMP349);
		TMP349.status = _setjmp(TMP349.context);
		if (TMP349.status == 0) {
			trstnode152011* volatile n;
			NimStringDesc* LOC18;
			trstnode152011* LOC19;
			path = nosexpandFilename(path);
			n = newrstnode_152105(((NU8) 24));
			LOC18 = 0;
			LOC18 = readfile_12242(path);
			LOC19 = 0;
			LOC19 = newrstnode_152151(((NU8) 64), LOC18);
			add_152183(n, LOC19);
			asgnRefNoCycle((void**) &(*result).Sons->data[2], n);
			popSafePoint();
		}
		else {
			popSafePoint();
			if (isObj(getCurrentException()->Sup.m_type, (&NTI2839))||isObj(getCurrentException()->Sup.m_type, (&NTI2837))) {
				TMP349.status = 0;
				rstmessage_160332(&(*p), ((NU8) 0), inputfilename);
				popCurrentException();
				goto BeforeRet;
				popCurrentException();
			}
		}
		if (TMP349.status != 0) reraiseException();
	}
	LA4: ;
	{
		trstnode152011* extranode;
		trstnode152011* LOC30;
		trstnode152011* LOC31;
		trstnode152011* LOC32;
		trstnode152011* LOC33;
		if (!nimrodextension) goto LA24;
		{
			if (!(*result).Sons->data[1] == 0) goto LA28;
			asgnRefNoCycle((void**) &(*result).Sons->data[1], newrstnode_152105(((NU8) 13)));
		}
		LA28: ;
		extranode = newrstnode_152105(((NU8) 14));
		LOC30 = 0;
		LOC30 = newrstnode_152105(((NU8) 15));
		add_152183(extranode, LOC30);
		LOC31 = 0;
		LOC31 = newrstnode_152105(((NU8) 16));
		add_152183(extranode, LOC31);
		LOC32 = 0;
		LOC32 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP350));
		add_152183((*extranode).Sons->data[0], LOC32);
		LOC33 = 0;
		LOC33 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP351));
		add_152183((*extranode).Sons->data[1], LOC33);
		add_152183((*result).Sons->data[1], extranode);
	}
	LA24: ;
	(*result).Kind = ((NU8) 47);
	BeforeRet: ;
	return result;
}

N_NIMCALL(trstnode152011*, dirindex_167655)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsedirective_166588(p, 0, parsesectionwrapper_166325);
	(*result).Kind = ((NU8) 51);
	return result;
}

N_NIMCALL(trstnode152011*, getreferencename_161193)(trstparser159653* p, NimStringDesc* endstr) {
	trstnode152011* result;
	trstnode152011* res;
	result = 0;
	res = newrstnode_152105(((NU8) 0));
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 3):
			case ((NU8) 6):
			case ((NU8) 2):
			{
				trstnode152011* LOC4;
				LOC4 = 0;
				LOC4 = newleaf_161182(p);
				add_152183(res, LOC4);
			}
			break;
			case ((NU8) 5):
			{
				{
					if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, endstr)) goto LA8;
					(*p).Idx += 1;
					goto LA1;
				}
				goto LA6;
				LA8: ;
				{
					trstnode152011* LOC11;
					LOC11 = 0;
					LOC11 = newleaf_161182(p);
					add_152183(res, LOC11);
				}
				LA6: ;
			}
			break;
			default:
			{
				rstmessage_160332(&(*p), ((NU8) 1), endstr);
				goto LA1;
			}
			break;
			}
			(*p).Idx += 1;
		}
	} LA1: ;
	result = res;
	return result;
}

N_NIMCALL(trstnode152011*, untileol_161237)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = newrstnode_152105(((NU8) 0));
	{
		while (1) {
			trstnode152011* LOC3;
			if (!!(((3 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0))) goto LA2;
			LOC3 = 0;
			LOC3 = newleaf_161182(p);
			add_152183(result, LOC3);
			(*p).Idx += 1;
		} LA2: ;
	}
	return result;
}

N_NIMCALL(void, expect_161281)(trstparser159653* p, NimStringDesc* tok) {
	{
		if (!eqStrings((*p).Tok->data[(*p).Idx].Symbol, tok)) goto LA3;
		(*p).Idx += 1;
	}
	goto LA1;
	LA3: ;
	{
		rstmessage_160332(&(*p), ((NU8) 1), tok);
	}
	LA1: ;
}

N_NIMCALL(void, setsub_161006)(trstparser159653* p, NimStringDesc* key, trstnode152011* value) {
	NI length;
	NimStringDesc* LOC8;
	length = (*(*p).S).Subs->Sup.len;
	{
		NI i_161036;
		NI HEX3Atmp_161054;
		NI res_161057;
		i_161036 = 0;
		HEX3Atmp_161054 = 0;
		HEX3Atmp_161054 = (NI64)(length - 1);
		res_161057 = 0;
		{
			while (1) {
				if (!(res_161057 <= HEX3Atmp_161054)) goto LA3;
				i_161036 = res_161057;
				{
					if (!eqStrings(key, (*(*p).S).Subs->data[i_161036].Key)) goto LA6;
					asgnRefNoCycle((void**) &(*(*p).S).Subs->data[i_161036].Value, value);
					goto BeforeRet;
				}
				LA6: ;
				res_161057 += 1;
			} LA3: ;
		}
	}
	(*(*p).S).Subs = (TY159667*) setLengthSeq(&((*(*p).S).Subs)->Sup, sizeof(tsubstitution159641), (NI64)(length + 1));
	LOC8 = 0;
	LOC8 = (*(*p).S).Subs->data[length].Key; (*(*p).S).Subs->data[length].Key = copyStringRC1(key);
	if (LOC8) nimGCunrefNoCycle(LOC8);
	asgnRefNoCycle((void**) &(*(*p).S).Subs->data[length].Value, value);
	BeforeRet: ;
}

N_NIMCALL(trstnode152011*, parsecomment_162870)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	switch ((*p).Tok->data[(*p).Idx].Kind) {
	case ((NU8) 1):
	case ((NU8) 0):
	{
		{
			NIM_BOOL LOC4;
			LOC4 = 0;
			LOC4 = !(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 0)));
			if (!(LOC4)) goto LA5;
			LOC4 = ((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 1));
			LA5: ;
			if (!LOC4) goto LA6;
			(*p).Idx += 1;
		}
		goto LA2;
		LA6: ;
		{
			NI indent;
			indent = (*p).Tok->data[(*p).Idx].Ival;
			{
				while (1) {
					switch ((*p).Tok->data[(*p).Idx].Kind) {
					case ((NU8) 0):
					{
						goto LA9;
					}
					break;
					case ((NU8) 1):
					{
						{
							if (!((*p).Tok->data[(*p).Idx].Ival < indent)) goto LA15;
							goto LA9;
						}
						LA15: ;
					}
					break;
					default:
					{
					}
					break;
					}
					(*p).Idx += 1;
				}
			} LA9: ;
		}
		LA2: ;
	}
	break;
	default:
	{
		{
			while (1) {
				if (!!(((3 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0))) goto LA20;
				(*p).Idx += 1;
			} LA20: ;
		}
	}
	break;
	}
	result = NIM_NIL;
	return result;
}

N_NIMCALL(trstnode152011*, parsedotdot_164100)(trstparser159653* p) {
	trstnode152011* result;
	NI col;
	NimStringDesc* d;
	result = 0;
	result = NIM_NIL;
	col = (*p).Tok->data[(*p).Idx].Col;
	(*p).Idx += 1;
	d = getdirective_162729(p);
	{
		NU8 LOC5;
		if (!!(((d) && (d)->Sup.len == 0))) goto LA3;
		pushind_160611(p, col);
		LOC5 = 0;
		LOC5 = getdirkind_162991(d);
		switch (LOC5) {
		case ((NU8) 9):
		{
			result = dirinclude_166621(p);
		}
		break;
		case ((NU8) 8):
		{
			result = dirimage_167607(p);
		}
		break;
		case ((NU8) 7):
		{
			result = dirfigure_167619(p);
		}
		break;
		case ((NU8) 12):
		{
			result = dirtitle_167631(p);
		}
		break;
		case ((NU8) 5):
		{
			result = dircontainer_167209(p);
		}
		break;
		case ((NU8) 6):
		{
			result = dircontents_167643(p);
		}
		break;
		case ((NU8) 11):
		{
			{
				if (!(((*(*p).S).Options &(1<<((((NU8) 2))&7)))!=0)) goto LA15;
				result = dirraw_167689(p);
			}
			goto LA13;
			LA15: ;
			{
				rstmessage_160332(&(*p), ((NU8) 5), d);
			}
			LA13: ;
		}
		break;
		case ((NU8) 3):
		{
			result = dircodeblock_167061(p, NIM_FALSE);
		}
		break;
		case ((NU8) 4):
		{
			result = dircodeblock_167061(p, NIM_TRUE);
		}
		break;
		case ((NU8) 10):
		{
			result = dirindex_167655(p);
		}
		break;
		default:
		{
			rstmessage_160332(&(*p), ((NU8) 5), d);
		}
		break;
		}
		popind_160640(p);
	}
	goto LA1;
	LA3: ;
	{
		NIM_BOOL LOC23;
		trstnode152011* a;
		trstnode152011* b;
		NimStringDesc* LOC30;
		LOC23 = 0;
		LOC23 = match_161415(&(*p), (*p).Idx, ((NimStringDesc*) &TMP352));
		if (!LOC23) goto LA24;
		(*p).Idx += 2;
		a = getreferencename_161193(p, ((NimStringDesc*) &TMP323));
		{
			if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA28;
			(*p).Idx += 1;
		}
		LA28: ;
		b = untileol_161237(p);
		LOC30 = 0;
		LOC30 = rstnodetorefname_159049(a);
		setref_161074(p, LOC30, b);
	}
	goto LA1;
	LA24: ;
	{
		NIM_BOOL LOC32;
		trstnode152011* a;
		trstnode152011* b;
		NimStringDesc* LOC49;
		LOC32 = 0;
		LOC32 = match_161415(&(*p), (*p).Idx, ((NimStringDesc*) &TMP353));
		if (!LOC32) goto LA33;
		(*p).Idx += 2;
		a = getreferencename_161193(p, ((NimStringDesc*) &TMP221));
		b = 0;
		{
			if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA37;
			(*p).Idx += 1;
		}
		LA37: ;
		{
			NI LOC41;
			LOC41 = 0;
			LOC41 = nsuCmpIgnoreStyle((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP354));
			if (!(LOC41 == 0)) goto LA42;
			(*p).Idx += 1;
			expect_161281(p, ((NimStringDesc*) &TMP217));
			b = untileol_161237(p);
		}
		goto LA39;
		LA42: ;
		{
			NI LOC45;
			LOC45 = 0;
			LOC45 = nsuCmpIgnoreStyle((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP239));
			if (!(LOC45 == 0)) goto LA46;
			(*p).Idx += 1;
			b = dirimage_167607(p);
		}
		goto LA39;
		LA46: ;
		{
			rstmessage_160332(&(*p), ((NU8) 5), (*p).Tok->data[(*p).Idx].Symbol);
		}
		LA39: ;
		LOC49 = 0;
		LOC49 = addnodes_159055(a);
		setsub_161006(p, LOC49, b);
	}
	goto LA1;
	LA33: ;
	{
		NIM_BOOL LOC51;
		trstnode152011* a;
		trstnode152011* b;
		NimStringDesc* LOC58;
		LOC51 = 0;
		LOC51 = match_161415(&(*p), (*p).Idx, ((NimStringDesc*) &TMP355));
		if (!LOC51) goto LA52;
		(*p).Idx += 2;
		a = getreferencename_161193(p, ((NimStringDesc*) &TMP356));
		{
			if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA56;
			(*p).Idx += 1;
		}
		LA56: ;
		b = untileol_161237(p);
		LOC58 = 0;
		LOC58 = rstnodetorefname_159049(a);
		setref_161074(p, LOC58, b);
	}
	goto LA1;
	LA52: ;
	{
		result = parsecomment_162870(p);
	}
	LA1: ;
	return result;
}

N_NIMCALL(trstnode152011*, parseenumlist_165924)(trstparser159653* p) {
	trstnode152011* result;
	NI w;
	result = 0;
	result = NIM_NIL;
	w = 0;
	{
		while (1) {
			if (!(w <= 2)) goto LA2;
			{
				NIM_BOOL LOC5;
				LOC5 = 0;
				LOC5 = match_161415(&(*p), (*p).Idx, wildcards_165929[(w)- 0]);
				if (!LOC5) goto LA6;
				goto LA1;
			}
			LA6: ;
			w += 1;
		} LA2: ;
	} LA1: ;
	{
		NI col;
		NI j;
		if (!(w <= 2)) goto LA10;
		col = (*p).Tok->data[(*p).Idx].Col;
		result = newrstnode_152105(((NU8) 7));
		(*p).Idx += (NI64)(wildpos_165934[(w)- 0] + 3);
		j = tokenafternewline_164232(&(*p));
		{
			NIM_BOOL LOC14;
			LOC14 = 0;
			LOC14 = ((*p).Tok->data[j].Col == (*p).Tok->data[(*p).Idx].Col);
			if (LOC14) goto LA15;
			LOC14 = match_161415(&(*p), j, wildcards_165929[(w)- 0]);
			LA15: ;
			if (!LOC14) goto LA16;
			pushind_160611(p, (*p).Tok->data[(*p).Idx].Col);
			{
				while (1) {
					trstnode152011* item;
					item = newrstnode_152105(((NU8) 8));
					parsesection_163119(p, item);
					add_152183(result, item);
					{
						NIM_BOOL LOC22;
						NIM_BOOL LOC23;
						LOC22 = 0;
						LOC23 = 0;
						LOC23 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
						if (!(LOC23)) goto LA24;
						LOC23 = ((*p).Tok->data[(*p).Idx].Ival == col);
						LA24: ;
						LOC22 = LOC23;
						if (!(LOC22)) goto LA25;
						LOC22 = match_161415(&(*p), (NI64)((*p).Idx + 1), wildcards_165929[(w)- 0]);
						LA25: ;
						if (!LOC22) goto LA26;
						(*p).Idx += (NI64)(wildpos_165934[(w)- 0] + 4);
					}
					goto LA20;
					LA26: ;
					{
						goto LA18;
					}
					LA20: ;
				}
			} LA18: ;
			popind_160640(p);
		}
		goto LA12;
		LA16: ;
		{
			(*p).Idx -= (NI64)(wildpos_165934[(w)- 0] + 3);
			result = NIM_NIL;
		}
		LA12: ;
	}
	LA10: ;
	return result;
}

N_NIMCALL(trstnode152011*, parsedefinitionlist_165827)(trstparser159653* p) {
	trstnode152011* result;
	NI j;
	NI LOC1;
	result = 0;
	result = NIM_NIL;
	LOC1 = 0;
	LOC1 = tokenafternewline_164232(&(*p));
	j = (NI64)(LOC1 - 1);
	{
		NIM_BOOL LOC4;
		NIM_BOOL LOC5;
		NIM_BOOL LOC6;
		NI LOC9;
		NI col;
		LOC4 = 0;
		LOC5 = 0;
		LOC6 = 0;
		LOC6 = (1 <= j);
		if (!(LOC6)) goto LA7;
		LOC6 = ((*p).Tok->data[j].Kind == ((NU8) 1));
		LA7: ;
		LOC5 = LOC6;
		if (!(LOC5)) goto LA8;
		LOC9 = 0;
		LOC9 = currind_160601(&(*p));
		LOC5 = (LOC9 < (*p).Tok->data[j].Ival);
		LA8: ;
		LOC4 = LOC5;
		if (!(LOC4)) goto LA10;
		LOC4 = !(eqStrings((*p).Tok->data[(NI64)(j - 1)].Symbol, ((NimStringDesc*) &TMP217)));
		LA10: ;
		if (!LOC4) goto LA11;
		col = (*p).Tok->data[(*p).Idx].Col;
		result = newrstnode_152105(((NU8) 9));
		{
			while (1) {
				trstnode152011* a;
				j = (*p).Idx;
				a = newrstnode_152105(((NU8) 11));
				parseline_163083(p, a);
				{
					NIM_BOOL LOC17;
					NIM_BOOL LOC18;
					NIM_BOOL LOC19;
					NI LOC21;
					trstnode152011* b;
					trstnode152011* c;
					LOC17 = 0;
					LOC18 = 0;
					LOC19 = 0;
					LOC19 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
					if (!(LOC19)) goto LA20;
					LOC21 = 0;
					LOC21 = currind_160601(&(*p));
					LOC19 = (LOC21 < (*p).Tok->data[(*p).Idx].Ival);
					LA20: ;
					LOC18 = LOC19;
					if (!(LOC18)) goto LA22;
					LOC18 = !(eqStrings((*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol, ((NimStringDesc*) &TMP217)));
					LA22: ;
					LOC17 = LOC18;
					if (!(LOC17)) goto LA23;
					LOC17 = !(((3 &(1<<(((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind)&7)))!=0));
					LA23: ;
					if (!LOC17) goto LA24;
					pushind_160611(p, (*p).Tok->data[(*p).Idx].Ival);
					b = newrstnode_152105(((NU8) 12));
					parsesection_163119(p, b);
					c = newrstnode_152105(((NU8) 10));
					add_152183(c, a);
					add_152183(c, b);
					add_152183(result, c);
					popind_160640(p);
				}
				goto LA15;
				LA24: ;
				{
					(*p).Idx = j;
					goto LA13;
				}
				LA15: ;
				{
					NIM_BOOL LOC29;
					NI LOC33;
					LOC29 = 0;
					LOC29 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1));
					if (!(LOC29)) goto LA30;
					LOC29 = ((*p).Tok->data[(*p).Idx].Ival == col);
					LA30: ;
					if (!LOC29) goto LA31;
					(*p).Idx += 1;
					LOC33 = 0;
					LOC33 = tokenafternewline_164232(&(*p));
					j = (NI64)(LOC33 - 1);
					{
						NIM_BOOL LOC36;
						NIM_BOOL LOC37;
						NIM_BOOL LOC38;
						NIM_BOOL LOC39;
						LOC36 = 0;
						LOC37 = 0;
						LOC38 = 0;
						LOC39 = 0;
						LOC39 = (1 <= j);
						if (!(LOC39)) goto LA40;
						LOC39 = ((*p).Tok->data[j].Kind == ((NU8) 1));
						LA40: ;
						LOC38 = LOC39;
						if (!(LOC38)) goto LA41;
						LOC38 = (col < (*p).Tok->data[j].Ival);
						LA41: ;
						LOC37 = LOC38;
						if (!(LOC37)) goto LA42;
						LOC37 = !(eqStrings((*p).Tok->data[(NI64)(j - 1)].Symbol, ((NimStringDesc*) &TMP217)));
						LA42: ;
						LOC36 = LOC37;
						if (!(LOC36)) goto LA43;
						LOC36 = !(((*p).Tok->data[(NI64)(j + 1)].Kind == ((NU8) 1)));
						LA43: ;
						if (!LOC36) goto LA44;
					}
					goto LA34;
					LA44: ;
					{
						goto LA13;
					}
					LA34: ;
				}
				LA31: ;
			}
		} LA13: ;
		{
			NI LOC49;
			LOC49 = 0;
			LOC49 = len_152084(result);
			if (!(LOC49 == 0)) goto LA50;
			result = NIM_NIL;
		}
		LA50: ;
	}
	LA11: ;
	return result;
}

N_NIMCALL(trstnode152011*, parsetransition_165472)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = newrstnode_152105(((NU8) 3));
	(*p).Idx += 1;
	{
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA3;
		(*p).Idx += 1;
	}
	LA3: ;
	{
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA7;
		(*p).Idx += 1;
	}
	LA7: ;
	return result;
}

N_NIMCALL(void, parseuntilnewline_163101)(trstparser159653* p, trstnode152011* father) {
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 2):
			case ((NU8) 3):
			case ((NU8) 4):
			case ((NU8) 6):
			case ((NU8) 5):
			{
				parseinline_162582(p, father);
			}
			break;
			case ((NU8) 0):
			case ((NU8) 1):
			{
				goto LA1;
			}
			break;
			}
		}
	} LA1: ;
}

N_NIMCALL(NI, getlevel_164206)(NI* map, NI* lvl, NIM_CHAR c) {
	NI result;
	result = 0;
	{
		if (!(map[(((NU8)(c)))- 0] == 0)) goto LA3;
		(*lvl) += 1;
		map[(((NU8)(c)))- 0] = (*lvl);
	}
	LA3: ;
	result = map[(((NU8)(c)))- 0];
	return result;
}

N_NIMCALL(trstnode152011*, parseheadline_164504)(trstparser159653* p) {
	trstnode152011* result;
	NIM_CHAR c;
	result = 0;
	result = newrstnode_152105(((NU8) 1));
	parseuntilnewline_163101(p, result);
	c = (*p).Tok->data[(NI64)((*p).Idx + 1)].Symbol->data[0];
	(*p).Idx += 2;
	(*result).Level = getlevel_164206((*(*p).S).Underlinetolevel, &(*(*p).S).Ulevel, c);
	return result;
}

N_NIMCALL(trstnode152011*, parseoverline_165537)(trstparser159653* p) {
	trstnode152011* result;
	NIM_CHAR c;
	result = 0;
	c = (*p).Tok->data[(*p).Idx].Symbol->data[0];
	(*p).Idx += 2;
	result = newrstnode_152105(((NU8) 2));
	{
		while (1) {
			parseuntilnewline_163101(p, result);
			{
				if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA5;
				(*p).Idx += 1;
				{
					NI LOC9;
					trstnode152011* LOC12;
					LOC9 = 0;
					LOC9 = currind_160601(&(*p));
					if (!(LOC9 < (*p).Tok->data[(NI64)((*p).Idx - 1)].Ival)) goto LA10;
					LOC12 = 0;
					LOC12 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP250));
					add_152183(result, LOC12);
				}
				goto LA7;
				LA10: ;
				{
					goto LA1;
				}
				LA7: ;
			}
			goto LA3;
			LA5: ;
			{
				goto LA1;
			}
			LA3: ;
		}
	} LA1: ;
	(*result).Level = getlevel_164206((*(*p).S).Overlinetolevel, &(*(*p).S).Olevel, c);
	{
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 4))) goto LA17;
		(*p).Idx += 1;
		{
			if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA21;
			(*p).Idx += 1;
		}
		LA21: ;
	}
	LA17: ;
	return result;
}

N_NIMCALL(NI, tokend_164827)(trstparser159653* p) {
	NI result;
	result = 0;
	result = (NI64)((NI64)((*p).Tok->data[(*p).Idx].Col + (*p).Tok->data[(*p).Idx].Symbol->Sup.len) - 1);
	return result;
}

N_NIMCALL(void, getcolumns_164837)(trstparser159653* p, TY159678** cols) {
	NI l;
	l = 0;
	{
		while (1) {
			l += 1;
			(*cols) = (TY159678*) setLengthSeq(&((*cols))->Sup, sizeof(NI), l);
			(*cols)->data[(NI64)(l - 1)] = tokend_164827(&(*p));
			(*p).Idx += 1;
			{
				if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2)))) goto LA5;
				goto LA1;
			}
			LA5: ;
			(*p).Idx += 1;
			{
				if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 4)))) goto LA9;
				goto LA1;
			}
			LA9: ;
		}
	} LA1: ;
	{
		if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA13;
		(*p).Idx += 1;
	}
	LA13: ;
	(*cols)->data[(NI64)(l - 1)] = 32000;
}

N_NIMCALL(trstnode152011*, parsesimpletable_165085)(trstparser159653* p) {
	trstnode152011* result;
	TY159678* cols;
	TY117411* row;
	NI i;
	NI last;
	NI line;
	NIM_CHAR c;
	trstparser159653 q;
	trstnode152011* a;
	trstnode152011* b;
	result = 0;
	cols = 0;
	row = 0;
	i = 0;
	last = 0;
	line = 0;
	c = 0;
	memset((void*)&q, 0, sizeof(q));
	q.Sup.m_type = (&NTI159653);
	a = 0;
	b = 0;
	result = newrstnode_152105(((NU8) 29));
	cols = (TY159678*) newSeq((&NTI159678), 0);
	row = (TY117411*) newSeq((&NTI117411), 0);
	a = NIM_NIL;
	c = (*p).Tok->data[(*p).Idx].Symbol->data[0];
	{
		while (1) {
			{
				if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 4))) goto LA5;
				last = tokenafternewline_164232(&(*p));
				{
					if (!((3 &(1<<(((*p).Tok->data[last].Kind)&7)))!=0)) goto LA9;
					(*p).Idx = last;
					goto LA1;
				}
				LA9: ;
				getcolumns_164837(p, &cols);
				row = (TY117411*) setLengthSeq(&(row)->Sup, sizeof(NimStringDesc*), cols->Sup.len);
				{
					if (!!((a == NIM_NIL))) goto LA13;
					{
						NI j_165218;
						NI HEX3Atmp_165387;
						NI LOC16;
						NI res_165390;
						j_165218 = 0;
						HEX3Atmp_165387 = 0;
						LOC16 = 0;
						LOC16 = len_152084(a);
						HEX3Atmp_165387 = (NI64)(LOC16 - 1);
						res_165390 = 0;
						{
							while (1) {
								if (!(res_165390 <= HEX3Atmp_165387)) goto LA18;
								j_165218 = res_165390;
								(*(*a).Sons->data[j_165218]).Kind = ((NU8) 32);
								res_165390 += 1;
							} LA18: ;
						}
					}
				}
				LA13: ;
			}
			LA5: ;
			{
				if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 0))) goto LA21;
				goto LA1;
			}
			LA21: ;
			{
				NI j_165240;
				NI HEX3Atmp_165393;
				NI res_165396;
				j_165240 = 0;
				HEX3Atmp_165393 = 0;
				HEX3Atmp_165393 = (row->Sup.len-1);
				res_165396 = 0;
				{
					while (1) {
						NimStringDesc* LOC26;
						if (!(res_165396 <= HEX3Atmp_165393)) goto LA25;
						j_165240 = res_165396;
						LOC26 = 0;
						LOC26 = row->data[j_165240]; row->data[j_165240] = copyStringRC1(((NimStringDesc*) &TMP75));
						if (LOC26) nimGCunrefNoCycle(LOC26);
						res_165396 += 1;
					} LA25: ;
				}
			}
			line = (*p).Tok->data[(*p).Idx].Line;
			{
				while (1) {
					i = 0;
					{
						while (1) {
							if (!!(((3 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0))) goto LA30;
							{
								NI LOC33;
								LOC33 = 0;
								LOC33 = tokend_164827(&(*p));
								if (!(LOC33 <= cols->data[i])) goto LA34;
								row->data[i] = resizeString(row->data[i], (*p).Tok->data[(*p).Idx].Symbol->Sup.len + 0);
appendString(row->data[i], (*p).Tok->data[(*p).Idx].Symbol);
								(*p).Idx += 1;
							}
							goto LA31;
							LA34: ;
							{
								{
									if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2))) goto LA39;
									(*p).Idx += 1;
								}
								LA39: ;
								i += 1;
							}
							LA31: ;
						} LA30: ;
					}
					{
						if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA43;
						(*p).Idx += 1;
					}
					LA43: ;
					{
						NI LOC47;
						LOC47 = 0;
						LOC47 = tokend_164827(&(*p));
						if (!(LOC47 <= cols->data[0])) goto LA48;
						goto LA27;
					}
					LA48: ;
					{
						if (!((17 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0)) goto LA52;
						goto LA27;
					}
					LA52: ;
					{
						NI j_165347;
						NI HEX3Atmp_165401;
						NI res_165404;
						j_165347 = 0;
						HEX3Atmp_165401 = 0;
						HEX3Atmp_165401 = (row->Sup.len-1);
						res_165404 = 1;
						{
							while (1) {
								if (!(res_165404 <= HEX3Atmp_165401)) goto LA56;
								j_165347 = res_165404;
								row->data[j_165347] = addChar(row->data[j_165347], 10);
								res_165404 += 1;
							} LA56: ;
						}
					}
				}
			} LA27: ;
			a = newrstnode_152105(((NU8) 31));
			{
				NI j_165360;
				NI HEX3Atmp_165407;
				NI res_165410;
				j_165360 = 0;
				HEX3Atmp_165407 = 0;
				HEX3Atmp_165407 = (row->Sup.len-1);
				res_165410 = 0;
				{
					while (1) {
						NI LOC60;
						trstnode152011* LOC61;
						if (!(res_165410 <= HEX3Atmp_165407)) goto LA59;
						j_165360 = res_165410;
						initparser_160689(&q, (*p).S);
						q.Col = cols->data[j_165360];
						q.Line = (NI64)(line - 1);
						genericSeqAssign(&q.Filenamestack, (*p).Filenamestack, (&NTI159680));
						LOC60 = 0;
						LOC60 = gettokens_159453(row->data[j_165360], NIM_FALSE, &q.Tok);
						q.Col += LOC60;
						b = newrstnode_152105(((NU8) 33));
						LOC61 = 0;
						LOC61 = parsedoc_165078(&q);
						add_152183(b, LOC61);
						add_152183(a, b);
						res_165410 += 1;
					} LA59: ;
				}
			}
			add_152183(result, a);
		}
	} LA1: ;
	return result;
}

N_NIMCALL(trstnode152011*, parseoptionlist_165706)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = newrstnode_152105(((NU8) 17));
	{
		while (1) {
			{
				NIM_BOOL LOC5;
				trstnode152011* a;
				trstnode152011* b;
				trstnode152011* c;
				NI j;
				LOC5 = 0;
				LOC5 = isoptionlist_164331(&(*p));
				if (!LOC5) goto LA6;
				a = newrstnode_152105(((NU8) 19));
				b = newrstnode_152105(((NU8) 23));
				c = newrstnode_152105(((NU8) 18));
				{
					NIM_BOOL LOC10;
					LOC10 = 0;
					LOC10 = match_161415(&(*p), (*p).Idx, ((NimStringDesc*) &TMP229));
					if (!LOC10) goto LA11;
					(*p).Idx += 1;
				}
				LA11: ;
				{
					while (1) {
						trstnode152011* LOC21;
						if (!!(((3 &(1<<(((*p).Tok->data[(*p).Idx].Kind)&7)))!=0))) goto LA14;
						{
							NIM_BOOL LOC17;
							LOC17 = 0;
							LOC17 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 2));
							if (!(LOC17)) goto LA18;
							LOC17 = (1 < (*p).Tok->data[(*p).Idx].Symbol->Sup.len);
							LA18: ;
							if (!LOC17) goto LA19;
							(*p).Idx += 1;
							goto LA13;
						}
						LA19: ;
						LOC21 = 0;
						LOC21 = newleaf_161182(p);
						add_152183(a, LOC21);
						(*p).Idx += 1;
					} LA14: ;
				} LA13: ;
				j = tokenafternewline_164232(&(*p));
				{
					NIM_BOOL LOC24;
					NIM_BOOL LOC25;
					NI LOC28;
					LOC24 = 0;
					LOC25 = 0;
					LOC25 = (0 < j);
					if (!(LOC25)) goto LA26;
					LOC25 = ((*p).Tok->data[(NI64)(j - 1)].Kind == ((NU8) 1));
					LA26: ;
					LOC24 = LOC25;
					if (!(LOC24)) goto LA27;
					LOC28 = 0;
					LOC28 = currind_160601(&(*p));
					LOC24 = (LOC28 < (*p).Tok->data[(NI64)(j - 1)].Ival);
					LA27: ;
					if (!LOC24) goto LA29;
					pushind_160611(p, (*p).Tok->data[(NI64)(j - 1)].Ival);
					parsesection_163119(p, b);
					popind_160640(p);
				}
				goto LA22;
				LA29: ;
				{
					parseline_163083(p, b);
				}
				LA22: ;
				{
					if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA34;
					(*p).Idx += 1;
				}
				LA34: ;
				add_152183(c, a);
				add_152183(c, b);
				add_152183(result, c);
			}
			goto LA3;
			LA6: ;
			{
				goto LA1;
			}
			LA3: ;
		}
	} LA1: ;
	return result;
}

N_NIMCALL(void, parseparagraph_164431)(trstparser159653* p, trstnode152011* result) {
	{
		while (1) {
			switch ((*p).Tok->data[(*p).Idx].Kind) {
			case ((NU8) 1):
			{
				{
					if (!((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 1))) goto LA6;
					(*p).Idx += 1;
					goto LA1;
				}
				goto LA4;
				LA6: ;
				{
					NI LOC9;
					NU8 LOC12;
					LOC9 = 0;
					LOC9 = currind_160601(&(*p));
					if (!((*p).Tok->data[(*p).Idx].Ival == LOC9)) goto LA10;
					(*p).Idx += 1;
					LOC12 = 0;
					LOC12 = whichsection_164341(&(*p));
					switch (LOC12) {
					case ((NU8) 4):
					case ((NU8) 64):
					case ((NU8) 1):
					case ((NU8) 2):
					case ((NU8) 40):
					{
						trstnode152011* LOC14;
						LOC14 = 0;
						LOC14 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP250));
						add_152183(result, LOC14);
					}
					break;
					case ((NU8) 26):
					{
						trstnode152011* LOC16;
						LOC16 = 0;
						LOC16 = parselineblock_164360(p);
						addifnotnil_152211(result, LOC16);
					}
					break;
					default:
					{
						goto LA1;
					}
					break;
					}
				}
				goto LA4;
				LA10: ;
				{
					goto LA1;
				}
				LA4: ;
			}
			break;
			case ((NU8) 5):
			{
				{
					NIM_BOOL LOC22;
					NIM_BOOL LOC23;
					NI LOC26;
					trstnode152011* LOC29;
					trstnode152011* LOC30;
					LOC22 = 0;
					LOC23 = 0;
					LOC23 = eqStrings((*p).Tok->data[(*p).Idx].Symbol, ((NimStringDesc*) &TMP217));
					if (!(LOC23)) goto LA24;
					LOC23 = ((*p).Tok->data[(NI64)((*p).Idx + 1)].Kind == ((NU8) 1));
					LA24: ;
					LOC22 = LOC23;
					if (!(LOC22)) goto LA25;
					LOC26 = 0;
					LOC26 = currind_160601(&(*p));
					LOC22 = (LOC26 < (*p).Tok->data[(NI64)((*p).Idx + 1)].Ival);
					LA25: ;
					if (!LOC22) goto LA27;
					LOC29 = 0;
					LOC29 = newrstnode_152151(((NU8) 64), ((NimStringDesc*) &TMP323));
					add_152183(result, LOC29);
					(*p).Idx += 1;
					LOC30 = 0;
					LOC30 = parseliteralblock_164107(p);
					add_152183(result, LOC30);
					goto LA1;
				}
				goto LA20;
				LA27: ;
				{
					parseinline_162582(p, result);
				}
				LA20: ;
			}
			break;
			case ((NU8) 2):
			case ((NU8) 3):
			case ((NU8) 4):
			case ((NU8) 6):
			{
				parseinline_162582(p, result);
			}
			break;
			default:
			{
				goto LA1;
			}
			break;
			}
		}
	} LA1: ;
}

N_NIMCALL(NU8, sonkind_166020)(trstnode152011* father, NI i) {
	NU8 result;
	result = 0;
	result = ((NU8) 64);
	{
		NI LOC3;
		LOC3 = 0;
		LOC3 = len_152084(father);
		if (!(i < LOC3)) goto LA4;
		result = (*(*father).Sons->data[i]).Kind;
	}
	LA4: ;
	return result;
}

N_NIMCALL(void, parsesection_163119)(trstparser159653* p, trstnode152011* result) {
	{
		while (1) {
			NIM_BOOL leave;
			trstnode152011* a;
			NU8 k;
			leave = NIM_FALSE;
			{
				while (1) {
					if (!((*p).Tok->data[(*p).Idx].Kind == ((NU8) 1))) goto LA4;
					{
						NI LOC7;
						LOC7 = 0;
						LOC7 = currind_160601(&(*p));
						if (!(LOC7 == (*p).Tok->data[(*p).Idx].Ival)) goto LA8;
						(*p).Idx += 1;
					}
					goto LA5;
					LA8: ;
					{
						NI LOC11;
						trstnode152011* a;
						LOC11 = 0;
						LOC11 = currind_160601(&(*p));
						if (!(LOC11 < (*p).Tok->data[(*p).Idx].Ival)) goto LA12;
						pushind_160611(p, (*p).Tok->data[(*p).Idx].Ival);
						a = newrstnode_152105(((NU8) 28));
						parsesection_163119(p, a);
						add_152183(result, a);
						popind_160640(p);
					}
					goto LA5;
					LA12: ;
					{
						leave = NIM_TRUE;
						goto LA3;
					}
					LA5: ;
				} LA4: ;
			} LA3: ;
			{
				NIM_BOOL LOC17;
				LOC17 = 0;
				LOC17 = leave;
				if (LOC17) goto LA18;
				LOC17 = ((*p).Tok->data[(*p).Idx].Kind == ((NU8) 0));
				LA18: ;
				if (!LOC17) goto LA19;
				goto LA1;
			}
			LA19: ;
			a = NIM_NIL;
			k = whichsection_164341(&(*p));
			switch (k) {
			case ((NU8) 24):
			{
				(*p).Idx += 1;
				a = parseliteralblock_164107(p);
			}
			break;
			case ((NU8) 5):
			{
				a = parsebulletlist_165634(p);
			}
			break;
			case ((NU8) 26):
			{
				a = parselineblock_164360(p);
			}
			break;
			case ((NU8) 40):
			{
				a = parsedotdot_164100(p);
			}
			break;
			case ((NU8) 7):
			{
				a = parseenumlist_165924(p);
			}
			break;
			case ((NU8) 64):
			{
				rstmessage_160400(&(*p), ((NU8) 3));
			}
			break;
			case ((NU8) 4):
			{
			}
			break;
			case ((NU8) 9):
			{
				a = parsedefinitionlist_165827(p);
			}
			break;
			case ((NU8) 13):
			{
				{
					if (!(0 < (*p).Idx)) goto LA32;
					(*p).Idx -= 1;
				}
				LA32: ;
				a = parsefields_163161(p);
			}
			break;
			case ((NU8) 3):
			{
				a = parsetransition_165472(p);
			}
			break;
			case ((NU8) 1):
			{
				a = parseheadline_164504(p);
			}
			break;
			case ((NU8) 2):
			{
				a = parseoverline_165537(p);
			}
			break;
			case ((NU8) 29):
			{
				a = parsesimpletable_165085(p);
			}
			break;
			case ((NU8) 17):
			{
				a = parseoptionlist_165706(p);
			}
			break;
			default:
			{
			}
			break;
			}
			{
				NIM_BOOL LOC42;
				LOC42 = 0;
				LOC42 = (a == NIM_NIL);
				if (!(LOC42)) goto LA43;
				LOC42 = !((k == ((NU8) 40)));
				LA43: ;
				if (!LOC42) goto LA44;
				a = newrstnode_152105(((NU8) 4));
				parseparagraph_164431(p, a);
			}
			LA44: ;
			addifnotnil_152211(result, a);
		}
	} LA1: ;
	{
		NIM_BOOL LOC48;
		NU8 LOC49;
		NU8 LOC51;
		LOC48 = 0;
		LOC49 = 0;
		LOC49 = sonkind_166020(result, 0);
		LOC48 = (LOC49 == ((NU8) 4));
		if (!(LOC48)) goto LA50;
		LOC51 = 0;
		LOC51 = sonkind_166020(result, 1);
		LOC48 = !((LOC51 == ((NU8) 4)));
		LA50: ;
		if (!LOC48) goto LA52;
		(*(*result).Sons->data[0]).Kind = ((NU8) 0);
	}
	LA52: ;
}

N_NIMCALL(trstnode152011*, parsesectionwrapper_166325)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = newrstnode_152105(((NU8) 0));
	parsesection_163119(p, result);
	{
		while (1) {
			NIM_BOOL LOC3;
			NI LOC5;
			LOC3 = 0;
			LOC3 = ((*result).Kind == ((NU8) 0));
			if (!(LOC3)) goto LA4;
			LOC5 = 0;
			LOC5 = len_152084(result);
			LOC3 = (LOC5 == 1);
			LA4: ;
			if (!LOC3) goto LA2;
			result = (*result).Sons->data[0];
		} LA2: ;
	}
	return result;
}

N_NIMCALL(trstnode152011*, parsedoc_165078)(trstparser159653* p) {
	trstnode152011* result;
	result = 0;
	result = parsesectionwrapper_166325(p);
	{
		if (!!(((*p).Tok->data[(*p).Idx].Kind == ((NU8) 0)))) goto LA3;
		rstmessage_160400(&(*p), ((NU8) 4));
	}
	LA3: ;
	return result;
}

N_NIMCALL(trstnode152011*, rstparse_167967)(NimStringDesc* text, NimStringDesc* filename, NI line, NI column, NIM_BOOL* hastoc, tlayeredconf158038* config, lr_nim_find_file_handler findfile, lr_nim_msg_handler msghandler) {
	trstnode152011* result;
	trstparser159653 p;
	NU8 options;
	tsharedstate159649* LOC17;
	fileinfo159643 LOC18;
	NimStringDesc* LOC19;
	NimStringDesc* LOC20;
	NI LOC21;
	trstnode152011* LOC22;
	result = 0;
	memset((void*)&p, 0, sizeof(p));
	p.Sup.m_type = (&NTI159653);
	options = 0;
	{
		NimStringDesc* configkey_168255;
		NU8 ebit_168256;
		NI i_168313;
		configkey_168255 = 0;
		ebit_168256 = 0;
		i_168313 = 0;
		{
			if (!(((NI) (i_168313)) <= 3)) goto LA4;
			{
				while (1) {
					configkey_168255 = TMP193[(i_168313)- 0].Field0;
					ebit_168256 = TMP193[(i_168313)- 0].Field1;
					{
						NIM_BOOL LOC10;
						LOC10 = 0;
						LOC10 = istrue_158218(config, configkey_168255);
						if (!LOC10) goto LA11;
						options |= ((NI8)1)<<((ebit_168256)%(sizeof(NI8)*8));
					}
					LA11: ;
					{
						if (!(3 <= ((NI) (i_168313)))) goto LA15;
						goto LA6;
					}
					LA15: ;
					i_168313 += 1;
				}
			} LA6: ;
		}
		LA4: ;
	}
	LOC17 = 0;
	LOC17 = newsharedstate_160250(options, findfile, msghandler);
	initparser_160689(&p, LOC17);
	memset((void*)&LOC18, 0, sizeof(LOC18));
	newfileinfo_159688(filename, &LOC18);
	p.Filenamestack = (TY159680*) incrSeq(&(p.Filenamestack)->Sup, sizeof(fileinfo159643));
	LOC19 = 0;
	LOC19 = p.Filenamestack->data[p.Filenamestack->Sup.len-1].Realpath; p.Filenamestack->data[p.Filenamestack->Sup.len-1].Realpath = copyStringRC1(LOC18.Realpath);
	if (LOC19) nimGCunrefNoCycle(LOC19);
	LOC20 = 0;
	LOC20 = p.Filenamestack->data[p.Filenamestack->Sup.len-1].Input; p.Filenamestack->data[p.Filenamestack->Sup.len-1].Input = copyStringRC1(LOC18.Input);
	if (LOC20) nimGCunrefNoCycle(LOC20);
	p.Line = line;
	LOC21 = 0;
	LOC21 = gettokens_159453(text, ((options &(1<<((((NU8) 0))&7)))!=0), &p.Tok);
	p.Col = (NI64)(column + LOC21);
	LOC22 = 0;
	LOC22 = parsedoc_165078(&p);
	result = resolvesubs_167889(&p, LOC22);
	(*hastoc) = p.Hastoc;
	return result;
}

N_NIMCALL(NimStringDesc*, getargument_159068)(trstnode152011* n) {
	NimStringDesc* result;
	result = 0;
	{
		if (!((*n).Sons->data[0] == NIM_NIL)) goto LA3;
		result = copyString(((NimStringDesc*) &TMP75));
	}
	goto LA1;
	LA3: ;
	{
		result = addnodes_159055((*n).Sons->data[0]);
	}
	LA1: ;
	return result;
}

N_NIMCALL(NimStringDesc*, getfieldvalue_163223)(trstnode152011* n) {
	NimStringDesc* result;
	NimStringDesc* LOC1;
	result = 0;
	LOC1 = 0;
	LOC1 = addnodes_159055((*n).Sons->data[1]);
	result = nsuStrip(LOC1, NIM_TRUE, NIM_TRUE);
	return result;
}
N_NOINLINE(void, HEX00_lrstInit)(void) {
}

N_NOINLINE(void, HEX00_lrstDatInit)(void) {
static TNimNode* TMP45[11];
NI TMP47;
static char* NIM_CONST TMP46[11] = {
"meCannotOpenFile", 
"meExpected", 
"meGridTableNotImplemented", 
"meNewSectionExpected", 
"meGeneralParseError", 
"meInvalidDirective", 
"meRecursiveInclude", 
"mwRedefinitionOfLabel", 
"mwUnknownSubstitution", 
"mwUnsupportedLanguage", 
"mwUnsupportedField"};
static TNimNode* TMP52[3];
NI TMP54;
static char* NIM_CONST TMP53[3] = {
"Hint", 
"Warning", 
"Error"};
static TNimNode* TMP177[8];
static TNimNode* TMP178[5];
static TNimNode* TMP179[7];
NI TMP181;
static char* NIM_CONST TMP180[7] = {
"tkEof", 
"tkIndent", 
"tkWhite", 
"tkWord", 
"tkAdornment", 
"tkPunct", 
"tkOther"};
static TNimNode* TMP183[9];
static TNimNode* TMP184[4];
NI TMP186;
static char* NIM_CONST TMP185[4] = {
"roSkipPounds", 
"roSupportSmilies", 
"roSupportRawDirective", 
"roSupportMarkdown"};
static TNimNode* TMP187[2];
static TNimNode* TMP191[2];
static TNimNode* TMP205[6];
static TNimNode TMP35[69];
NTI159007.size = sizeof(NU8);
NTI159007.kind = 14;
NTI159007.base = 0;
NTI159007.flags = 3;
for (TMP47 = 0; TMP47 < 11; TMP47++) {
TMP35[TMP47+0].kind = 1;
TMP35[TMP47+0].offset = TMP47;
TMP35[TMP47+0].name = TMP46[TMP47];
TMP45[TMP47] = &TMP35[TMP47+0];
}
TMP35[11].len = 11; TMP35[11].kind = 2; TMP35[11].sons = &TMP45[0];
NTI159007.node = &TMP35[11];
NTI159005.size = sizeof(NU8);
NTI159005.kind = 14;
NTI159005.base = 0;
NTI159005.flags = 3;
for (TMP54 = 0; TMP54 < 3; TMP54++) {
TMP35[TMP54+12].kind = 1;
TMP35[TMP54+12].offset = TMP54;
TMP35[TMP54+12].name = TMP53[TMP54];
TMP52[TMP54] = &TMP35[TMP54+12];
}
TMP35[15].len = 3; TMP35[15].kind = 2; TMP35[15].sons = &TMP52[0];
NTI159005.node = &TMP35[15];
NTI159013.size = sizeof(lr_nim_find_file_handler);
NTI159013.kind = 25;
NTI159013.base = 0;
NTI159013.flags = 3;
NTI159011.size = sizeof(lr_nim_msg_handler);
NTI159011.kind = 25;
NTI159011.base = 0;
NTI159011.flags = 3;
NTI159653.size = sizeof(trstparser159653);
NTI159653.kind = 17;
NTI159653.base = (&NTI2811);
TMP177[0] = &TMP35[17];
TMP35[17].kind = 1;
TMP35[17].offset = offsetof(trstparser159653, Idx);
TMP35[17].typ = (&NTI116);
TMP35[17].name = "idx";
TMP177[1] = &TMP35[18];
NTI159124.size = sizeof(ttoken159124);
NTI159124.kind = 18;
NTI159124.base = 0;
NTI159124.flags = 2;
TMP178[0] = &TMP35[20];
NTI159122.size = sizeof(NU8);
NTI159122.kind = 14;
NTI159122.base = 0;
NTI159122.flags = 3;
for (TMP181 = 0; TMP181 < 7; TMP181++) {
TMP35[TMP181+21].kind = 1;
TMP35[TMP181+21].offset = TMP181;
TMP35[TMP181+21].name = TMP180[TMP181];
TMP179[TMP181] = &TMP35[TMP181+21];
}
TMP35[28].len = 7; TMP35[28].kind = 2; TMP35[28].sons = &TMP179[0];
NTI159122.node = &TMP35[28];
TMP35[20].kind = 1;
TMP35[20].offset = offsetof(ttoken159124, Kind);
TMP35[20].typ = (&NTI159122);
TMP35[20].name = "kind";
TMP178[1] = &TMP35[29];
TMP35[29].kind = 1;
TMP35[29].offset = offsetof(ttoken159124, Ival);
TMP35[29].typ = (&NTI116);
TMP35[29].name = "ival";
TMP178[2] = &TMP35[30];
TMP35[30].kind = 1;
TMP35[30].offset = offsetof(ttoken159124, Symbol);
TMP35[30].typ = (&NTI161);
TMP35[30].name = "symbol";
TMP178[3] = &TMP35[31];
TMP35[31].kind = 1;
TMP35[31].offset = offsetof(ttoken159124, Line);
TMP35[31].typ = (&NTI116);
TMP35[31].name = "line";
TMP178[4] = &TMP35[32];
TMP35[32].kind = 1;
TMP35[32].offset = offsetof(ttoken159124, Col);
TMP35[32].typ = (&NTI116);
TMP35[32].name = "col";
TMP35[19].len = 5; TMP35[19].kind = 2; TMP35[19].sons = &TMP178[0];
NTI159124.node = &TMP35[19];
NTI159126.size = sizeof(ttokenseq159126*);
NTI159126.kind = 24;
NTI159126.base = (&NTI159124);
NTI159126.flags = 2;
NTI159126.marker = TMP182;
TMP35[18].kind = 1;
TMP35[18].offset = offsetof(trstparser159653, Tok);
TMP35[18].typ = (&NTI159126);
TMP35[18].name = "tok";
TMP177[2] = &TMP35[33];
NTI159649.size = sizeof(tsharedstate159649);
NTI159649.kind = 18;
NTI159649.base = 0;
NTI159649.flags = 2;
TMP183[0] = &TMP35[35];
NTI159645.size = sizeof(NU8);
NTI159645.kind = 14;
NTI159645.base = 0;
NTI159645.flags = 3;
for (TMP186 = 0; TMP186 < 4; TMP186++) {
TMP35[TMP186+36].kind = 1;
TMP35[TMP186+36].offset = TMP186;
TMP35[TMP186+36].name = TMP185[TMP186];
TMP184[TMP186] = &TMP35[TMP186+36];
}
TMP35[40].len = 4; TMP35[40].kind = 2; TMP35[40].sons = &TMP184[0];
NTI159645.node = &TMP35[40];
NTI159647.size = sizeof(NU8);
NTI159647.kind = 19;
NTI159647.base = (&NTI159645);
NTI159647.flags = 3;
TMP35[41].len = 0; TMP35[41].kind = 0;
NTI159647.node = &TMP35[41];
TMP35[35].kind = 1;
TMP35[35].offset = offsetof(tsharedstate159649, Options);
TMP35[35].typ = (&NTI159647);
TMP35[35].name = "options";
TMP183[1] = &TMP35[42];
TMP35[42].kind = 1;
TMP35[42].offset = offsetof(tsharedstate159649, Ulevel);
TMP35[42].typ = (&NTI116);
TMP35[42].name = "uLevel";
TMP183[2] = &TMP35[43];
TMP35[43].kind = 1;
TMP35[43].offset = offsetof(tsharedstate159649, Olevel);
TMP35[43].typ = (&NTI116);
TMP35[43].name = "oLevel";
TMP183[3] = &TMP35[44];
NTI159641.size = sizeof(tsubstitution159641);
NTI159641.kind = 18;
NTI159641.base = 0;
NTI159641.flags = 2;
TMP187[0] = &TMP35[46];
TMP35[46].kind = 1;
TMP35[46].offset = offsetof(tsubstitution159641, Key);
TMP35[46].typ = (&NTI161);
TMP35[46].name = "key";
TMP187[1] = &TMP35[47];
TMP35[47].kind = 1;
TMP35[47].offset = offsetof(tsubstitution159641, Value);
TMP35[47].typ = (&NTI152007);
TMP35[47].name = "value";
TMP35[45].len = 2; TMP35[45].kind = 2; TMP35[45].sons = &TMP187[0];
NTI159641.node = &TMP35[45];
NTI159667.size = sizeof(TY159667*);
NTI159667.kind = 24;
NTI159667.base = (&NTI159641);
NTI159667.flags = 2;
NTI159667.marker = TMP188;
TMP35[44].kind = 1;
TMP35[44].offset = offsetof(tsharedstate159649, Subs);
TMP35[44].typ = (&NTI159667);
TMP35[44].name = "subs";
TMP183[4] = &TMP35[48];
TMP35[48].kind = 1;
TMP35[48].offset = offsetof(tsharedstate159649, Refs);
TMP35[48].typ = (&NTI159667);
TMP35[48].name = "refs";
TMP183[5] = &TMP35[49];
NTI159639.size = sizeof(tlevelmap159639);
NTI159639.kind = 16;
NTI159639.base = (&NTI116);
NTI159639.flags = 3;
TMP35[49].kind = 1;
TMP35[49].offset = offsetof(tsharedstate159649, Underlinetolevel);
TMP35[49].typ = (&NTI159639);
TMP35[49].name = "underlineToLevel";
TMP183[6] = &TMP35[50];
TMP35[50].kind = 1;
TMP35[50].offset = offsetof(tsharedstate159649, Overlinetolevel);
TMP35[50].typ = (&NTI159639);
TMP35[50].name = "overlineToLevel";
TMP183[7] = &TMP35[51];
TMP35[51].kind = 1;
TMP35[51].offset = offsetof(tsharedstate159649, Msghandler);
TMP35[51].typ = (&NTI159011);
TMP35[51].name = "msgHandler";
TMP183[8] = &TMP35[52];
TMP35[52].kind = 1;
TMP35[52].offset = offsetof(tsharedstate159649, Findfile);
TMP35[52].typ = (&NTI159013);
TMP35[52].name = "findFile";
TMP35[34].len = 9; TMP35[34].kind = 2; TMP35[34].sons = &TMP183[0];
NTI159649.node = &TMP35[34];
NTI159651.size = sizeof(tsharedstate159649*);
NTI159651.kind = 22;
NTI159651.base = (&NTI159649);
NTI159651.flags = 2;
NTI159651.marker = TMP189;
TMP35[33].kind = 1;
TMP35[33].offset = offsetof(trstparser159653, S);
TMP35[33].typ = (&NTI159651);
TMP35[33].name = "s";
TMP177[3] = &TMP35[53];
NTI159678.size = sizeof(TY159678*);
NTI159678.kind = 24;
NTI159678.base = (&NTI116);
NTI159678.flags = 2;
NTI159678.marker = TMP190;
TMP35[53].kind = 1;
TMP35[53].offset = offsetof(trstparser159653, Indentstack);
TMP35[53].typ = (&NTI159678);
TMP35[53].name = "indentStack";
TMP177[4] = &TMP35[54];
NTI159643.size = sizeof(fileinfo159643);
NTI159643.kind = 18;
NTI159643.base = 0;
NTI159643.flags = 2;
TMP191[0] = &TMP35[56];
TMP35[56].kind = 1;
TMP35[56].offset = offsetof(fileinfo159643, Realpath);
TMP35[56].typ = (&NTI161);
TMP35[56].name = "real_path";
TMP191[1] = &TMP35[57];
TMP35[57].kind = 1;
TMP35[57].offset = offsetof(fileinfo159643, Input);
TMP35[57].typ = (&NTI161);
TMP35[57].name = "input";
TMP35[55].len = 2; TMP35[55].kind = 2; TMP35[55].sons = &TMP191[0];
NTI159643.node = &TMP35[55];
NTI159680.size = sizeof(TY159680*);
NTI159680.kind = 24;
NTI159680.base = (&NTI159643);
NTI159680.flags = 2;
NTI159680.marker = TMP192;
TMP35[54].kind = 1;
TMP35[54].offset = offsetof(trstparser159653, Filenamestack);
TMP35[54].typ = (&NTI159680);
TMP35[54].name = "filename_stack";
TMP177[5] = &TMP35[58];
TMP35[58].kind = 1;
TMP35[58].offset = offsetof(trstparser159653, Line);
TMP35[58].typ = (&NTI116);
TMP35[58].name = "line";
TMP177[6] = &TMP35[59];
TMP35[59].kind = 1;
TMP35[59].offset = offsetof(trstparser159653, Col);
TMP35[59].typ = (&NTI116);
TMP35[59].name = "col";
TMP177[7] = &TMP35[60];
TMP35[60].kind = 1;
TMP35[60].offset = offsetof(trstparser159653, Hastoc);
TMP35[60].typ = (&NTI150);
TMP35[60].name = "hasToc";
TMP35[16].len = 8; TMP35[16].kind = 2; TMP35[16].sons = &TMP177[0];
NTI159653.node = &TMP35[16];
NTI159128.size = sizeof(tlexer159128);
NTI159128.kind = 17;
NTI159128.base = (&NTI2811);
NTI159128.flags = 1;
TMP205[0] = &TMP35[62];
TMP35[62].kind = 1;
TMP35[62].offset = offsetof(tlexer159128, Buf);
TMP35[62].typ = (&NTI163);
TMP35[62].name = "buf";
TMP205[1] = &TMP35[63];
TMP35[63].kind = 1;
TMP35[63].offset = offsetof(tlexer159128, Bufpos);
TMP35[63].typ = (&NTI116);
TMP35[63].name = "bufpos";
TMP205[2] = &TMP35[64];
TMP35[64].kind = 1;
TMP35[64].offset = offsetof(tlexer159128, Line);
TMP35[64].typ = (&NTI116);
TMP35[64].name = "line";
TMP205[3] = &TMP35[65];
TMP35[65].kind = 1;
TMP35[65].offset = offsetof(tlexer159128, Col);
TMP35[65].typ = (&NTI116);
TMP35[65].name = "col";
TMP205[4] = &TMP35[66];
TMP35[66].kind = 1;
TMP35[66].offset = offsetof(tlexer159128, Baseindent);
TMP35[66].typ = (&NTI116);
TMP35[66].name = "baseIndent";
TMP205[5] = &TMP35[67];
TMP35[67].kind = 1;
TMP35[67].offset = offsetof(tlexer159128, Skippounds);
TMP35[67].typ = (&NTI150);
TMP35[67].name = "skipPounds";
TMP35[61].len = 6; TMP35[61].kind = 2; TMP35[61].sons = &TMP205[0];
NTI159128.node = &TMP35[61];
NTI159009.size = sizeof(eparseerror159009);
NTI159009.kind = 17;
NTI159009.base = (&NTI2855);
TMP35[68].len = 0; TMP35[68].kind = 2;
NTI159009.node = &TMP35[68];
NTI160341.size = sizeof(eparseerror159009*);
NTI160341.kind = 22;
NTI160341.base = (&NTI159009);
NTI160341.marker = TMP210;
}

